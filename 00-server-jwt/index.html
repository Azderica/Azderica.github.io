<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>[Server] 토큰 기반 인증과 JWT - Azderica</title><meta name="gridsome:hash" content="a48ca53256831608b767e7c070d0a68a0cbdb4b7"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="부족하지만 꿈많은 웹 개발자의 발전 기록입니다."><meta data-vue-tag="ssr" name="description" content=" 토큰 기반 인증과 JWT에 대해 알아보겠습니다. "><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.d0be325ebfe2762f973f3e0685345394.png"><link rel="preload" href="/assets/css/0.styles.caed6242.css" as="style"><link rel="preload" href="/assets/js/app.0e095be4.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--post-vue.9eba755d.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules--gridsome--app--pages--404-vue.b6200640.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.20763e56.js"><link rel="prefetch" href="/assets/js/page--src--templates--tag-vue.762abdba.js"><link rel="stylesheet" href="/assets/css/0.styles.caed6242.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="shortcut icon" type="image/png" href="favicon.png">
    <script data-ad-client="ca-pub-1759762070891290" async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="google-site-verification" content="MqpGCz7XVg4s3AWfrGHCt6AlXPacpV9iGvSFVD0ATHw" />
  </head>
  <body >
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      (function() {
        window.__onThemeChange = function() {};
        function setTheme(newTheme) {
          window.__theme = newTheme;
          preferredTheme = newTheme;
          document.body.setAttribute('data-theme', newTheme);
          window.__onThemeChange(newTheme);
        }

        var preferredTheme;
        try {
          preferredTheme = localStorage.getItem('theme');
        } catch (err) { }

        window.__setPreferredTheme = function(newTheme) {
          setTheme(newTheme);
          try {
            localStorage.setItem('theme', newTheme);
          } catch (err) {}
        }

        var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? 'dark' : 'light')
        });

        setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
      })();
    </script>

    <div id="app" data-server-rendered="true"><header class="header"><div class="header__left"><a href="/" class="logo active"><span class="logo__text">
    ← Azderica
  </span></a></div><div class="header__right"><button role="button" aria-label="Toggle dark/light" class="toggle-theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></button></div></header><main class="main"><div class="post-title"><h1 class="post-title__text">
      [Server] 토큰 기반 인증과 JWT
    </h1><div class="post-meta">
   Posted 25. December 2020.
   <strong>10 min read.</strong></div></div><div class="post content-box"><div class="post__header"><img alt="Cover image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 820 312' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-589616928c4495027886eca870873b0a'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-589616928c4495027886eca870873b0a)' width='820' height='312' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAYCAYAAABKtPtEAAAACXBIWXMAAAsSAAALEgHS3X78AAADfElEQVRYw%2b1WaUhUURQeCKI/mm2UqZnYuKamaS6TS1hmWk1auWGZLSONkpaWy6RIQQtBZWVpZVZaREJFUhSFgREUQUEUtPsjzeqH2zhaM5Nf9x6d5xsdstBf9X4c3r33fPfc73zvvHOfbBe68T%2bbTBJAEkASQBJAEkASQBLAou3s0wrPPEMHPcl%2bdg2ORUZY5sszdppjLeH/ct3EQ%2bwTuLHzzMzQaeYfVQXwAAX4jmIA%2behlBLQohEFIdij5QuihQR/hOIbPC2EcRr4AP5jpGUY34NPSmOP7z7Ekgo72ibnlo4edBxThJzMjdrOxwHWE5EeuAEaCJ5/R9ApLTh2F%2bvN7IrD%2baaOQLCdgwvN5%2bosnWHvnBuF41fC9qY8fEE6Mz/raRNicrlY6gxPO/d6GzW%2beQ/Xh5ZDYOnrm/mjD1ua3QoVx/7a2T4i7fgUJ9%2buR8vAelHU1iD5bDnXLO%2bLAeY5KAE5k0%2btnsFMEIfzAHvio0jHD34/GvpkZ8MvKgOf6FORov6CEKe%2b/PQu2C/wRxvx8Xb5qBRwjIwjLbX62Gq5r4uCekgDvLRvgnrwWiw7vR9i%2bUnikJsEtcTV81Sry%2bag2Ym76OpZkM73Z5Ma7mO43D9vam0kUXmmq9y8w2VWOqXM9YO3oANeEeNiHKZDZ%2boGEHZ0ApHIvqezFiPiyZG2cnTDe2gpO0YthH6pgwgRjktyZDuQkXeKVmOjkyHwhmOLpRonOjoqkfbaBAbRuZT%2bTRPBcl0ykA/N3wG5hMKb5eMF7cxpsgwJgPcsBk1zkLIY7VB9fopTFjr14BjKZDPE3r1LZ84pQlBbBISIUNnOcMW7CBIQUF8B7U9qwXjEKAXro7SrrapHYcAtRlcew9PRxxNZWIebCacTWnEXUqTJs7/5GinOSkWWHsPTMCSwuP4wVl6vp81l%2b6RzDV5Kf41derUHM%2bUpWricpDl9bVl2BGOanPeVH%2bmNXlCG7vYUSTnv2CAF52VhdX0fffK6%2bHeEH92LVtcuIrjpJe5IabkPJYvNGOGZN0FRupibDTSMyPjc1M81AExrE9VnE83WNCGcZI4o98DmWDDS8/tLW0VmmM7jxhsvnf5L8312DvPEYu6ixkZldOx0C1jTnb0DAGTqH4cVX1m8xoth0xeo7iIf4ehb2c6zoGh6TCpD%2bBCUBJAEkASQBJAEkAf5Z%2bwVSusnDq3vAkAAAAABJRU5ErkJggg==' /%3e%3c/svg%3e" width="820" data-src="/assets/static/JwtText.214a68b.9080bdf34d1f234aeb05449acc88e2ef.png" data-srcset="/assets/static/JwtText.a67b0b2.9080bdf34d1f234aeb05449acc88e2ef.png 480w, /assets/static/JwtText.214a68b.9080bdf34d1f234aeb05449acc88e2ef.png 820w" data-sizes="(max-width: 820px) 100vw, 820px" class="g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/JwtText.214a68b.9080bdf34d1f234aeb05449acc88e2ef.png" class="g-image g-image--loaded" width="820" alt="Cover image"></noscript></div><div class="post__content"><h1 id="jwt"><a href="#jwt" aria-hidden="true"><span class="icon icon-link"></span></a>JWT</h1>
<p>최근 업무에서 긴급 이슈가 있었는데, 그 자세한 내용을 설명할 수는 없으나 가장 큰 원인 중 하나는 토큰 이슈였습니다. 그에 따라 오늘 토큰 기반의 인증과 가장 유명한 JWT(Json Web Token)에 대해 정리해볼려고 합니다.</p>
<br/>
<h2 id="토큰token-기반-인증"><a href="#%ED%86%A0%ED%81%B0token-%EA%B8%B0%EB%B0%98-%EC%9D%B8%EC%A6%9D" aria-hidden="true"><span class="icon icon-link"></span></a>토큰(Token) 기반 인증</h2>
<p>토큰 기반의 인증은 모던 웹서비스에서 많이 사용됩니다. 특히 API를 사용하는 웹서비스를 개발해야한다면 토큰을 사용하는 방법이 가장 좋습니다.</p>
<h3 id="기존-서버-기반-인증"><a href="#%EA%B8%B0%EC%A1%B4-%EC%84%9C%EB%B2%84-%EA%B8%B0%EB%B0%98-%EC%9D%B8%EC%A6%9D" aria-hidden="true"><span class="icon icon-link"></span></a>기존 서버 기반 인증</h3>
<p>기존의 서버 기반의 인증은 다음과 같은 구조를 가지고 있었습니다.</p>
<p><img src="https://user-images.githubusercontent.com/42582516/103119059-06ada400-46b5-11eb-8e01-e1e841b40823.png" alt="서버기반인증"></p>
<p>하지만 이러한 서버 기반의 인증은 다음과 같은 문제를 가집니다. (그러나 아직 사용하는 곳도 많습니다.)</p>
<ul>
<li>
<p>세션</p>
<ul>
<li>유저가 인증을 할 때, 서버는 이 기록을 서버에 저장합니다. (= 세션)</li>
<li>로그인 중인 유저가 늘어날 수록 서버의 램이 과부화됩니다. (DB에 저장하면 DB 성능의 무리가 오게됩니다.)</li>
</ul>
</li>
<li>
<p>확장성</p>
<ul>
<li>세션을 사용하는 경우에는 더 많은 트래픽을 감당하기 위해 여러개의 프로세스를 돌리거나, 여러 서버 컴퓨터를 추가하는 것이 어려워집니다.</li>
</ul>
</li>
<li>
<p>CORS(Cross-Origin Resource Sharing)</p>
<ul>
<li>일반적으로 쿠키는 단일 도메인 및 서브 도메인엣만 작동하도록 설계되어 있는데 이러한 쿠키를 여러 도메인에서 관리하는 것은 번거롭습니다.</li>
</ul>
</li>
</ul>
<h4 id="토큰-기반-시스템의-작동-원리"><a href="#%ED%86%A0%ED%81%B0-%EA%B8%B0%EB%B0%98-%EC%8B%9C%EC%8A%A4%ED%85%9C%EC%9D%98-%EC%9E%91%EB%8F%99-%EC%9B%90%EB%A6%AC" aria-hidden="true"><span class="icon icon-link"></span></a>토큰 기반 시스템의 작동 원리.</h4>
<p>토큰 기반 시스템은 <strong>stateless</strong>(상태를 유지하지 않음) 합니다. 이 덕분에 위에서 발생한 문제들이 해결됩니다.</p>
<p>토큰 기반 시스템은 다음과 같이 작동합니다.</p>
<p><img src="https://user-images.githubusercontent.com/42582516/103119347-4c1ea100-46b6-11eb-9a90-a7fab5edbc1b.png" alt="토큰기반인증"></p>
<p>이를 순서로 나타내면 다음과 같습니다.</p>
<ol>
<li>유저가 <strong>로그인</strong>을 합니다.</li>
<li>서버가 <strong>계정정보를 검증</strong>합니다.</li>
<li>계정 정보가 정확한 경우, 서버측에서 <strong>signed 토큰을 발급</strong>해줍니다.</li>
<li>클라이언트 측에서는 전달받은 <strong>토큰을 저장</strong>하고, 서버 <strong>요청마다 토큰을 함께 서버에 전달</strong>합니다.</li>
<li>서버는 <strong>토큰을 검증</strong>하고 <strong>요청에 응답</strong>합니다.</li>
</ol>
<h3 id="토큰-기반-서비스를-선택하는-이유"><a href="#%ED%86%A0%ED%81%B0-%EA%B8%B0%EB%B0%98-%EC%84%9C%EB%B9%84%EC%8A%A4%EB%A5%BC-%EC%84%A0%ED%83%9D%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0" aria-hidden="true"><span class="icon icon-link"></span></a>토큰 기반 서비스를 선택하는 이유.</h3>
<p>일반적으로 토큰 기반의 인증 시스템은 다음의 장점을 가집니다.</p>
<ul>
<li>
<p>Stateless 서버</p>
<ul>
<li>Stateful 서버 : 클라이언트에게 요청받을때마다, 클라이언트의 상태를 계속 유지합니다. 세션에 로그인 정보 등을 저장하고 계속 활용합니다.</li>
<li><strong>Stateless 서버</strong> : 상태를 유지 하지 않는 서버. 상태정보를 저장하지 않고, 서버는 클라이언트측에서 들어오는 요청만으로 작업을 진행, 이 경우에는 클라이언트와 서버의 연결고리가 없으므로 <strong>서버의 확장성에서 장점</strong>을 가집니다.</li>
</ul>
</li>
<li>
<p>모바일 어플리케이션에 적합</p>
<ul>
<li>만약에 Android와 IOS에서 작동하는 어플리케이션을 개발할 때, 안전한 API를 만들기 위해서는 쿠키 등은 좋은 해결책이 될 수 없습니다. (쿠키 컨테이너를 사용해야하기 때문에...)</li>
</ul>
</li>
<li>
<p>인증정보를 다른 어플리케이션으로 전달</p>
<ul>
<li>대표적인 서비스로 OAuth 등이 있습니다. 구글이나 페이스북, 카카오톡, 네이버와 같은 소셜 계정을 통해 다른 웹서비스에서도 로그인 가능합니다.</li>
</ul>
</li>
<li>
<p>보안</p>
<ul>
<li>토큰 기반의 인증을 통해서 어플리케이션의 보안을 높일 수 있습니다.</li>
</ul>
</li>
</ul>
<h3 id="토큰-기반-서비스의-장점"><a href="#%ED%86%A0%ED%81%B0-%EA%B8%B0%EB%B0%98-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%9D%98-%EC%9E%A5%EC%A0%90" aria-hidden="true"><span class="icon icon-link"></span></a>토큰 기반 서비스의 장점.</h3>
<p>따라서 토큰 기반의 서비스는 다음과 같은 장점을 가집니다.</p>
<ul>
<li>
<p>무상태이며 확장성을 가짐</p>
<ul>
<li>기존에 설명한 것처럼 많은 리소스 소모를 줄일 수 있습니다.</li>
</ul>
</li>
<li>
<p>보안성</p>
<ul>
<li>쿠키를 사용하지 않으므로 쿠키 취약점을 방지할 수 있습니다.</li>
<li>다만 토큰도 취약점이 존재합니다.</li>
</ul>
</li>
<li>
<p>확장성(Extensibility)</p>
<ul>
<li>토큰을 통해 다른 서비스에 권한을 공유함으로서 사업이나 분야를 확장할 수 있습니다.</li>
<li>토큰에 선택적인 권한만 부여하여 발급할 수도 있습니다.</li>
</ul>
</li>
<li>
<p>여러 플랫폼 및 도메인</p>
<ul>
<li>토큰만 유효하다면 여러 플랫폼과 도메인에서 사용할 수 있습니다.</li>
<li>서버측 어플리케이션 응답부분에 다음 헤더만 포함하면 <code class="language-text">Access-Control-Allow-Origin: *</code> 서버에서는 쉽게 정리할 수 있습니다.</li>
</ul>
</li>
<li>
<p>웹 표준 기반</p>
<ul>
<li>JWT는 웹 표준에 등록되어 있기 때문에 여러 환경에서 지원이 됩니다.</li>
</ul>
</li>
</ul>
<br/>
<h2 id="jwtjson-web-token"><a href="#jwtjson-web-token" aria-hidden="true"><span class="icon icon-link"></span></a>JWT(Json Web Token)</h2>
<p>그렇다면 메인 디쉬인 JWT(Json Web Token)에 대해 이야기를 해보겠습니다.</p>
<p><strong>JWT(JSON Web Token)</strong> 은 웹표준(RFC 7519)으로 두 개체에서 JSON 객체를 사용하여 가볍고 자가수용적인 (self-contained) 방식으로 정보를 안정성 있게 전달합니다.</p>
<p>JSON은 다음과 같은 특징을 유지합니다.</p>
<ul>
<li>수많은 프로그래밍 언어에서 지원됩니다. (대부분의 주류 프로그래밍 언어에서 지원)</li>
<li>
<p>자가 수용적 (self-contained)</p>
<ul>
<li>JWT는 필요한 모든 정보를 가지고 있습니다.</li>
<li>토큰, 토큰에 대한 기본정보, 전달할 정보, signature 등을 가지고 있습니다.</li>
</ul>
</li>
<li>
<p>쉽게 전달 될 수 있습니다.</p>
<ul>
<li>JWT는 자가수용적으로 두 개체 사이에서 손쉽게 전달된다.</li>
<li>웹 서버의 경우 HTTP의 헤더에 넣어서 전달할 수 있고, ULR의 파라미터로도 전달 가능합니다.</li>
</ul>
</li>
</ul>
<h3 id="jwt의-정의"><a href="#jwt%EC%9D%98-%EC%A0%95%EC%9D%98" aria-hidden="true"><span class="icon icon-link"></span></a>JWT의 정의</h3>
<p>JWT는 <code class="language-text">.</code> 을 구분자로 3가지의 문자열로 되어있습니다. 구조는 다음과 같이 이루어졌습니다.</p>
<p><img src="https://user-images.githubusercontent.com/42582516/103124452-24860380-46cb-11eb-827e-b1d02001516f.png" alt="jwt"></p>
<p>JWT 토큰을 만들때는 JWT를 담당하는 라이브러리가 자동으로 인코딩 및 해싱 작업을 해줍니다.</p>
<h4 id="헤더"><a href="#%ED%97%A4%EB%8D%94" aria-hidden="true"><span class="icon icon-link"></span></a>헤더</h4>
<p><strong>Header</strong>는 <strong>typ</strong>과 <strong>alg</strong> 의 두가지 정보를 지니고 있습니다.</p>
<ul>
<li><strong>typ</strong> : 토큰의 타입을 지정 - JWT</li>
<li><strong>alg</strong> : 해싱 알고리즘을 지정 - HMAC SHA256이나 RSA가 주로 사용, signature에서 사용</li>
</ul>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"typ"</span><span class="token operator">:</span> <span class="token string">"JWT"</span><span class="token punctuation">,</span>
  <span class="token property">"alg"</span><span class="token operator">:</span> <span class="token string">"HS256"</span>
<span class="token punctuation">}</span></code></pre>
<p>인코딩에 대한 코드 예시입니다.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> header <span class="token operator">=</span> <span class="token punctuation">{</span>
  typ<span class="token operator">:</span> <span class="token string">'JWT'</span><span class="token punctuation">,</span>
  alg<span class="token operator">:</span> <span class="token string">'HS256'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// encode to base64</span>
<span class="token keyword">const</span> encodedPayload <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Buffer</span><span class="token punctuation">(</span><span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">stringify</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token string">'base64'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">replace</span><span class="token punctuation">(</span><span class="token string">'='</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span></code></pre>
<h4 id="정보payload"><a href="#%EC%A0%95%EB%B3%B4payload" aria-hidden="true"><span class="icon icon-link"></span></a>정보(payload)</h4>
<p><strong>payload</strong> 부분에는 토큰에 담을 정보가 있습니다. 여기에 담는 정보의 한 조각을 클레임(<strong>claim</strong>) 이라고 부르며, 이는 <code class="language-text">name/value</code>의 한쌍으로 이뤄져 있습니다.</p>
<p>클레임은 크게 3가지(등록-registered, 공개-public, 비공개-private)로 분류됩니다.</p>
<h5 id="1-등록된-registered클레임"><a href="#1-%EB%93%B1%EB%A1%9D%EB%90%9C-registered%ED%81%B4%EB%A0%88%EC%9E%84" aria-hidden="true"><span class="icon icon-link"></span></a>1. 등록된 (registered)클레임</h5>
<p>등록된 클레임들은 이름이 이미 정해진 클레임이며, 모두 선택적입니다.</p>
<ul>
<li><code class="language-text">iss</code> : 토큰 발급자 (issuer)</li>
<li><code class="language-text">sub</code> : 토큰 제목 (subject)</li>
<li><code class="language-text">aud</code> : 토큰 대상자 (audience)</li>
<li><code class="language-text">exp</code> : 토큰의 만료시간 (expiration), NumericDate</li>
<li><code class="language-text">nbf</code> : 토큰 활성 날짜</li>
<li><code class="language-text">iat</code> : 토큰이 발급된 시간, 나이를 확인할 수 있습니다.</li>
<li><code class="language-text">jti</code> : JWT의 고유 식별자, 중복처리를 방지하기 위해서 사용합니다.</li>
</ul>
<h5 id="2-공개-public-클레임"><a href="#2-%EA%B3%B5%EA%B0%9C-public-%ED%81%B4%EB%A0%88%EC%9E%84" aria-hidden="true"><span class="icon icon-link"></span></a>2. 공개 (public) 클레임</h5>
<p>공개 클레임들은 충돌이 방지된 이름을 가지고 있습니다. 일반적으로 충돌을 막기 위해 클레임을 URI 형식으로 짓습니다.</p>
<h5 id="3-비공개-private-클레임"><a href="#3-%EB%B9%84%EA%B3%B5%EA%B0%9C-private-%ED%81%B4%EB%A0%88%EC%9E%84" aria-hidden="true"><span class="icon icon-link"></span></a>3. 비공개 (private) 클레임</h5>
<p>등록된 클레임도 아니고 공개된 클레임이 아닙니다. 일반적으로 서버 협의에 사용되는 클레임입니다.</p>
<p>예제 payload는 다음과 같습니다.</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"iss"</span><span class="token operator">:</span> <span class="token string">"github.com"</span><span class="token punctuation">,</span>
  <span class="token property">"https://Azderica.github.io/is_admin"</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token property">"username"</span><span class="token operator">:</span> <span class="token string">"Azderica"</span>
<span class="token punctuation">}</span></code></pre>
<p>마찬가지로 위의 코드처럼 encode 할 수 있습니다.</p>
<h4 id="서명signature"><a href="#%EC%84%9C%EB%AA%85signature" aria-hidden="true"><span class="icon icon-link"></span></a>서명(signature)</h4>
<p>JSON Web Token의 마지막 부분은 서명(signature)입니다. 서명은 헤더의 인코딩 값과 정보의 인코딩 값을 합쳐서 주어진 비밀키로 해쉬를 하여 생성</p>
<p>서명 부분을 만드는 슈도코드(pseudocode)의 구조는 다음과 같습니다.</p>
<pre class="language-text"><code class="language-text">HMACSHA256(base64UrlEncode(header) + &quot;.&quot; + base64UrlEncode(payload), secret)</code></pre>
<p>이렇게 만든 해쉬를 <code class="language-text">base64</code> 형태로 나타냅니다.</p>
<h3 id="jwt는-언제-사용하지"><a href="#jwt%EB%8A%94-%EC%96%B8%EC%A0%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EC%A7%80" aria-hidden="true"><span class="icon icon-link"></span></a>JWT는 언제 사용하지?</h3>
<ul>
<li>
<p>회원 인증</p>
<ul>
<li>JWT를 사용하는 가장 흔한 시나리오입니다.</li>
<li>유저가 로그인 시, 서버는 유저의 정보에 기반한 토큰을 발급하여 유저에게 전달하고 이후 요청시 JWT를 포함하여 전달합니다.</li>
<li>서버측에서 유저의 세션을 유지할 필요가 없어서 리소스를 아낄 수 있습니다.</li>
</ul>
</li>
<li>
<p>정보 교류</p>
<ul>
<li>JWT는 두 개체 사이에서 안정성있게 정보를 교환하기에 좋은 방법</li>
<li>정보가 sign이 되어있기 때문에 정보가 조작되지 않았는지를 검증할 수 있음.</li>
</ul>
</li>
</ul>
<br/>
<h2 id="마무리"><a href="#%EB%A7%88%EB%AC%B4%EB%A6%AC" aria-hidden="true"><span class="icon icon-link"></span></a>마무리.</h2>
<p>토큰 기반의 인증 시스템과 JWT에 대해 알아보았습니다.</p>
<hr>
<p><strong>출처</strong></p>
<ul>
<li><a href="https://velopert.com/2350" target="_blank" rel="nofollow noopener noreferrer">https://velopert.com/2350</a></li>
<li><a href="https://velopert.com/2389" target="_blank" rel="nofollow noopener noreferrer">https://velopert.com/2389</a></li>
<li><a href="http://www.opennaru.com/opennaru-blog/jwt-json-web-token/" target="_blank" rel="nofollow noopener noreferrer">http://www.opennaru.com/opennaru-blog/jwt-json-web-token/</a></li>
</ul>
</div><div class="post__footer"><div class="post-tags"><a href="/tag/Server/" class="post-tags__link"><span>#</span> Server
		</a><a href="/tag/Jwt/" class="post-tags__link"><span>#</span> Jwt
		</a><a href="/tag/Token/" class="post-tags__link"><span>#</span> Token
		</a><a href="/tag/Api/" class="post-tags__link"><span>#</span> Api
		</a><a href="/tag/Service/" class="post-tags__link"><span>#</span> Service
		</a><a href="/tag/Authenticate/" class="post-tags__link"><span>#</span> Authenticate
		</a><a href="/tag/Json%20Web%20Token/" class="post-tags__link"><span>#</span> Json Web Token
		</a></div></div></div><div class="post-comments" style="display:none;"></div><div class="post-comments"></div><div class="author post-author"><img alt="Author image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 180 180' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-bfb91fc8d3516221a47de6ec13d7cf4f'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='5'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-bfb91fc8d3516221a47de6ec13d7cf4f)' width='180' height='180' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABAAEADASIAAhEBAxEB/8QAHAAAAQUBAQEAAAAAAAAAAAAABgEDBAcIBQIA/8QAMBAAAQMDAgQFAwQDAQAAAAAAAQIDBAAFERIhBhMxUQciQWFxFJGhFiMygRVCsdH/xAAYAQADAQEAAAAAAAAAAAAAAAABAgMABP/EACARAAICAgICAwAAAAAAAAAAAAECABEDEiExBCITQUL/2gAMAwEAAhEDEQA/ALKr4mmyo5pdVPJXFNIakR4ynUlaspbAznHX4qp/EzxOTw9LctVnQ07cEpBW%2b4QW2sjYY9VfOMe9LuLqNowFyzx0pDWTX%2bM%2bIZMovOcQT9ZUFYbdKQD8DbHxWg/Cy7XriC0xZl%2bTEYiyBy4i06ua%2bpOcqV/qAcHHqaBcDuMqMxoQtNeTUiayGVJKM6TsQeqVDqKjUVYMLEzKVNGeiupMCOZTnZtP8jTcSGp/C3Mpa/JqJfLythf0VrbQp0DzFX8UDuankyfle4%2bLFfs/AnL4x42t9puRgPsZitMuPPSCSSjSkkBCR1Vt%2bM1Stv8ADfibjGQ5f5S4Mf6xfNCJWvUpJ6FSUjbbHrmrNn8PNTo036xXOkymy2VgYCQrY4HxtRBw5DegyHhHhpiAq0lZeLnNGNlHI2PpjeoHbH33Oz0zGh0JRvF/hfxBbYvPiRbc4003%2b43BdcKlnfK9Lm5PsD0HSjjwB46uHEN/uFivKkGN9Ml2KylGAyWyElI7DGDjvRRf1SHJMlEh66ocLepK2NJYwTgJ0k5J37dM71WEaR%2bkfEW0Xvkqw4tUeWllJ8yVDBUB3Gx/qtvtw0Pw6cpNFXZCkMuDqcZz8Vy0kFIPcV3w7HutuS7GcS4hadSVJ6GhoL5bqmVbLRtg0%2bA0SJDyFNAx%2b/XUsIDMfd1Ww/8Aa4DCNIJJJKjlSj1Ue9DDvHvDqOfImXNlK9ZSkDKjgdgM1HV4l8MJjB4zHic45YYUV/bpj%2b6piUKLPcjmcsaHUN0Hzox1yK6z85wJy0yXloQf2kKAVn060B/rOxC1xLg7cEMsSgS0Fg6zg4PlGTsaM7KLbxxZ2btZ5KCtOWXkLRgpUOpwfQ7GtlTeiJTxMioSH6ntcpSLQtU1gIcGdshRx6Zx61XCoKLnci88hTSUkltWN09Onuf%2bVYlybs/DlsU2FtyX86iEKyhJ7k%2bp9qDVXBMyQ64CnmZBWkHdORtkfGKgMPNMZ0t5OtsghxwI%2bhhKoKAEtgakJAwB3p/iqERiUyPOnc49aGLDK5FxYWFY82D8GrGdQmRG3wQRRcatxJo26%2b0wVpK0kDb4pWm3HGwlIyoq0bd6QOBCCTXbtLIMaK6oDSnU8fk9KuBc4pDlQzGmuac%2bVsKH23/Io/8ADriViySXY90b5lskJAdSUatB9FY6/b27UKzG%2bdIQsbamSPuRXp0aClY9Nj8U2sIYjmWNfeIOHks86LeA7g4RFRGWgJHck7mq2uV0luXQ3GO%2b8zLkrAy2op0J7bewFNTUnWgBX8t6bbwJaUkbcsn8ikCAG5R8zMoX6EIovGd8YkM65ijo3xoTggeh23PvWrrFLTMtzLqCClxtK0/BGaxo6%2bhSlKO2lRT8d60t4MXX/IcFW4knWyDHUD1Gk4H4xSZR0Y%2bA8kT/2Q==' /%3e%3c/svg%3e" width="180" data-src="/assets/static/author.e6b6009.98a7113f4952b5eaa532b5d16696f13d.jpg" data-srcset="/assets/static/author.e6b6009.98a7113f4952b5eaa532b5d16696f13d.jpg 180w" data-sizes="(max-width: 180px) 100vw, 180px" class="author__image g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/author.e6b6009.98a7113f4952b5eaa532b5d16696f13d.jpg" class="author__image g-image g-image--loaded" width="180" alt="Author image"></noscript><!----><p class="author__intro">
		To be a Pro in Web developer
	</p><p class="author__links"><a href="//linkedin.com/in/myeonghun-park-7693a1184/">Linkedin</a><a href="//github.com/Azderica">GitHub</a></p></div></main><footer class="footer"><span class="footer__copyright">Copyright © 2021.
    </span><span class="footer__links">Powered by <a href="//gridsome.org"> Gridsome </a></span></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"[Server] 토큰 기반 인증과 JWT","path":"\u002F00-server-jwt\u002F","date":"25. December 2020","timeToRead":10,"tags":[{"id":"Server","title":"Server","path":"\u002Ftag\u002FServer\u002F"},{"id":"Jwt","title":"Jwt","path":"\u002Ftag\u002FJwt\u002F"},{"id":"Token","title":"Token","path":"\u002Ftag\u002FToken\u002F"},{"id":"Api","title":"Api","path":"\u002Ftag\u002FApi\u002F"},{"id":"Service","title":"Service","path":"\u002Ftag\u002FService\u002F"},{"id":"Authenticate","title":"Authenticate","path":"\u002Ftag\u002FAuthenticate\u002F"},{"id":"Json Web Token","title":"Json Web Token","path":"\u002Ftag\u002FJson%20Web%20Token\u002F"}],"description":" 토큰 기반 인증과 JWT에 대해 알아보겠습니다. ","content":"\u003Ch1 id=\"jwt\"\u003E\u003Ca href=\"#jwt\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EJWT\u003C\u002Fh1\u003E\n\u003Cp\u003E최근 업무에서 긴급 이슈가 있었는데, 그 자세한 내용을 설명할 수는 없으나 가장 큰 원인 중 하나는 토큰 이슈였습니다. 그에 따라 오늘 토큰 기반의 인증과 가장 유명한 JWT(Json Web Token)에 대해 정리해볼려고 합니다.\u003C\u002Fp\u003E\n\u003Cbr\u002F\u003E\n\u003Ch2 id=\"토큰token-기반-인증\"\u003E\u003Ca href=\"#%ED%86%A0%ED%81%B0token-%EA%B8%B0%EB%B0%98-%EC%9D%B8%EC%A6%9D\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E토큰(Token) 기반 인증\u003C\u002Fh2\u003E\n\u003Cp\u003E토큰 기반의 인증은 모던 웹서비스에서 많이 사용됩니다. 특히 API를 사용하는 웹서비스를 개발해야한다면 토큰을 사용하는 방법이 가장 좋습니다.\u003C\u002Fp\u003E\n\u003Ch3 id=\"기존-서버-기반-인증\"\u003E\u003Ca href=\"#%EA%B8%B0%EC%A1%B4-%EC%84%9C%EB%B2%84-%EA%B8%B0%EB%B0%98-%EC%9D%B8%EC%A6%9D\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E기존 서버 기반 인증\u003C\u002Fh3\u003E\n\u003Cp\u003E기존의 서버 기반의 인증은 다음과 같은 구조를 가지고 있었습니다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fuser-images.githubusercontent.com\u002F42582516\u002F103119059-06ada400-46b5-11eb-8e01-e1e841b40823.png\" alt=\"서버기반인증\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E하지만 이러한 서버 기반의 인증은 다음과 같은 문제를 가집니다. (그러나 아직 사용하는 곳도 많습니다.)\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003E세션\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E유저가 인증을 할 때, 서버는 이 기록을 서버에 저장합니다. (= 세션)\u003C\u002Fli\u003E\n\u003Cli\u003E로그인 중인 유저가 늘어날 수록 서버의 램이 과부화됩니다. (DB에 저장하면 DB 성능의 무리가 오게됩니다.)\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E확장성\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E세션을 사용하는 경우에는 더 많은 트래픽을 감당하기 위해 여러개의 프로세스를 돌리거나, 여러 서버 컴퓨터를 추가하는 것이 어려워집니다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ECORS(Cross-Origin Resource Sharing)\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E일반적으로 쿠키는 단일 도메인 및 서브 도메인엣만 작동하도록 설계되어 있는데 이러한 쿠키를 여러 도메인에서 관리하는 것은 번거롭습니다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch4 id=\"토큰-기반-시스템의-작동-원리\"\u003E\u003Ca href=\"#%ED%86%A0%ED%81%B0-%EA%B8%B0%EB%B0%98-%EC%8B%9C%EC%8A%A4%ED%85%9C%EC%9D%98-%EC%9E%91%EB%8F%99-%EC%9B%90%EB%A6%AC\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E토큰 기반 시스템의 작동 원리.\u003C\u002Fh4\u003E\n\u003Cp\u003E토큰 기반 시스템은 \u003Cstrong\u003Estateless\u003C\u002Fstrong\u003E(상태를 유지하지 않음) 합니다. 이 덕분에 위에서 발생한 문제들이 해결됩니다.\u003C\u002Fp\u003E\n\u003Cp\u003E토큰 기반 시스템은 다음과 같이 작동합니다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fuser-images.githubusercontent.com\u002F42582516\u002F103119347-4c1ea100-46b6-11eb-9a90-a7fab5edbc1b.png\" alt=\"토큰기반인증\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E이를 순서로 나타내면 다음과 같습니다.\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E유저가 \u003Cstrong\u003E로그인\u003C\u002Fstrong\u003E을 합니다.\u003C\u002Fli\u003E\n\u003Cli\u003E서버가 \u003Cstrong\u003E계정정보를 검증\u003C\u002Fstrong\u003E합니다.\u003C\u002Fli\u003E\n\u003Cli\u003E계정 정보가 정확한 경우, 서버측에서 \u003Cstrong\u003Esigned 토큰을 발급\u003C\u002Fstrong\u003E해줍니다.\u003C\u002Fli\u003E\n\u003Cli\u003E클라이언트 측에서는 전달받은 \u003Cstrong\u003E토큰을 저장\u003C\u002Fstrong\u003E하고, 서버 \u003Cstrong\u003E요청마다 토큰을 함께 서버에 전달\u003C\u002Fstrong\u003E합니다.\u003C\u002Fli\u003E\n\u003Cli\u003E서버는 \u003Cstrong\u003E토큰을 검증\u003C\u002Fstrong\u003E하고 \u003Cstrong\u003E요청에 응답\u003C\u002Fstrong\u003E합니다.\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Ch3 id=\"토큰-기반-서비스를-선택하는-이유\"\u003E\u003Ca href=\"#%ED%86%A0%ED%81%B0-%EA%B8%B0%EB%B0%98-%EC%84%9C%EB%B9%84%EC%8A%A4%EB%A5%BC-%EC%84%A0%ED%83%9D%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E토큰 기반 서비스를 선택하는 이유.\u003C\u002Fh3\u003E\n\u003Cp\u003E일반적으로 토큰 기반의 인증 시스템은 다음의 장점을 가집니다.\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003EStateless 서버\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EStateful 서버 : 클라이언트에게 요청받을때마다, 클라이언트의 상태를 계속 유지합니다. 세션에 로그인 정보 등을 저장하고 계속 활용합니다.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cstrong\u003EStateless 서버\u003C\u002Fstrong\u003E : 상태를 유지 하지 않는 서버. 상태정보를 저장하지 않고, 서버는 클라이언트측에서 들어오는 요청만으로 작업을 진행, 이 경우에는 클라이언트와 서버의 연결고리가 없으므로 \u003Cstrong\u003E서버의 확장성에서 장점\u003C\u002Fstrong\u003E을 가집니다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E모바일 어플리케이션에 적합\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E만약에 Android와 IOS에서 작동하는 어플리케이션을 개발할 때, 안전한 API를 만들기 위해서는 쿠키 등은 좋은 해결책이 될 수 없습니다. (쿠키 컨테이너를 사용해야하기 때문에...)\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E인증정보를 다른 어플리케이션으로 전달\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E대표적인 서비스로 OAuth 등이 있습니다. 구글이나 페이스북, 카카오톡, 네이버와 같은 소셜 계정을 통해 다른 웹서비스에서도 로그인 가능합니다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E보안\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E토큰 기반의 인증을 통해서 어플리케이션의 보안을 높일 수 있습니다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"토큰-기반-서비스의-장점\"\u003E\u003Ca href=\"#%ED%86%A0%ED%81%B0-%EA%B8%B0%EB%B0%98-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%9D%98-%EC%9E%A5%EC%A0%90\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E토큰 기반 서비스의 장점.\u003C\u002Fh3\u003E\n\u003Cp\u003E따라서 토큰 기반의 서비스는 다음과 같은 장점을 가집니다.\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003E무상태이며 확장성을 가짐\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E기존에 설명한 것처럼 많은 리소스 소모를 줄일 수 있습니다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E보안성\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E쿠키를 사용하지 않으므로 쿠키 취약점을 방지할 수 있습니다.\u003C\u002Fli\u003E\n\u003Cli\u003E다만 토큰도 취약점이 존재합니다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E확장성(Extensibility)\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E토큰을 통해 다른 서비스에 권한을 공유함으로서 사업이나 분야를 확장할 수 있습니다.\u003C\u002Fli\u003E\n\u003Cli\u003E토큰에 선택적인 권한만 부여하여 발급할 수도 있습니다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E여러 플랫폼 및 도메인\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E토큰만 유효하다면 여러 플랫폼과 도메인에서 사용할 수 있습니다.\u003C\u002Fli\u003E\n\u003Cli\u003E서버측 어플리케이션 응답부분에 다음 헤더만 포함하면 \u003Ccode class=\"language-text\"\u003EAccess-Control-Allow-Origin: *\u003C\u002Fcode\u003E 서버에서는 쉽게 정리할 수 있습니다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E웹 표준 기반\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EJWT는 웹 표준에 등록되어 있기 때문에 여러 환경에서 지원이 됩니다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cbr\u002F\u003E\n\u003Ch2 id=\"jwtjson-web-token\"\u003E\u003Ca href=\"#jwtjson-web-token\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EJWT(Json Web Token)\u003C\u002Fh2\u003E\n\u003Cp\u003E그렇다면 메인 디쉬인 JWT(Json Web Token)에 대해 이야기를 해보겠습니다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003EJWT(JSON Web Token)\u003C\u002Fstrong\u003E 은 웹표준(RFC 7519)으로 두 개체에서 JSON 객체를 사용하여 가볍고 자가수용적인 (self-contained) 방식으로 정보를 안정성 있게 전달합니다.\u003C\u002Fp\u003E\n\u003Cp\u003EJSON은 다음과 같은 특징을 유지합니다.\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E수많은 프로그래밍 언어에서 지원됩니다. (대부분의 주류 프로그래밍 언어에서 지원)\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E자가 수용적 (self-contained)\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EJWT는 필요한 모든 정보를 가지고 있습니다.\u003C\u002Fli\u003E\n\u003Cli\u003E토큰, 토큰에 대한 기본정보, 전달할 정보, signature 등을 가지고 있습니다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E쉽게 전달 될 수 있습니다.\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EJWT는 자가수용적으로 두 개체 사이에서 손쉽게 전달된다.\u003C\u002Fli\u003E\n\u003Cli\u003E웹 서버의 경우 HTTP의 헤더에 넣어서 전달할 수 있고, ULR의 파라미터로도 전달 가능합니다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"jwt의-정의\"\u003E\u003Ca href=\"#jwt%EC%9D%98-%EC%A0%95%EC%9D%98\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EJWT의 정의\u003C\u002Fh3\u003E\n\u003Cp\u003EJWT는 \u003Ccode class=\"language-text\"\u003E.\u003C\u002Fcode\u003E 을 구분자로 3가지의 문자열로 되어있습니다. 구조는 다음과 같이 이루어졌습니다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fuser-images.githubusercontent.com\u002F42582516\u002F103124452-24860380-46cb-11eb-827e-b1d02001516f.png\" alt=\"jwt\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EJWT 토큰을 만들때는 JWT를 담당하는 라이브러리가 자동으로 인코딩 및 해싱 작업을 해줍니다.\u003C\u002Fp\u003E\n\u003Ch4 id=\"헤더\"\u003E\u003Ca href=\"#%ED%97%A4%EB%8D%94\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E헤더\u003C\u002Fh4\u003E\n\u003Cp\u003E\u003Cstrong\u003EHeader\u003C\u002Fstrong\u003E는 \u003Cstrong\u003Etyp\u003C\u002Fstrong\u003E과 \u003Cstrong\u003Ealg\u003C\u002Fstrong\u003E 의 두가지 정보를 지니고 있습니다.\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Cstrong\u003Etyp\u003C\u002Fstrong\u003E : 토큰의 타입을 지정 - JWT\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cstrong\u003Ealg\u003C\u002Fstrong\u003E : 해싱 알고리즘을 지정 - HMAC SHA256이나 RSA가 주로 사용, signature에서 사용\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-json\"\u003E\u003Ccode class=\"language-json\"\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token property\"\u003E\"typ\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"JWT\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token property\"\u003E\"alg\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"HS256\"\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E인코딩에 대한 코드 예시입니다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E header \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  typ\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'JWT'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  alg\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'HS256'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F encode to base64\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E encodedPayload \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EBuffer\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token known-class-name class-name\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token method function property-access\"\u003Estringify\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Epayload\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token method function property-access\"\u003EtoString\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'base64'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token method function property-access\"\u003Ereplace\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'='\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E''\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch4 id=\"정보payload\"\u003E\u003Ca href=\"#%EC%A0%95%EB%B3%B4payload\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E정보(payload)\u003C\u002Fh4\u003E\n\u003Cp\u003E\u003Cstrong\u003Epayload\u003C\u002Fstrong\u003E 부분에는 토큰에 담을 정보가 있습니다. 여기에 담는 정보의 한 조각을 클레임(\u003Cstrong\u003Eclaim\u003C\u002Fstrong\u003E) 이라고 부르며, 이는 \u003Ccode class=\"language-text\"\u003Ename\u002Fvalue\u003C\u002Fcode\u003E의 한쌍으로 이뤄져 있습니다.\u003C\u002Fp\u003E\n\u003Cp\u003E클레임은 크게 3가지(등록-registered, 공개-public, 비공개-private)로 분류됩니다.\u003C\u002Fp\u003E\n\u003Ch5 id=\"1-등록된-registered클레임\"\u003E\u003Ca href=\"#1-%EB%93%B1%EB%A1%9D%EB%90%9C-registered%ED%81%B4%EB%A0%88%EC%9E%84\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E1. 등록된 (registered)클레임\u003C\u002Fh5\u003E\n\u003Cp\u003E등록된 클레임들은 이름이 이미 정해진 클레임이며, 모두 선택적입니다.\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003Eiss\u003C\u002Fcode\u003E : 토큰 발급자 (issuer)\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003Esub\u003C\u002Fcode\u003E : 토큰 제목 (subject)\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003Eaud\u003C\u002Fcode\u003E : 토큰 대상자 (audience)\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003Eexp\u003C\u002Fcode\u003E : 토큰의 만료시간 (expiration), NumericDate\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003Enbf\u003C\u002Fcode\u003E : 토큰 활성 날짜\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003Eiat\u003C\u002Fcode\u003E : 토큰이 발급된 시간, 나이를 확인할 수 있습니다.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003Ejti\u003C\u002Fcode\u003E : JWT의 고유 식별자, 중복처리를 방지하기 위해서 사용합니다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch5 id=\"2-공개-public-클레임\"\u003E\u003Ca href=\"#2-%EA%B3%B5%EA%B0%9C-public-%ED%81%B4%EB%A0%88%EC%9E%84\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E2. 공개 (public) 클레임\u003C\u002Fh5\u003E\n\u003Cp\u003E공개 클레임들은 충돌이 방지된 이름을 가지고 있습니다. 일반적으로 충돌을 막기 위해 클레임을 URI 형식으로 짓습니다.\u003C\u002Fp\u003E\n\u003Ch5 id=\"3-비공개-private-클레임\"\u003E\u003Ca href=\"#3-%EB%B9%84%EA%B3%B5%EA%B0%9C-private-%ED%81%B4%EB%A0%88%EC%9E%84\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E3. 비공개 (private) 클레임\u003C\u002Fh5\u003E\n\u003Cp\u003E등록된 클레임도 아니고 공개된 클레임이 아닙니다. 일반적으로 서버 협의에 사용되는 클레임입니다.\u003C\u002Fp\u003E\n\u003Cp\u003E예제 payload는 다음과 같습니다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-json\"\u003E\u003Ccode class=\"language-json\"\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token property\"\u003E\"iss\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"github.com\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token property\"\u003E\"https:\u002F\u002FAzderica.github.io\u002Fis_admin\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Etrue\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token property\"\u003E\"username\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Azderica\"\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E마찬가지로 위의 코드처럼 encode 할 수 있습니다.\u003C\u002Fp\u003E\n\u003Ch4 id=\"서명signature\"\u003E\u003Ca href=\"#%EC%84%9C%EB%AA%85signature\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E서명(signature)\u003C\u002Fh4\u003E\n\u003Cp\u003EJSON Web Token의 마지막 부분은 서명(signature)입니다. 서명은 헤더의 인코딩 값과 정보의 인코딩 값을 합쳐서 주어진 비밀키로 해쉬를 하여 생성\u003C\u002Fp\u003E\n\u003Cp\u003E서명 부분을 만드는 슈도코드(pseudocode)의 구조는 다음과 같습니다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003EHMACSHA256(base64UrlEncode(header) + &quot;.&quot; + base64UrlEncode(payload), secret)\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E이렇게 만든 해쉬를 \u003Ccode class=\"language-text\"\u003Ebase64\u003C\u002Fcode\u003E 형태로 나타냅니다.\u003C\u002Fp\u003E\n\u003Ch3 id=\"jwt는-언제-사용하지\"\u003E\u003Ca href=\"#jwt%EB%8A%94-%EC%96%B8%EC%A0%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EC%A7%80\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EJWT는 언제 사용하지?\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003E회원 인증\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EJWT를 사용하는 가장 흔한 시나리오입니다.\u003C\u002Fli\u003E\n\u003Cli\u003E유저가 로그인 시, 서버는 유저의 정보에 기반한 토큰을 발급하여 유저에게 전달하고 이후 요청시 JWT를 포함하여 전달합니다.\u003C\u002Fli\u003E\n\u003Cli\u003E서버측에서 유저의 세션을 유지할 필요가 없어서 리소스를 아낄 수 있습니다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E정보 교류\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EJWT는 두 개체 사이에서 안정성있게 정보를 교환하기에 좋은 방법\u003C\u002Fli\u003E\n\u003Cli\u003E정보가 sign이 되어있기 때문에 정보가 조작되지 않았는지를 검증할 수 있음.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cbr\u002F\u003E\n\u003Ch2 id=\"마무리\"\u003E\u003Ca href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E마무리.\u003C\u002Fh2\u003E\n\u003Cp\u003E토큰 기반의 인증 시스템과 JWT에 대해 알아보았습니다.\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Cp\u003E\u003Cstrong\u003E출처\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fvelopert.com\u002F2350\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Fvelopert.com\u002F2350\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fvelopert.com\u002F2389\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Fvelopert.com\u002F2389\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"http:\u002F\u002Fwww.opennaru.com\u002Fopennaru-blog\u002Fjwt-json-web-token\u002F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttp:\u002F\u002Fwww.opennaru.com\u002Fopennaru-blog\u002Fjwt-json-web-token\u002F\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n","cover_image":{"type":"image","mimeType":"image\u002Fpng","src":"\u002Fassets\u002Fstatic\u002FJwtText.214a68b.9080bdf34d1f234aeb05449acc88e2ef.png","size":{"width":820,"height":312},"sizes":"(max-width: 820px) 100vw, 820px","srcset":["\u002Fassets\u002Fstatic\u002FJwtText.a67b0b2.9080bdf34d1f234aeb05449acc88e2ef.png 480w","\u002Fassets\u002Fstatic\u002FJwtText.214a68b.9080bdf34d1f234aeb05449acc88e2ef.png 820w"],"dataUri":"data:image\u002Fsvg+xml,%3csvg fill='none' viewBox='0 0 820 312' xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg' xmlns:xlink='http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-589616928c4495027886eca870873b0a'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'\u002F%3e%3c\u002Ffilter%3e%3c\u002Fdefs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-589616928c4495027886eca870873b0a)' width='820' height='312' xlink:href='data:image\u002Fpng%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAYCAYAAABKtPtEAAAACXBIWXMAAAsSAAALEgHS3X78AAADfElEQVRYw%2b1WaUhUURQeCKI\u002Fmm2UqZnYuKamaS6TS1hmWk1auWGZLSONkpaWy6RIQQtBZWVpZVZaREJFUhSFgREUQUEUtPsjzeqH2zhaM5Nf9x6d5xsdstBf9X4c3r33fPfc73zvvHOfbBe68T%2bbTBJAEkASQBJAEkASQBLAou3s0wrPPEMHPcl%2bdg2ORUZY5sszdppjLeH\u002Fct3EQ%2bwTuLHzzMzQaeYfVQXwAAX4jmIA%2behlBLQohEFIdij5QuihQR\u002FhOIbPC2EcRr4AP5jpGUY34NPSmOP7z7Ekgo72ibnlo4edBxThJzMjdrOxwHWE5EeuAEaCJ5\u002FR9ApLTh2F%2bvN7IrD%2baaOQLCdgwvN5%2bosnWHvnBuF41fC9qY8fEE6Mz\u002FraRNicrlY6gxPO\u002Fd6GzW%2beQ\u002FXh5ZDYOnrm\u002FmjD1ua3QoVx\u002F7a2T4i7fgUJ9%2buR8vAelHU1iD5bDnXLO%2bLAeY5KAE5k0%2btnsFMEIfzAHvio0jHD34\u002FGvpkZ8MvKgOf6FORov6CEKe%2b\u002FPQu2C\u002FwRxvx8Xb5qBRwjIwjLbX62Gq5r4uCekgDvLRvgnrwWiw7vR9i%2bUnikJsEtcTV81Sry%2bag2Ym76OpZkM73Z5Ma7mO43D9vam0kUXmmq9y8w2VWOqXM9YO3oANeEeNiHKZDZ%2boGEHZ0ApHIvqezFiPiyZG2cnTDe2gpO0YthH6pgwgRjktyZDuQkXeKVmOjkyHwhmOLpRonOjoqkfbaBAbRuZT%2bTRPBcl0ykA\u002FN3wG5hMKb5eMF7cxpsgwJgPcsBk1zkLIY7VB9fopTFjr14BjKZDPE3r1LZ84pQlBbBISIUNnOcMW7CBIQUF8B7U9qwXjEKAXro7SrrapHYcAtRlcew9PRxxNZWIebCacTWnEXUqTJs7\u002F5GinOSkWWHsPTMCSwuP4wVl6vp81l%2b6RzDV5Kf41derUHM%2bUpWricpDl9bVl2BGOanPeVH%2bmNXlCG7vYUSTnv2CAF52VhdX0fffK6%2bHeEH92LVtcuIrjpJe5IabkPJYvNGOGZN0FRupibDTSMyPjc1M81AExrE9VnE83WNCGcZI4o98DmWDDS8\u002FtLW0VmmM7jxhsvnf5L8312DvPEYu6ixkZldOx0C1jTnb0DAGTqH4cVX1m8xoth0xeo7iIf4ehb2c6zoGh6TCpD%2bBCUBJAEkASQBJAEkAf5Z%2bwVSusnDq3vAkAAAAABJRU5ErkJggg==' \u002F%3e%3c\u002Fsvg%3e"}}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.0e095be4.js" defer></script><script src="/assets/js/page--src--templates--post-vue.9eba755d.js" defer></script>
  </body>
</html>