<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>[Database] Couchbase XDCR - Azderica</title><meta name="gridsome:hash" content="0db5b7b00e6830052e821ce8347a6dcc59b0c652"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="부족하지만 꿈많은 웹 개발자의 발전 기록입니다."><meta data-vue-tag="ssr" name="description" content="Couchbase XDCR에 대해 정리합니다."><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.d0be325ebfe2762f973f3e0685345394.png"><link rel="preload" href="/assets/css/0.styles.caed6242.css" as="style"><link rel="preload" href="/assets/js/app.4c903e18.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--post-vue.b162c3b2.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules--gridsome--app--pages--404-vue.b6200640.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.20763e56.js"><link rel="prefetch" href="/assets/js/page--src--templates--tag-vue.762abdba.js"><link rel="stylesheet" href="/assets/css/0.styles.caed6242.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="shortcut icon" type="image/png" href="favicon.png">
    <script data-ad-client="ca-pub-1759762070891290" async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="google-site-verification" content="MqpGCz7XVg4s3AWfrGHCt6AlXPacpV9iGvSFVD0ATHw" />
  </head>
  <body >
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      (function() {
        window.__onThemeChange = function() {};
        function setTheme(newTheme) {
          window.__theme = newTheme;
          preferredTheme = newTheme;
          document.body.setAttribute('data-theme', newTheme);
          window.__onThemeChange(newTheme);
        }

        var preferredTheme;
        try {
          preferredTheme = localStorage.getItem('theme');
        } catch (err) { }

        window.__setPreferredTheme = function(newTheme) {
          setTheme(newTheme);
          try {
            localStorage.setItem('theme', newTheme);
          } catch (err) {}
        }

        var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? 'dark' : 'light')
        });

        setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
      })();
    </script>

    <div id="app" data-server-rendered="true"><header class="header"><div class="header__left"><a href="/" class="logo active"><span class="logo__text">
    ← Azderica
  </span></a></div><div class="header__right"><button role="button" aria-label="Toggle dark/light" class="toggle-theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></button></div></header><main class="main"><div class="post-title"><h1 class="post-title__text">
      [Database] Couchbase XDCR
    </h1><div class="post-meta">
   Posted 2. April 2021.
   <strong>4 min read.</strong></div></div><div class="post content-box"><div class="post__header"><img alt="Cover image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 648 316' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-830cf1fa20beee5b0c8ba1ee1eaef397'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-830cf1fa20beee5b0c8ba1ee1eaef397)' width='648' height='316' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAfCAYAAABXscv8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAHwUlEQVRYw%2b1Ze0yVRxbHt/HFu4CXNwiXpioaN90YX9EYtGAVXSCKqwkmGq0mLrr1UW00/rFm4yNqREGl2voIRvGR1RgLZY0ooigsS7FQ1EVZF%2b81FBAub34759w7n9/9uPeCqa2YdpKTO3Nm5syc3/zOmflynfAbL06/A/BWSic6OzvNNfHb2dGBzvZ2s7S1W/dZ6l0sqPrM89pe2%2bjB/HcKgNZ5R2N6asvRGr2PAfJkLJtrK/8RLVnfoTnzEktnY%2bMbMaDpnzfxKuMcGq5nwVTw4Bdz/u0xwEJb3vyZDBi9A2HwCoDB0w8vhrqjNf/ea2p3d8ItLaga/QdUOHuhTBeMEk8dniZ/3vtDQFL/p0/m4cUILxgDwlkMHr5ovX1HAUB7ktIpBYCmZlRGfszOPwzWo9g3BIXit/npM3O/nRB79wBYHPgpOhYGt5Ew%2bofB6DdK1HVoyb2tnC4nN3sinOtoaMQjAUDpyED8OygcD/xDcV8/GqaKR70cAMmAT/8Eg6vPawBcR6KtuOSN7P04/o8oFgAUCQDuCQDywz%2bC6dHj9wgAFwsAvqGcC%2bqTN8B0%2bChMKWkwpR6D6ehxNH31DUxffY2G9BOoT0tHrdDXpKTCuGcfvtePQaFfCAoEAHkBobgdPhqN7w8AcQoABl2IGQQREgaRFwwu3hbxYfmfYMpT0fdEsKTczQelbt4oFr9FRPvAMOQHhSFXAHBT/z4AIHNAzPzXOYCcJxCorpFq/1GoEkmyMkCPR4HhKBPyvTjxf4mEx84LuSXaNwJHISdiNBp6fQ6wZPjahMXmWyD4Q5uOk7wQzv83IMzK%2bVLhbHGQHg8EAHdD9LgdEoGboz5EdmAosj%2bKRPPLl70XAPUV15KVA%2bMH/ngx/ANryruapVpQvEow5D/uvqhw1%2bGhhw4lQgrFfX9PSJ6Qm0JyhHzrpcM/nN3xw9/%2brjjfe98BqjxA937DlztQ/5fPUbf8M9T9OQm1cYmomRcPowiRanFVVkXNQWVUDB5Hz0PFpwtQFhuPHxISUbokCaUrPkNp8l/x8IsvUXU%2bE51v%2bJx%2bZ98CvwRFf/VvAatXmfjtoMeJino9%2bVhRvuJYOszUtQjIntC3iUcR/ar7SNpaW9EuxOqL8tf6GlQv1CZeZurSoTrZHoFgQ7R2HJ1sd%2b23DoCtDTY1NeHZs2eor6/v4piWFVrm2GpLUAsLC7Fq1SpUVFRwu92SQKl/8%2bbNOHXqlKK3xUhb63RoEqS9sQ4ZIJ1vFRTctGkTvL29MWjQIAwZMgRr165V%2bmShDco52sWkXu241B0/fhxOTk64evWqFQAEOOlnz57dZW67JhRkW85V21ePlSFsDwQnLWJUEhMTeSNRUVFIS0vj9oEDB6wcl6yw9XVnq07O1dXVcZ1OmOzfvXuX2w0NDfxrMpkwcOBALFmyxEqvtlNTU9PFPs0j0TK4tra2Czh2AZBI5uXl8eZiYmJsxgwB4evrCxcXF8yZMwcGg4E3OmnSJGzYsIHH7NmzB2PHjsXz58954RUrVsDLy4ud27VrF86fP89rLFq0CEFBQWzv2rVrPHfo0KHw9/dHREQEPDw8sHv3btafOHGC9c7OztDr9cjKymL99u3bmanEUrn%2blStXeAzZmjFjBoexrfxjBYCk9v79%2b3lz6enpysm1iIwtDVPfsmXLcObMGYWuhDTVo6OjedzKlSu5XV1djeTkZK5v2bIFqampyM3NRWZmJusmTJjADlB91qxZPHfYsGHw8fHBsWPHEBkZyX0lJSXcpjC8ePEi%2bvXrhylTpuDJkyfcv2bNGraZk5PDoJNu7ty5KCgoYNDnz5/fJTTsAkAnTAaOHDmiANDc3Mz1xYsXcx8tTGXBggXo06cP8vPz4enpqSxEG5Ubp9MlR9Tl5MmT3H/jxg1u09xp06bxCfXt2xdxcXGsv3z5Mo87ePCgkjuITcS%2bMWPGMPuGDx%2bOESNGYNu2bTzm0KFDPGfy5MlISkpie2Tf3m1jNwQo/rWFKEt9jx%2bbv8wWLlzIANy5cwfu7u5ISEhg/bp163hccXExdDodxo0bZ2VH5oDs7GxuE9WJqrS5AQMGID4%2bnvUXLlzgccScpUuXct/evXsRHByMsLAwHlNZWansa%2bbMmdi3bx/XaXxKSgoDcu7cOSWZOkyCslMapE0dPnwYsbGxWL16NS5dusT65cuX4/r161yfPn065wCKQYpnSpqurq7cV1VVxSdG9Z07dyIjIwO3bt3iX9KRDSo0d%2bLEiXwIpCfAiM4Ux9S%2bf/%2b%2bEiZFRUV86gSC0Whkh4lpdOIUPpRYaezUqVNRXl6Os2fP8pxuc4B6AMX8xo0bOblQvLm5uWH9%2bvXct2PHDm4PHjyYnZfhQPd3//79ERoayjmCwCgrK%2bPwIUrT5mQuoARGNog5VMh5OjEZVsQmil2yRSygsnXrVr6Sx48fz87R4ZDjBAQBSHuVoXL69Gn4%2bflxEiQhkLrNAbYeQnS1UFKRV4wsdJ2RXjuXdJJqNEb9ZqDTIpEPnlevXilh19jYaLXGS/HpS7bUd7y0L23KK5XWpiwv23L/tAbpaR1HL8keP4XtPTzkA0gNnLaunuPoiau1o17X1lNca0uuowWuRw8hRx9Ctl55jp6etp6h6jna/p9jv7vx3X3I/eb/HP0/5/d1pwiKk7UAAAAASUVORK5CYII=' /%3e%3c/svg%3e" width="648" data-src="/assets/static/CouchbaseLogo.61e6a9a.d8a43ca2ab3c3f89651f789d8aaebd62.png" data-srcset="/assets/static/CouchbaseLogo.61e6a9a.d8a43ca2ab3c3f89651f789d8aaebd62.png 648w" data-sizes="(max-width: 648px) 100vw, 648px" class="g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/CouchbaseLogo.61e6a9a.d8a43ca2ab3c3f89651f789d8aaebd62.png" class="g-image g-image--loaded" width="648" alt="Cover image"></noscript></div><div class="post__content"><h1 id="couchbase-xdcr"><a href="#couchbase-xdcr" aria-hidden="true"><span class="icon icon-link"></span></a>Couchbase XDCR</h1>
<p>최근 진행해야하는 작업 중 하나가, 기존 Couchbase 서버가 있는 데이터 센터에서 서버 부하 해결 및 안정성을 위해 다른 데이터 센터에 데이터를 복제를 해야할 필요성이 존재합니다.</p>
<p>회사에서 작업하는 주 목적은 데이터 서버에 있는 Couchbase 서버가 모두 죽었을 때, 정상적으로 작동하도록 구성하는 것이 목표입니다.</p>
<p>이를 위해서 Cross Data Center Replication (약어, XDCR)에 대해 정리합니다.</p>
<br/>
<h2 id="xdcr이란"><a href="#xdcr%EC%9D%B4%EB%9E%80" aria-hidden="true"><span class="icon icon-link"></span></a>XDCR이란.</h2>
<p>XDCR(Cross Data Center Replication)은 클러스터 간의 데이터를 복제하며, 데이터 센터 장애에 대한 보호 기능과 고성능 데이터 액세스 기능을 제공합니다.</p>
<p>XDCR은 source 클러스터의 특정 버킷에서 대상 클러스터의 특정 버킷으로 데이터를 복제합니다. XDCR agent를 통해 Database Change Protocol을 사용하여 버킷에서 다른 타켓 버킷으로 데이터를 넘길 수 있습니다.</p>
<br/>
<h2 id="xdcr과-클러스터-내부-복제와의-차이"><a href="#xdcr%EA%B3%BC-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EB%82%B4%EB%B6%80-%EB%B3%B5%EC%A0%9C%EC%99%80%EC%9D%98-%EC%B0%A8%EC%9D%B4" aria-hidden="true"><span class="icon icon-link"></span></a>XDCR과 클러스터 내부 복제와의 차이</h2>
<ul>
<li>클러스터 내부 복제의 경우, 클로스터 노드 전체에 데이터를 복제하나 XDCR의 경우 다른 데이터센터에 있는 여러 클러스터에 데이터를 복제합니다.</li>
<li>클러스터 내부 복제의 경우, 단일 버킷에 대해 수행되지만 XDCR은 복제를 위해 두 개의 버킷이 필요합니다. (하나는 복제 데이터 제공 소스 클러스터 버킷, 다른 하나는 수신 받을 대상의 클러스터)</li>
<li>클러스터 내 복제는 버킷 생성에서 구성되지만, XDCR은 소스 버킷과 대상 버킷을 모두 생성 후에 구성됩니다.</li>
</ul>
<blockquote>
<p>클러스터(cluster)</p>
</blockquote>
<p>여러 대의 컴퓨터들이 연결되어 하나의 시스템처럼 동작하는 컴퓨터들의 집합, 해당 위에서는 서버들의 집합</p>
<blockquote>
<p>버킷(bucket)</p>
</blockquote>
<p>일반적으로 데이터가 영역으로 분할되는 document 유형입니다.</p>
<br/>
<h2 id="xdcr-절차"><a href="#xdcr-%EC%A0%88%EC%B0%A8" aria-hidden="true"><span class="icon icon-link"></span></a>XDCR 절차</h2>
<p>사전 작업</p>
<ul>
<li>
<p>XDCR의 대상이 될 원격 클러스터에 대한 References를 정의합니다.</p>
<ul>
<li><a href="https://docs.couchbase.com/server/current/manage/manage-xdcr/create-xdcr-reference.html" target="_blank" rel="nofollow noopener noreferrer">Document</a></li>
</ul>
</li>
<li>
<p>소스 버킷에서 지장된 대상 버킷으로 변경내용을 전송하는 복제를 정의하고 시작합니다.</p>
<ul>
<li><a href="https://docs.couchbase.com/server/current/learn/clusters-and-availability/xdcr-overview.html#manage:manage-xdcr/create-xdcr-replication" target="_blank" rel="nofollow noopener noreferrer">Document</a></li>
</ul>
</li>
<li>복제를 모니터링합니다.</li>
</ul>
<p>다음의 옵션을 사용할 수 있습니다.</p>
<ul>
<li>Couchbase Web Console</li>
<li>CLI</li>
<li>REST API(Web Console, CLI)</li>
</ul>
<br/>
<h2 id="xdcr-direction-topology"><a href="#xdcr-direction-topology" aria-hidden="true"><span class="icon icon-link"></span></a>XDCR Direction, Topology</h2>
<p>크게 전략은 단방향(Unidirectionally)와 양방향(Bidirectionally)로 구성됩니다.</p>
<p>향후 진행할 작업은 양방향 XDCR을 구성할 방향이다.</p>
<h3 id="unidirectionally"><a href="#unidirectionally" aria-hidden="true"><span class="icon icon-link"></span></a>Unidirectionally</h3>
<p><img src="https://user-images.githubusercontent.com/42582516/113409137-a2089080-93eb-11eb-9fdc-15f325939633.png" alt="Unidirectionally"></p>
<p>지정된 소스 버킷에 포함된 데이터가 지정된 대상 버킷에 복제되며, 일반적으로 <strong>백업 용도로 사용</strong>됩니다.</p>
<h3 id="bidirectionally"><a href="#bidirectionally" aria-hidden="true"><span class="icon icon-link"></span></a>Bidirectionally</h3>
<p><img src="https://user-images.githubusercontent.com/42582516/113409142-a5038100-93eb-11eb-8e01-c23ce981dfd5.png" alt="Bidirectionally"></p>
<p>지정된 소스 버킷에 포함된 데이터는 대상 버킷에 복제되고, 반대의 방향의 경우에도 적용됩니다. 해당 두 버킷을 모두 데이터 서비스용으로 사용할 수 있으며, <strong>사용자에 좀 더 빠른 데이터 액세스를 제공</strong>할 수 있습니다.</p>
<p>이러한 양방향 XDCR은 두 데이터 센터 이상으로도 작업할 수 있습니다.</p>
<p><img src="https://user-images.githubusercontent.com/42582516/113409371-1d6a4200-93ec-11eb-8ff6-0a2205b62be6.png" alt="image"></p>
<br/>
<h2 id="마무리"><a href="#%EB%A7%88%EB%AC%B4%EB%A6%AC" aria-hidden="true"><span class="icon icon-link"></span></a>마무리.</h2>
<p>간략하게, XDCR에 대해 작성했습니다. 향후, 해당 작업 완료 후 추가적인 게시글을 작성할 예정입니다.</p>
<hr>
<p><strong>출처</strong></p>
<ul>
<li><a href="https://docs.couchbase.com/server/current/learn/clusters-and-availability/xdcr-overview.html" target="_blank" rel="nofollow noopener noreferrer">Couchbase XDCR Doc</a></li>
</ul>
</div><div class="post__footer"><div class="post-tags"><a href="/tag/Database/" class="post-tags__link"><span>#</span> Database
		</a><a href="/tag/NoSql/" class="post-tags__link"><span>#</span> NoSql
		</a><a href="/tag/Couchbase/" class="post-tags__link"><span>#</span> Couchbase
		</a><a href="/tag/Xdcr/" class="post-tags__link"><span>#</span> Xdcr
		</a></div></div></div><div class="post-comments"></div><div class="author post-author"><img alt="Author image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 180 180' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-bfb91fc8d3516221a47de6ec13d7cf4f'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='5'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-bfb91fc8d3516221a47de6ec13d7cf4f)' width='180' height='180' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABAAEADASIAAhEBAxEB/8QAHAAAAQUBAQEAAAAAAAAAAAAABgEDBAcIBQIA/8QAMBAAAQMDAgQFAwQDAQAAAAAAAQIDBAAFERIhBhMxUQciQWFxFJGhFiMygRVCsdH/xAAYAQADAQEAAAAAAAAAAAAAAAABAgMABP/EACARAAICAgICAwAAAAAAAAAAAAECABEDEiExBCITQUL/2gAMAwEAAhEDEQA/ALKr4mmyo5pdVPJXFNIakR4ynUlaspbAznHX4qp/EzxOTw9LctVnQ07cEpBW%2b4QW2sjYY9VfOMe9LuLqNowFyzx0pDWTX%2bM%2bIZMovOcQT9ZUFYbdKQD8DbHxWg/Cy7XriC0xZl%2bTEYiyBy4i06ua%2bpOcqV/qAcHHqaBcDuMqMxoQtNeTUiayGVJKM6TsQeqVDqKjUVYMLEzKVNGeiupMCOZTnZtP8jTcSGp/C3Mpa/JqJfLythf0VrbQp0DzFX8UDuankyfle4%2bLFfs/AnL4x42t9puRgPsZitMuPPSCSSjSkkBCR1Vt%2bM1Stv8ADfibjGQ5f5S4Mf6xfNCJWvUpJ6FSUjbbHrmrNn8PNTo036xXOkymy2VgYCQrY4HxtRBw5DegyHhHhpiAq0lZeLnNGNlHI2PpjeoHbH33Oz0zGh0JRvF/hfxBbYvPiRbc4003%2b43BdcKlnfK9Lm5PsD0HSjjwB46uHEN/uFivKkGN9Ml2KylGAyWyElI7DGDjvRRf1SHJMlEh66ocLepK2NJYwTgJ0k5J37dM71WEaR%2bkfEW0Xvkqw4tUeWllJ8yVDBUB3Gx/qtvtw0Pw6cpNFXZCkMuDqcZz8Vy0kFIPcV3w7HutuS7GcS4hadSVJ6GhoL5bqmVbLRtg0%2bA0SJDyFNAx%2b/XUsIDMfd1Ww/8Aa4DCNIJJJKjlSj1Ue9DDvHvDqOfImXNlK9ZSkDKjgdgM1HV4l8MJjB4zHic45YYUV/bpj%2b6piUKLPcjmcsaHUN0Hzox1yK6z85wJy0yXloQf2kKAVn060B/rOxC1xLg7cEMsSgS0Fg6zg4PlGTsaM7KLbxxZ2btZ5KCtOWXkLRgpUOpwfQ7GtlTeiJTxMioSH6ntcpSLQtU1gIcGdshRx6Zx61XCoKLnci88hTSUkltWN09Onuf%2bVYlybs/DlsU2FtyX86iEKyhJ7k%2bp9qDVXBMyQ64CnmZBWkHdORtkfGKgMPNMZ0t5OtsghxwI%2bhhKoKAEtgakJAwB3p/iqERiUyPOnc49aGLDK5FxYWFY82D8GrGdQmRG3wQRRcatxJo26%2b0wVpK0kDb4pWm3HGwlIyoq0bd6QOBCCTXbtLIMaK6oDSnU8fk9KuBc4pDlQzGmuac%2bVsKH23/Io/8ADriViySXY90b5lskJAdSUatB9FY6/b27UKzG%2bdIQsbamSPuRXp0aClY9Nj8U2sIYjmWNfeIOHks86LeA7g4RFRGWgJHck7mq2uV0luXQ3GO%2b8zLkrAy2op0J7bewFNTUnWgBX8t6bbwJaUkbcsn8ikCAG5R8zMoX6EIovGd8YkM65ijo3xoTggeh23PvWrrFLTMtzLqCClxtK0/BGaxo6%2bhSlKO2lRT8d60t4MXX/IcFW4knWyDHUD1Gk4H4xSZR0Y%2bA8kT/2Q==' /%3e%3c/svg%3e" width="180" data-src="/assets/static/author.e6b6009.98a7113f4952b5eaa532b5d16696f13d.jpg" data-srcset="/assets/static/author.e6b6009.98a7113f4952b5eaa532b5d16696f13d.jpg 180w" data-sizes="(max-width: 180px) 100vw, 180px" class="author__image g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/author.e6b6009.98a7113f4952b5eaa532b5d16696f13d.jpg" class="author__image g-image g-image--loaded" width="180" alt="Author image"></noscript><!----><p class="author__intro">
		To be a Pro in Web developer
	</p><p class="author__links"><a href="//linkedin.com/in/myeonghun-park-7693a1184/">Linkedin</a><a href="//github.com/Azderica">GitHub</a></p></div></main><footer class="footer"><span class="footer__copyright">Copyright © 2021.
    </span><span class="footer__links">Powered by <a href="//gridsome.org"> Gridsome </a></span></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"[Database] Couchbase XDCR","path":"\u002F00-db-couchbase-xdcr\u002F","date":"2. April 2021","timeToRead":4,"tags":[{"id":"Database","title":"Database","path":"\u002Ftag\u002FDatabase\u002F"},{"id":"NoSql","title":"NoSql","path":"\u002Ftag\u002FNoSql\u002F"},{"id":"Couchbase","title":"Couchbase","path":"\u002Ftag\u002FCouchbase\u002F"},{"id":"Xdcr","title":"Xdcr","path":"\u002Ftag\u002FXdcr\u002F"}],"description":"Couchbase XDCR에 대해 정리합니다.","content":"\u003Ch1 id=\"couchbase-xdcr\"\u003E\u003Ca href=\"#couchbase-xdcr\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ECouchbase XDCR\u003C\u002Fh1\u003E\n\u003Cp\u003E최근 진행해야하는 작업 중 하나가, 기존 Couchbase 서버가 있는 데이터 센터에서 서버 부하 해결 및 안정성을 위해 다른 데이터 센터에 데이터를 복제를 해야할 필요성이 존재합니다.\u003C\u002Fp\u003E\n\u003Cp\u003E회사에서 작업하는 주 목적은 데이터 서버에 있는 Couchbase 서버가 모두 죽었을 때, 정상적으로 작동하도록 구성하는 것이 목표입니다.\u003C\u002Fp\u003E\n\u003Cp\u003E이를 위해서 Cross Data Center Replication (약어, XDCR)에 대해 정리합니다.\u003C\u002Fp\u003E\n\u003Cbr\u002F\u003E\n\u003Ch2 id=\"xdcr이란\"\u003E\u003Ca href=\"#xdcr%EC%9D%B4%EB%9E%80\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EXDCR이란.\u003C\u002Fh2\u003E\n\u003Cp\u003EXDCR(Cross Data Center Replication)은 클러스터 간의 데이터를 복제하며, 데이터 센터 장애에 대한 보호 기능과 고성능 데이터 액세스 기능을 제공합니다.\u003C\u002Fp\u003E\n\u003Cp\u003EXDCR은 source 클러스터의 특정 버킷에서 대상 클러스터의 특정 버킷으로 데이터를 복제합니다. XDCR agent를 통해 Database Change Protocol을 사용하여 버킷에서 다른 타켓 버킷으로 데이터를 넘길 수 있습니다.\u003C\u002Fp\u003E\n\u003Cbr\u002F\u003E\n\u003Ch2 id=\"xdcr과-클러스터-내부-복제와의-차이\"\u003E\u003Ca href=\"#xdcr%EA%B3%BC-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EB%82%B4%EB%B6%80-%EB%B3%B5%EC%A0%9C%EC%99%80%EC%9D%98-%EC%B0%A8%EC%9D%B4\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EXDCR과 클러스터 내부 복제와의 차이\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003E클러스터 내부 복제의 경우, 클로스터 노드 전체에 데이터를 복제하나 XDCR의 경우 다른 데이터센터에 있는 여러 클러스터에 데이터를 복제합니다.\u003C\u002Fli\u003E\n\u003Cli\u003E클러스터 내부 복제의 경우, 단일 버킷에 대해 수행되지만 XDCR은 복제를 위해 두 개의 버킷이 필요합니다. (하나는 복제 데이터 제공 소스 클러스터 버킷, 다른 하나는 수신 받을 대상의 클러스터)\u003C\u002Fli\u003E\n\u003Cli\u003E클러스터 내 복제는 버킷 생성에서 구성되지만, XDCR은 소스 버킷과 대상 버킷을 모두 생성 후에 구성됩니다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003E클러스터(cluster)\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003E여러 대의 컴퓨터들이 연결되어 하나의 시스템처럼 동작하는 컴퓨터들의 집합, 해당 위에서는 서버들의 집합\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003E버킷(bucket)\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003E일반적으로 데이터가 영역으로 분할되는 document 유형입니다.\u003C\u002Fp\u003E\n\u003Cbr\u002F\u003E\n\u003Ch2 id=\"xdcr-절차\"\u003E\u003Ca href=\"#xdcr-%EC%A0%88%EC%B0%A8\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EXDCR 절차\u003C\u002Fh2\u003E\n\u003Cp\u003E사전 작업\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003EXDCR의 대상이 될 원격 클러스터에 대한 References를 정의합니다.\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fdocs.couchbase.com\u002Fserver\u002Fcurrent\u002Fmanage\u002Fmanage-xdcr\u002Fcreate-xdcr-reference.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EDocument\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E소스 버킷에서 지장된 대상 버킷으로 변경내용을 전송하는 복제를 정의하고 시작합니다.\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fdocs.couchbase.com\u002Fserver\u002Fcurrent\u002Flearn\u002Fclusters-and-availability\u002Fxdcr-overview.html#manage:manage-xdcr\u002Fcreate-xdcr-replication\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EDocument\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E복제를 모니터링합니다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E다음의 옵션을 사용할 수 있습니다.\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003ECouchbase Web Console\u003C\u002Fli\u003E\n\u003Cli\u003ECLI\u003C\u002Fli\u003E\n\u003Cli\u003EREST API(Web Console, CLI)\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cbr\u002F\u003E\n\u003Ch2 id=\"xdcr-direction-topology\"\u003E\u003Ca href=\"#xdcr-direction-topology\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EXDCR Direction, Topology\u003C\u002Fh2\u003E\n\u003Cp\u003E크게 전략은 단방향(Unidirectionally)와 양방향(Bidirectionally)로 구성됩니다.\u003C\u002Fp\u003E\n\u003Cp\u003E향후 진행할 작업은 양방향 XDCR을 구성할 방향이다.\u003C\u002Fp\u003E\n\u003Ch3 id=\"unidirectionally\"\u003E\u003Ca href=\"#unidirectionally\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EUnidirectionally\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fuser-images.githubusercontent.com\u002F42582516\u002F113409137-a2089080-93eb-11eb-9fdc-15f325939633.png\" alt=\"Unidirectionally\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E지정된 소스 버킷에 포함된 데이터가 지정된 대상 버킷에 복제되며, 일반적으로 \u003Cstrong\u003E백업 용도로 사용\u003C\u002Fstrong\u003E됩니다.\u003C\u002Fp\u003E\n\u003Ch3 id=\"bidirectionally\"\u003E\u003Ca href=\"#bidirectionally\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EBidirectionally\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fuser-images.githubusercontent.com\u002F42582516\u002F113409142-a5038100-93eb-11eb-8e01-c23ce981dfd5.png\" alt=\"Bidirectionally\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E지정된 소스 버킷에 포함된 데이터는 대상 버킷에 복제되고, 반대의 방향의 경우에도 적용됩니다. 해당 두 버킷을 모두 데이터 서비스용으로 사용할 수 있으며, \u003Cstrong\u003E사용자에 좀 더 빠른 데이터 액세스를 제공\u003C\u002Fstrong\u003E할 수 있습니다.\u003C\u002Fp\u003E\n\u003Cp\u003E이러한 양방향 XDCR은 두 데이터 센터 이상으로도 작업할 수 있습니다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fuser-images.githubusercontent.com\u002F42582516\u002F113409371-1d6a4200-93ec-11eb-8ff6-0a2205b62be6.png\" alt=\"image\"\u003E\u003C\u002Fp\u003E\n\u003Cbr\u002F\u003E\n\u003Ch2 id=\"마무리\"\u003E\u003Ca href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E마무리.\u003C\u002Fh2\u003E\n\u003Cp\u003E간략하게, XDCR에 대해 작성했습니다. 향후, 해당 작업 완료 후 추가적인 게시글을 작성할 예정입니다.\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Cp\u003E\u003Cstrong\u003E출처\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fdocs.couchbase.com\u002Fserver\u002Fcurrent\u002Flearn\u002Fclusters-and-availability\u002Fxdcr-overview.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ECouchbase XDCR Doc\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n","cover_image":{"type":"image","mimeType":"image\u002Fpng","src":"\u002Fassets\u002Fstatic\u002FCouchbaseLogo.61e6a9a.d8a43ca2ab3c3f89651f789d8aaebd62.png","size":{"width":648,"height":316},"sizes":"(max-width: 648px) 100vw, 648px","srcset":["\u002Fassets\u002Fstatic\u002FCouchbaseLogo.61e6a9a.d8a43ca2ab3c3f89651f789d8aaebd62.png 648w"],"dataUri":"data:image\u002Fsvg+xml,%3csvg fill='none' viewBox='0 0 648 316' xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg' xmlns:xlink='http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-830cf1fa20beee5b0c8ba1ee1eaef397'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'\u002F%3e%3c\u002Ffilter%3e%3c\u002Fdefs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-830cf1fa20beee5b0c8ba1ee1eaef397)' width='648' height='316' xlink:href='data:image\u002Fpng%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAfCAYAAABXscv8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAHwUlEQVRYw%2b1Ze0yVRxbHt\u002FHFu4CXNwiXpioaN90YX9EYtGAVXSCKqwkmGq0mLrr1UW00\u002FrFm4yNqREGl2voIRvGR1RgLZY0ooigsS7FQ1EVZF%2b81FBAub34759w7n9\u002F9uPeCqa2YdpKTO3Nm5syc3\u002FzOmflynfAbL06\u002FA\u002FBWSic6OzvNNfHb2dGBzvZ2s7S1W\u002FdZ6l0sqPrM89pe2%2bjB\u002FHcKgNZ5R2N6asvRGr2PAfJkLJtrK\u002F8RLVnfoTnzEktnY%2bMbMaDpnzfxKuMcGq5nwVTw4Bdz\u002Fu0xwEJb3vyZDBi9A2HwCoDB0w8vhrqjNf\u002Fea2p3d8ItLaga\u002FQdUOHuhTBeMEk8dniZ\u002F3vtDQFL\u002Fp0\u002Fm4cUILxgDwlkMHr5ovX1HAUB7ktIpBYCmZlRGfszOPwzWo9g3BIXit\u002FnpM3O\u002FnRB79wBYHPgpOhYGt5Ew%2bofB6DdK1HVoyb2tnC4nN3sinOtoaMQjAUDpyED8OygcD\u002FxDcV8\u002FGqaKR70cAMmAT\u002F8Eg6vPawBcR6KtuOSN7P04\u002Fo8oFgAUCQDuCQDywz%2bC6dHj9wgAFwsAvqGcC%2bqTN8B0%2bChMKWkwpR6D6ehxNH31DUxffY2G9BOoT0tHrdDXpKTCuGcfvtePQaFfCAoEAHkBobgdPhqN7w8AcQoABl2IGQQREgaRFwwu3hbxYfmfYMpT0fdEsKTczQelbt4oFr9FRPvAMOQHhSFXAHBT\u002Fz4AIHNAzPzXOYCcJxCorpFq\u002F1GoEkmyMkCPR4HhKBPyvTjxf4mEx84LuSXaNwJHISdiNBp6fQ6wZPjahMXmWyD4Q5uOk7wQzv83IMzK%2bVLhbHGQHg8EAHdD9LgdEoGboz5EdmAosj%2bKRPPLl70XAPUV15KVA%2bMH\u002Fngx\u002FANryruapVpQvEow5D\u002Fuvqhw1%2bGhhw4lQgrFfX9PSJ6Qm0JyhHzrpcM\u002FnN3xw9\u002F%2brjjfe98BqjxA937DlztQ\u002F5fPUbf8M9T9OQm1cYmomRcPowiRanFVVkXNQWVUDB5Hz0PFpwtQFhuPHxISUbokCaUrPkNp8l\u002Fx8IsvUXU%2bE51v%2bJx%2bZ98CvwRFf\u002FVvAatXmfjtoMeJino9%2bVhRvuJYOszUtQjIntC3iUcR\u002Far7SNpaW9EuxOqL8tf6GlQv1CZeZurSoTrZHoFgQ7R2HJ1sd%2b23DoCtDTY1NeHZs2eor6\u002Fv4piWFVrm2GpLUAsLC7Fq1SpUVFRwu92SQKl\u002F8%2bbNOHXqlKK3xUhb63RoEqS9sQ4ZIJ1vFRTctGkTvL29MWjQIAwZMgRr165V%2bmShDco52sWkXu241B0\u002FfhxOTk64evWqFQAEOOlnz57dZW67JhRkW85V21ePlSFsDwQnLWJUEhMTeSNRUVFIS0vj9oEDB6wcl6yw9XVnq07O1dXVcZ1OmOzfvXuX2w0NDfxrMpkwcOBALFmyxEqvtlNTU9PFPs0j0TK4tra2Czh2AZBI5uXl8eZiYmJsxgwB4evrCxcXF8yZMwcGg4E3OmnSJGzYsIHH7NmzB2PHjsXz58954RUrVsDLy4ud27VrF86fP89rLFq0CEFBQWzv2rVrPHfo0KHw9\u002FdHREQEPDw8sHv3btafOHGC9c7OztDr9cjKymL99u3bmanEUrn%2blStXeAzZmjFjBoexrfxjBYCk9v79%2b3lz6enpysm1iIwtDVPfsmXLcObMGYWuhDTVo6OjedzKlSu5XV1djeTkZK5v2bIFqampyM3NRWZmJusmTJjADlB91qxZPHfYsGHw8fHBsWPHEBkZyX0lJSXcpjC8ePEi%2bvXrhylTpuDJkyfcv2bNGraZk5PDoJNu7ty5KCgoYNDnz5\u002FfJTTsAkAnTAaOHDmiANDc3Mz1xYsXcx8tTGXBggXo06cP8vPz4enpqSxEG5Ubp9MlR9Tl5MmT3H\u002Fjxg1u09xp06bxCfXt2xdxcXGsv3z5Mo87ePCgkjuITcS%2bMWPGMPuGDx%2bOESNGYNu2bTzm0KFDPGfy5MlISkpie2Tf3m1jNwQo\u002FrWFKEt9jx%2bbv8wWLlzIANy5cwfu7u5ISEhg\u002Fbp163hccXExdDodxo0bZ2VH5oDs7GxuE9WJqrS5AQMGID4%2bnvUXLlzgccScpUuXct\u002FevXsRHByMsLAwHlNZWansa%2bbMmdi3bx\u002FXaXxKSgoDcu7cOSWZOkyCslMapE0dPnwYsbGxWL16NS5dusT65cuX4\u002Fr161yfPn065wCKQYpnSpqurq7cV1VVxSdG9Z07dyIjIwO3bt3iX9KRDSo0d%2bLEiXwIpCfAiM4Ux9S%2bf\u002F%2b%2bEiZFRUV86gSC0Whkh4lpdOIUPpRYaezUqVNRXl6Os2fP8pxuc4B6AMX8xo0bOblQvLm5uWH9%2bvXct2PHDm4PHjyYnZfhQPd3\u002F\u002F79ERoayjmCwCgrK%2bPwIUrT5mQuoARGNog5VMh5OjEZVsQmil2yRSygsnXrVr6Sx48fz87R4ZDjBAQBSHuVoXL69Gn4%2bflxEiQhkLrNAbYeQnS1UFKRV4wsdJ2RXjuXdJJqNEb9ZqDTIpEPnlevXilh19jYaLXGS\u002FHpS7bUd7y0L23KK5XWpiwv23L\u002FtAbpaR1HL8keP4XtPTzkA0gNnLaunuPoiau1o17X1lNca0uuowWuRw8hRx9Ctl55jp6etp6h6jna\u002Fp9jv7vx3X3I\u002Feb\u002FHP0\u002F5\u002Fd1pwiKk7UAAAAASUVORK5CYII=' \u002F%3e%3c\u002Fsvg%3e"}}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.4c903e18.js" defer></script><script src="/assets/js/page--src--templates--post-vue.b162c3b2.js" defer></script>
  </body>
</html>