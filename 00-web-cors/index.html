<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>[WEB] CORS - Azderica</title><meta name="gridsome:hash" content="0cbdbe3ad78e6929600cc32326d49aab3f1f64f3"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="부족하지만 꿈많은 웹 개발자의 발전 기록입니다."><meta data-vue-tag="ssr" name="description" content=" CORS에 대한 개념을 잡습니다. "><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.d0be325ebfe2762f973f3e0685345394.png"><link rel="preload" href="/assets/css/0.styles.e3740fba.css" as="style"><link rel="preload" href="/assets/js/app.5a286e2f.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--post-vue.f3f1159d.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules--gridsome--app--pages--404-vue.b6200640.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.2e7dccb5.js"><link rel="prefetch" href="/assets/js/page--src--templates--tag-vue.762abdba.js"><link rel="stylesheet" href="/assets/css/0.styles.e3740fba.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="shortcut icon" type="image/png" href="favicon.png">
    <script data-ad-client="ca-pub-1759762070891290" async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="google-site-verification" content="MqpGCz7XVg4s3AWfrGHCt6AlXPacpV9iGvSFVD0ATHw" />
  </head>
  <body >
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      (function() {
        window.__onThemeChange = function() {};
        function setTheme(newTheme) {
          window.__theme = newTheme;
          preferredTheme = newTheme;
          document.body.setAttribute('data-theme', newTheme);
          window.__onThemeChange(newTheme);
        }

        var preferredTheme;
        try {
          preferredTheme = localStorage.getItem('theme');
        } catch (err) { }

        window.__setPreferredTheme = function(newTheme) {
          setTheme(newTheme);
          try {
            localStorage.setItem('theme', newTheme);
          } catch (err) {}
        }

        var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? 'dark' : 'light')
        });

        setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
      })();
    </script>

    <div id="app" data-server-rendered="true"><header class="header"><div class="header__left"><a href="/" class="logo active"><span class="logo__text">
    ← Azderica
  </span></a></div><div class="header__right"><button role="button" aria-label="Toggle dark/light" class="toggle-theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></button></div></header><main class="main"><div class="post-title"><h1 class="post-title__text">
      [WEB] CORS
    </h1><div class="post-meta">
   Posted 26. December 2020.
   <strong>6 min read.</strong></div></div><div class="post content-box"><div class="post__header"><img alt="Cover image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 820 312' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-ecf683e9dde3382860fab74350a7047b'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-ecf683e9dde3382860fab74350a7047b)' width='820' height='312' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAYCAYAAABKtPtEAAAACXBIWXMAAAsSAAALEgHS3X78AAAEM0lEQVRYw%2b1Wa1CUZRT2ZzNNRVNayCZUyAgql2URSEkrbUXcBeQm6OKmhuSlYRCQq81YaVLmJQUEJW2cLM2y6zQ1TUw100w/mkbzilyEZQGjmqmZ/j69z1nf5dt1jca/fD/OvO85e855zvu87znfTum5XovJLFNMAkwCTAJMAkwCTAImOQHX%2breJcH%2b1twbdSoyrlu6%2bbSJ6r%2bOChXm6%2b3wx1I2%2bxr3Gnijf7TB0vaHida3BevB5A14Ajd7fmjCsxHujCUM3Gv17rp6RRgwON2D09%2b3wjDZKTO%2bAL46r1gk0NOqLpW3AW4%2b%2bwTr5bcDbIHuNRxvzMa8uSufS%2b96BuptrYK1cdW2DIw0BscTs99T7de6NGAEEaEauD9Xj8JE8tHWswNFjBTh%2boghv7nfg2DuFONiag/dOr8K775eg%2bY0snP7QJckvdVdLogtXtuLytWpcvFqFkbHtOHGyWPLQ5%2byna/DjT5vx6%2bWtOHVmNc5drJRb6/fU4fylSux41Y6PP3OLTvKYQ262p0b2F1TclZ5qhVXlv0192HZV76G2XHzwka8e%2bvO3Tz53o%2bv7cnmJtH/73Qapnxen4wMIIPgv5yvw5MJHsXZ9CuITwpGa9ggslvuQlj4DzyyORmVVBlxrrFi46DGse34e8gvnIjdvDrJzZmPLi/NR6k7GKzvt%2bPlcBWwpFhFXqRULMqLEz740RvIw387XluLPv3eg64dyhIXdhSX2mSgoisfK4gRs2vIEyspTsdwRC0d2nOA41Uoba1vtsvpv91l7DNxrbUi2RaCiMgPFJYlY7oyVGpdlzUJewVw4lF6k8tbULgrdApoAFk4CyjakIiExHCnzLHg8%2bgHYM2Mk0fwFUSjfmIbFS6KRr3QeePach2BNjlAgcVIsgc6cLUWSdToSk6b7i4%2bNm4bIyDDMip2GqVPvxsbN6fjrn5fxTVcZZih7ss0iMYWKBBJG8kj%2bw%2bH3SP5VriQ4c%2bKEvEx1MNbNJ%2b1%2bziZx9OGhI6PuR3x8uJA5M%2bZB%2bS3Ccq%2bcq7b%2bKXml/9kC%2b99youVwLlrbV6D9aD5a1PPiE9t7wCnrwZYcaYG9qjW%2b%2bGodWpXvkbcLpEUYx7bhzbKFDhzKFjJOnipBQ9PTKFyZILbdry8Tu1fNGJLevCcLHZ35aFOYncd97can3aHwdzVnSsyXX6%2bXlfk7VW7OEQox96maNf6u3ZnSesTcs88hOV7YlC4vl3aPmhV6OIccghwow2Pjg1APRfY1hyB7cfSPl0TnoBm%2b%2bbuO4/AjgH84qVvinsUyPwceY2lnL9JOXfvLOjaOS3%2buxNJ%2bJE5fmq%2b28RroTx/Wqs9h/PoYbz/gBQR/VkKJHh5G/VafmpA%2bxs%2bsMZf%2bDE4kwVgT1Wv0D77kW1pgIjEGhWLxTmL/b/ydSii8274A86%2bwSYBJgEmASYBJwOSUfwEnG3PTGe7tRQAAAABJRU5ErkJggg==' /%3e%3c/svg%3e" width="820" data-src="/assets/static/CorsText.214a68b.c32b84a9e67b4bb273d225e0fca50227.png" data-srcset="/assets/static/CorsText.a67b0b2.c32b84a9e67b4bb273d225e0fca50227.png 480w, /assets/static/CorsText.214a68b.c32b84a9e67b4bb273d225e0fca50227.png 820w" data-sizes="(max-width: 820px) 100vw, 820px" class="g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/CorsText.214a68b.c32b84a9e67b4bb273d225e0fca50227.png" class="g-image g-image--loaded" width="820" alt="Cover image"></noscript></div><div class="post__content"><h1 id="corscross-origin-resource-sharing"><a href="#corscross-origin-resource-sharing" aria-hidden="true"><span class="icon icon-link"></span></a>CORS(Cross-Origin Resource Sharing)</h1>
<p>웹 개발을 하게 되면, 반드시 보게되는 이슈입니다. 그러나 이에 대한 개념에 대해 정확하게 모른다는 생각이 들어 정리합니다.</p>
<br/>
<h2 id="cors의-정의"><a href="#cors%EC%9D%98-%EC%A0%95%EC%9D%98" aria-hidden="true"><span class="icon icon-link"></span></a>CORS의 정의</h2>
<p>CORS(Cross-Origin Resource Sharing)은 <strong>추가 HTTP 헤더를 사용</strong>하여, <strong>하나의 출처(origin)에서 실행 중인 웹 애플리케이션이 다른 출처의 선택한 자원에 권한을 부여하도록 브라우저에 알려주는 체제</strong>입니다.</p>
<p><strong>하나의 출처</strong>란? URL의 프로토콜, 호스트, 포트가 동일한 경우를 의미합니다.</p>
<p>일반적으로는 다른 출처(origin)에서 내 자원(resource)에 함부로 접근하지 못하게 하기 위해 사용됩니다.</p>
<p>일반적으로 <strong>요청 헤더 목록</strong>은 다음과 같습니다.</p>
<ul>
<li>
<p>Origin</p>
<ul>
<li>fetch가 시작되는 위치.</li>
<li>경로 정보는 포함이 되지않고 서버 이름만 포함됨.</li>
</ul>
</li>
<li>
<p>Access-Control-Request-Method</p>
<ul>
<li><code class="language-text">preflight request</code> 을 할 때, 실제 요청에서 어떤 메소드를 사용할지 서버에 알려줍니다.</li>
</ul>
</li>
<li>
<p>Access-Control-Request-Headers</p>
<ul>
<li><code class="language-text">preflight request</code> 을 할 때, 실제 요청에서 어떤 header를 사용할 것인지 서버에서 알리기 위해 사용됩니다.</li>
</ul>
</li>
</ul>
<p><strong>응답 헤더 목록</strong>은 다음과 같습니다.</p>
<ul>
<li>
<p>Access-Control-Allow-Origin</p>
<ul>
<li>브라우저가 해당 origin이 자원에 접근할 수 있도록 허용합니다.</li>
<li><code class="language-text">*</code> 은 credentials이 없는 요청에 한해서 모든 origin에서 접근이 가능하도록 허용합니다.</li>
</ul>
</li>
<li>
<p>Access-Control-Expose-Headers</p>
<ul>
<li>브라우저가 액세스할 수 있는 서버의 화이트리스트 헤더를 허용합니다.</li>
</ul>
</li>
<li>
<p>Access-Control-Max-Age</p>
<ul>
<li>얼마나 오랫동안 <code class="language-text">preflight request</code>가 캐싱될 수 있는지를 나타냅니다.</li>
</ul>
</li>
<li>
<p>Access-Control-Allow-Credential</p>
<ul>
<li><code class="language-text">Credentials</code>가 true일 때 요청에 대한 응답이 노출될 수 있는지를 나타냅니다.</li>
<li><code class="language-text">preflight request</code> 에 대한 응답의 일부로 사용되는 경우, 실제 자격 증명을 사용하여 실제 요청을 수행 할 수 있는지를 나타냅니다.</li>
<li>간단한 GET 요청의 경우에는 <code class="language-text">preflight</code> 되지 않으므로 자격 증명이 필요한 리소스를 요청하면 헤더가 리소스와 함께 반환되지 않으며 브라우저에서 응답을 무시하고 웹 콘텐츠로 반환하지 않습니다.</li>
</ul>
</li>
<li>
<p>Access-Control-Allow-Methods</p>
<ul>
<li><code class="language-text">preflight request</code> 에 대한 응답으로 허용되는 메서드들을 나타냅니다.</li>
<li>일반적으로 회사에서 보안 상의 이유로 http 메소드를 제한하는 경우, 이 헤더를 많이 사용합니다.</li>
</ul>
</li>
<li>
<p>Access-Control-Allow-Headers</p>
<ul>
<li><code class="language-text">preflight</code> 요청에 대한 응답으로 실제 요청 시 사용할 수 있는 HTTP 헤더를 나타냅니다.</li>
</ul>
</li>
</ul>
<p><strong>preflight request</strong>란? <strong>미리 전송(사전요청)</strong>을 의미합니다. 이는 본격적인 교차 HTTP 요청 전에 서버 측에서 그 요청의 메서드와 헤더에 대한 인식을 진행하는 지 확인합니다.</p>
<p>이는 위에 있는 HTTPHeader의 "Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers" 의 3가지 HTTP request headers를 사용하는 HTTPMethod("OPTIONS") 요청입니다.</p>
<br/>
<h2 id="cors가-없으면"><a href="#cors%EA%B0%80-%EC%97%86%EC%9C%BC%EB%A9%B4" aria-hidden="true"><span class="icon icon-link"></span></a>CORS가 없으면?</h2>
<p>만약 어떤 사이트에서 CORS 제한이 없으면 어떻게 될까요. 다른 출처의 어플리케이션이 서로 통신하는 것에 아무런 제한이 없게된다면 악의를 가진 사용자가 소스 코드를 볼 수도 있고, 세션정보를 가져갈 수도 있습니다.</p>
<p>또한 <a href="https://ko.wikipedia.org/wiki/%EC%82%AC%EC%9D%B4%ED%8A%B8_%EA%B0%84_%EC%9A%94%EC%B2%AD_%EC%9C%84%EC%A1%B0" target="_blank" rel="nofollow noopener noreferrer">CSRF(Cross-Site Request Forgery)</a>나 <a href="https://ko.wikipedia.org/wiki/%EC%82%AC%EC%9D%B4%ED%8A%B8_%EA%B0%84_%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8C%85" target="_blank" rel="nofollow noopener noreferrer">XSS(Cross-Site Scripting)</a>와 같은 방법을 사용해서 어플리케이션에서 코드가 실행된 것처럼 꾸며서 사용자의 정보를 탈취하기 너무 쉬워집니다.</p>
<p>이러한 경우에 개발자들이 투자해야하는 리소스들은 더 많아지기 때문에 이에 대한 제한은 꼭 필요합니다.</p>
<br/>
<h2 id="cors는-어떻게-동작하나요"><a href="#cors%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%8F%99%EC%9E%91%ED%95%98%EB%82%98%EC%9A%94" aria-hidden="true"><span class="icon icon-link"></span></a>CORS는 어떻게 동작하나요?</h2>
<p>이러한 CORS의 정의와 왜 필요한지에 대해서 알게 되었기 때문에 좀 더 자세하게 이야기를 해볼려고 합니다.</p>
<p>GET 요청은 다음과 같이 간단하게 작동합니다. 특히 GET은 서버의 자원을 바꾸지 않기 때문에 로직은 아래처럼 간단합니다.</p>
<p><img src="https://user-images.githubusercontent.com/42582516/103171139-141d8680-488d-11eb-87bc-38088c87fbbf.png" alt="CORS-GET"></p>
<p>그러나 POST와 같은 비멱등인 경우, 허용하지 않은 도메인이 서버 자원을 변경시킬 수 있기 때문에 이를 신경써줘야합니다. 따라서 POST와 같은 경우는 아래처럼 동작합니다.</p>
<p><img src="https://user-images.githubusercontent.com/42582516/103171048-67430980-488c-11eb-98a1-4e77c348d22d.png" alt="CORS-POST"></p>
<p>먼저 OPTIONS을 요청해서 해당 도메인간의 요청이 정상적인지 확인합니다.</p>
<p>이와 같이 CORS는 동작합니다.</p>
<br/>
<h2 id="마무리"><a href="#%EB%A7%88%EB%AC%B4%EB%A6%AC" aria-hidden="true"><span class="icon icon-link"></span></a>마무리.</h2>
<p>CORS에 대한 이슈에 대해 정리했습니다. 이에 대한 개념을 잡았으며, 다음 글에서는 spring boot에서 CORS 이슈를 해결하는 방법에 대해 이야기해보겠습니다.</p>
<hr>
<p><strong>출처</strong></p>
<ul>
<li><a href="https://developer.mozilla.org/ko/docs/Glossary/Preflight_request" target="_blank" rel="nofollow noopener noreferrer">https://developer.mozilla.org/ko/docs/Glossary/Preflight_request</a></li>
<li><a href="https://developer.mozilla.org/ko/docs/Web/HTTP/Headers/Origin" target="_blank" rel="nofollow noopener noreferrer">https://developer.mozilla.org/ko/docs/Web/HTTP/Headers/Origin</a></li>
<li><a href="https://hannut91.github.io/blogs/infra/cors" target="_blank" rel="nofollow noopener noreferrer">https://hannut91.github.io/blogs/infra/cors</a></li>
<li><a href="https://zzossig.io/posts/web/what_is_cors/" target="_blank" rel="nofollow noopener noreferrer">https://zzossig.io/posts/web/what_is_cors/</a></li>
</ul>
</div><div class="post__footer"><div class="post-tags"><a href="/tag/Web/" class="post-tags__link"><span>#</span> Web
		</a><a href="/tag/Cors/" class="post-tags__link"><span>#</span> Cors
		</a><a href="/tag/HTTP/" class="post-tags__link"><span>#</span> HTTP
		</a></div></div></div><div class="post-comments"></div><div class="author post-author"><img alt="Author image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 180 180' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-bfb91fc8d3516221a47de6ec13d7cf4f'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='5'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-bfb91fc8d3516221a47de6ec13d7cf4f)' width='180' height='180' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABAAEADASIAAhEBAxEB/8QAHAAAAQUBAQEAAAAAAAAAAAAABgEDBAcIBQIA/8QAMBAAAQMDAgQFAwQDAQAAAAAAAQIDBAAFERIhBhMxUQciQWFxFJGhFiMygRVCsdH/xAAYAQADAQEAAAAAAAAAAAAAAAABAgMABP/EACARAAICAgICAwAAAAAAAAAAAAECABEDEiExBCITQUL/2gAMAwEAAhEDEQA/ALKr4mmyo5pdVPJXFNIakR4ynUlaspbAznHX4qp/EzxOTw9LctVnQ07cEpBW%2b4QW2sjYY9VfOMe9LuLqNowFyzx0pDWTX%2bM%2bIZMovOcQT9ZUFYbdKQD8DbHxWg/Cy7XriC0xZl%2bTEYiyBy4i06ua%2bpOcqV/qAcHHqaBcDuMqMxoQtNeTUiayGVJKM6TsQeqVDqKjUVYMLEzKVNGeiupMCOZTnZtP8jTcSGp/C3Mpa/JqJfLythf0VrbQp0DzFX8UDuankyfle4%2bLFfs/AnL4x42t9puRgPsZitMuPPSCSSjSkkBCR1Vt%2bM1Stv8ADfibjGQ5f5S4Mf6xfNCJWvUpJ6FSUjbbHrmrNn8PNTo036xXOkymy2VgYCQrY4HxtRBw5DegyHhHhpiAq0lZeLnNGNlHI2PpjeoHbH33Oz0zGh0JRvF/hfxBbYvPiRbc4003%2b43BdcKlnfK9Lm5PsD0HSjjwB46uHEN/uFivKkGN9Ml2KylGAyWyElI7DGDjvRRf1SHJMlEh66ocLepK2NJYwTgJ0k5J37dM71WEaR%2bkfEW0Xvkqw4tUeWllJ8yVDBUB3Gx/qtvtw0Pw6cpNFXZCkMuDqcZz8Vy0kFIPcV3w7HutuS7GcS4hadSVJ6GhoL5bqmVbLRtg0%2bA0SJDyFNAx%2b/XUsIDMfd1Ww/8Aa4DCNIJJJKjlSj1Ue9DDvHvDqOfImXNlK9ZSkDKjgdgM1HV4l8MJjB4zHic45YYUV/bpj%2b6piUKLPcjmcsaHUN0Hzox1yK6z85wJy0yXloQf2kKAVn060B/rOxC1xLg7cEMsSgS0Fg6zg4PlGTsaM7KLbxxZ2btZ5KCtOWXkLRgpUOpwfQ7GtlTeiJTxMioSH6ntcpSLQtU1gIcGdshRx6Zx61XCoKLnci88hTSUkltWN09Onuf%2bVYlybs/DlsU2FtyX86iEKyhJ7k%2bp9qDVXBMyQ64CnmZBWkHdORtkfGKgMPNMZ0t5OtsghxwI%2bhhKoKAEtgakJAwB3p/iqERiUyPOnc49aGLDK5FxYWFY82D8GrGdQmRG3wQRRcatxJo26%2b0wVpK0kDb4pWm3HGwlIyoq0bd6QOBCCTXbtLIMaK6oDSnU8fk9KuBc4pDlQzGmuac%2bVsKH23/Io/8ADriViySXY90b5lskJAdSUatB9FY6/b27UKzG%2bdIQsbamSPuRXp0aClY9Nj8U2sIYjmWNfeIOHks86LeA7g4RFRGWgJHck7mq2uV0luXQ3GO%2b8zLkrAy2op0J7bewFNTUnWgBX8t6bbwJaUkbcsn8ikCAG5R8zMoX6EIovGd8YkM65ijo3xoTggeh23PvWrrFLTMtzLqCClxtK0/BGaxo6%2bhSlKO2lRT8d60t4MXX/IcFW4knWyDHUD1Gk4H4xSZR0Y%2bA8kT/2Q==' /%3e%3c/svg%3e" width="180" data-src="/assets/static/author.e6b6009.98a7113f4952b5eaa532b5d16696f13d.jpg" data-srcset="/assets/static/author.e6b6009.98a7113f4952b5eaa532b5d16696f13d.jpg 180w" data-sizes="(max-width: 180px) 100vw, 180px" class="author__image g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/author.e6b6009.98a7113f4952b5eaa532b5d16696f13d.jpg" class="author__image g-image g-image--loaded" width="180" alt="Author image"></noscript><!----><p class="author__intro">
		To be a Pro in Web developer
	</p><p class="author__links"><a href="//linkedin.com/in/myeonghun-park-7693a1184/">Linkedin</a><a href="//github.com/Azderica">GitHub</a></p></div></main><footer class="footer"><span class="footer__copyright">Copyright © 2021. </span><span class="footer__links">Powered by <a href="//gridsome.org"> Gridsome </a></span></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"[WEB] CORS","path":"\u002F00-web-cors\u002F","date":"26. December 2020","timeToRead":6,"tags":[{"id":"Web","title":"Web","path":"\u002Ftag\u002FWeb\u002F"},{"id":"Cors","title":"Cors","path":"\u002Ftag\u002FCors\u002F"},{"id":"HTTP","title":"HTTP","path":"\u002Ftag\u002FHTTP\u002F"}],"description":" CORS에 대한 개념을 잡습니다. ","content":"\u003Ch1 id=\"corscross-origin-resource-sharing\"\u003E\u003Ca href=\"#corscross-origin-resource-sharing\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ECORS(Cross-Origin Resource Sharing)\u003C\u002Fh1\u003E\n\u003Cp\u003E웹 개발을 하게 되면, 반드시 보게되는 이슈입니다. 그러나 이에 대한 개념에 대해 정확하게 모른다는 생각이 들어 정리합니다.\u003C\u002Fp\u003E\n\u003Cbr\u002F\u003E\n\u003Ch2 id=\"cors의-정의\"\u003E\u003Ca href=\"#cors%EC%9D%98-%EC%A0%95%EC%9D%98\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ECORS의 정의\u003C\u002Fh2\u003E\n\u003Cp\u003ECORS(Cross-Origin Resource Sharing)은 \u003Cstrong\u003E추가 HTTP 헤더를 사용\u003C\u002Fstrong\u003E하여, \u003Cstrong\u003E하나의 출처(origin)에서 실행 중인 웹 애플리케이션이 다른 출처의 선택한 자원에 권한을 부여하도록 브라우저에 알려주는 체제\u003C\u002Fstrong\u003E입니다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003E하나의 출처\u003C\u002Fstrong\u003E란? URL의 프로토콜, 호스트, 포트가 동일한 경우를 의미합니다.\u003C\u002Fp\u003E\n\u003Cp\u003E일반적으로는 다른 출처(origin)에서 내 자원(resource)에 함부로 접근하지 못하게 하기 위해 사용됩니다.\u003C\u002Fp\u003E\n\u003Cp\u003E일반적으로 \u003Cstrong\u003E요청 헤더 목록\u003C\u002Fstrong\u003E은 다음과 같습니다.\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003EOrigin\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003Efetch가 시작되는 위치.\u003C\u002Fli\u003E\n\u003Cli\u003E경로 정보는 포함이 되지않고 서버 이름만 포함됨.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EAccess-Control-Request-Method\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003Epreflight request\u003C\u002Fcode\u003E 을 할 때, 실제 요청에서 어떤 메소드를 사용할지 서버에 알려줍니다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EAccess-Control-Request-Headers\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003Epreflight request\u003C\u002Fcode\u003E 을 할 때, 실제 요청에서 어떤 header를 사용할 것인지 서버에서 알리기 위해 사용됩니다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E\u003Cstrong\u003E응답 헤더 목록\u003C\u002Fstrong\u003E은 다음과 같습니다.\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003EAccess-Control-Allow-Origin\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E브라우저가 해당 origin이 자원에 접근할 수 있도록 허용합니다.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003E*\u003C\u002Fcode\u003E 은 credentials이 없는 요청에 한해서 모든 origin에서 접근이 가능하도록 허용합니다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EAccess-Control-Expose-Headers\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E브라우저가 액세스할 수 있는 서버의 화이트리스트 헤더를 허용합니다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EAccess-Control-Max-Age\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E얼마나 오랫동안 \u003Ccode class=\"language-text\"\u003Epreflight request\u003C\u002Fcode\u003E가 캐싱될 수 있는지를 나타냅니다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EAccess-Control-Allow-Credential\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003ECredentials\u003C\u002Fcode\u003E가 true일 때 요청에 대한 응답이 노출될 수 있는지를 나타냅니다.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003Epreflight request\u003C\u002Fcode\u003E 에 대한 응답의 일부로 사용되는 경우, 실제 자격 증명을 사용하여 실제 요청을 수행 할 수 있는지를 나타냅니다.\u003C\u002Fli\u003E\n\u003Cli\u003E간단한 GET 요청의 경우에는 \u003Ccode class=\"language-text\"\u003Epreflight\u003C\u002Fcode\u003E 되지 않으므로 자격 증명이 필요한 리소스를 요청하면 헤더가 리소스와 함께 반환되지 않으며 브라우저에서 응답을 무시하고 웹 콘텐츠로 반환하지 않습니다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EAccess-Control-Allow-Methods\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003Epreflight request\u003C\u002Fcode\u003E 에 대한 응답으로 허용되는 메서드들을 나타냅니다.\u003C\u002Fli\u003E\n\u003Cli\u003E일반적으로 회사에서 보안 상의 이유로 http 메소드를 제한하는 경우, 이 헤더를 많이 사용합니다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EAccess-Control-Allow-Headers\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003Epreflight\u003C\u002Fcode\u003E 요청에 대한 응답으로 실제 요청 시 사용할 수 있는 HTTP 헤더를 나타냅니다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E\u003Cstrong\u003Epreflight request\u003C\u002Fstrong\u003E란? \u003Cstrong\u003E미리 전송(사전요청)\u003C\u002Fstrong\u003E을 의미합니다. 이는 본격적인 교차 HTTP 요청 전에 서버 측에서 그 요청의 메서드와 헤더에 대한 인식을 진행하는 지 확인합니다.\u003C\u002Fp\u003E\n\u003Cp\u003E이는 위에 있는 HTTPHeader의 \"Origin\", \"Access-Control-Request-Method\", \"Access-Control-Request-Headers\" 의 3가지 HTTP request headers를 사용하는 HTTPMethod(\"OPTIONS\") 요청입니다.\u003C\u002Fp\u003E\n\u003Cbr\u002F\u003E\n\u003Ch2 id=\"cors가-없으면\"\u003E\u003Ca href=\"#cors%EA%B0%80-%EC%97%86%EC%9C%BC%EB%A9%B4\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ECORS가 없으면?\u003C\u002Fh2\u003E\n\u003Cp\u003E만약 어떤 사이트에서 CORS 제한이 없으면 어떻게 될까요. 다른 출처의 어플리케이션이 서로 통신하는 것에 아무런 제한이 없게된다면 악의를 가진 사용자가 소스 코드를 볼 수도 있고, 세션정보를 가져갈 수도 있습니다.\u003C\u002Fp\u003E\n\u003Cp\u003E또한 \u003Ca href=\"https:\u002F\u002Fko.wikipedia.org\u002Fwiki\u002F%EC%82%AC%EC%9D%B4%ED%8A%B8_%EA%B0%84_%EC%9A%94%EC%B2%AD_%EC%9C%84%EC%A1%B0\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ECSRF(Cross-Site Request Forgery)\u003C\u002Fa\u003E나 \u003Ca href=\"https:\u002F\u002Fko.wikipedia.org\u002Fwiki\u002F%EC%82%AC%EC%9D%B4%ED%8A%B8_%EA%B0%84_%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8C%85\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EXSS(Cross-Site Scripting)\u003C\u002Fa\u003E와 같은 방법을 사용해서 어플리케이션에서 코드가 실행된 것처럼 꾸며서 사용자의 정보를 탈취하기 너무 쉬워집니다.\u003C\u002Fp\u003E\n\u003Cp\u003E이러한 경우에 개발자들이 투자해야하는 리소스들은 더 많아지기 때문에 이에 대한 제한은 꼭 필요합니다.\u003C\u002Fp\u003E\n\u003Cbr\u002F\u003E\n\u003Ch2 id=\"cors는-어떻게-동작하나요\"\u003E\u003Ca href=\"#cors%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%8F%99%EC%9E%91%ED%95%98%EB%82%98%EC%9A%94\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ECORS는 어떻게 동작하나요?\u003C\u002Fh2\u003E\n\u003Cp\u003E이러한 CORS의 정의와 왜 필요한지에 대해서 알게 되었기 때문에 좀 더 자세하게 이야기를 해볼려고 합니다.\u003C\u002Fp\u003E\n\u003Cp\u003EGET 요청은 다음과 같이 간단하게 작동합니다. 특히 GET은 서버의 자원을 바꾸지 않기 때문에 로직은 아래처럼 간단합니다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fuser-images.githubusercontent.com\u002F42582516\u002F103171139-141d8680-488d-11eb-87bc-38088c87fbbf.png\" alt=\"CORS-GET\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E그러나 POST와 같은 비멱등인 경우, 허용하지 않은 도메인이 서버 자원을 변경시킬 수 있기 때문에 이를 신경써줘야합니다. 따라서 POST와 같은 경우는 아래처럼 동작합니다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fuser-images.githubusercontent.com\u002F42582516\u002F103171048-67430980-488c-11eb-98a1-4e77c348d22d.png\" alt=\"CORS-POST\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E먼저 OPTIONS을 요청해서 해당 도메인간의 요청이 정상적인지 확인합니다.\u003C\u002Fp\u003E\n\u003Cp\u003E이와 같이 CORS는 동작합니다.\u003C\u002Fp\u003E\n\u003Cbr\u002F\u003E\n\u003Ch2 id=\"마무리\"\u003E\u003Ca href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E마무리.\u003C\u002Fh2\u003E\n\u003Cp\u003ECORS에 대한 이슈에 대해 정리했습니다. 이에 대한 개념을 잡았으며, 다음 글에서는 spring boot에서 CORS 이슈를 해결하는 방법에 대해 이야기해보겠습니다.\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Cp\u003E\u003Cstrong\u003E출처\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fko\u002Fdocs\u002FGlossary\u002FPreflight_request\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Fdeveloper.mozilla.org\u002Fko\u002Fdocs\u002FGlossary\u002FPreflight_request\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fko\u002Fdocs\u002FWeb\u002FHTTP\u002FHeaders\u002FOrigin\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Fdeveloper.mozilla.org\u002Fko\u002Fdocs\u002FWeb\u002FHTTP\u002FHeaders\u002FOrigin\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fhannut91.github.io\u002Fblogs\u002Finfra\u002Fcors\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Fhannut91.github.io\u002Fblogs\u002Finfra\u002Fcors\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fzzossig.io\u002Fposts\u002Fweb\u002Fwhat_is_cors\u002F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Fzzossig.io\u002Fposts\u002Fweb\u002Fwhat_is_cors\u002F\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n","cover_image":{"type":"image","mimeType":"image\u002Fpng","src":"\u002Fassets\u002Fstatic\u002FCorsText.214a68b.c32b84a9e67b4bb273d225e0fca50227.png","size":{"width":820,"height":312},"sizes":"(max-width: 820px) 100vw, 820px","srcset":["\u002Fassets\u002Fstatic\u002FCorsText.a67b0b2.c32b84a9e67b4bb273d225e0fca50227.png 480w","\u002Fassets\u002Fstatic\u002FCorsText.214a68b.c32b84a9e67b4bb273d225e0fca50227.png 820w"],"dataUri":"data:image\u002Fsvg+xml,%3csvg fill='none' viewBox='0 0 820 312' xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg' xmlns:xlink='http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-ecf683e9dde3382860fab74350a7047b'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'\u002F%3e%3c\u002Ffilter%3e%3c\u002Fdefs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-ecf683e9dde3382860fab74350a7047b)' width='820' height='312' xlink:href='data:image\u002Fpng%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAYCAYAAABKtPtEAAAACXBIWXMAAAsSAAALEgHS3X78AAAEM0lEQVRYw%2b1Wa1CUZRT2ZzNNRVNayCZUyAgql2URSEkrbUXcBeQm6OKmhuSlYRCQq81YaVLmJQUEJW2cLM2y6zQ1TUw100w\u002FmkbzilyEZQGjmqmZ\u002Fj69z1nf5dt1jca\u002FfD\u002FOvO85e855zvu87znfTum5XovJLFNMAkwCTAJMAkwCTAImOQHX%2breJcH%2b1twbdSoyrlu6%2bbSJ6r%2bOChXm6%2b3wx1I2%2bxr3Gnijf7TB0vaHida3BevB5A14Ajd7fmjCsxHujCUM3Gv17rp6RRgwON2D09%2b3wjDZKTO%2bAL46r1gk0NOqLpW3AW4%2b%2bwTr5bcDbIHuNRxvzMa8uSufS%2b96BuptrYK1cdW2DIw0BscTs99T7de6NGAEEaEauD9Xj8JE8tHWswNFjBTh%2boghv7nfg2DuFONiag\u002FdOr8K775eg%2bY0snP7QJckvdVdLogtXtuLytWpcvFqFkbHtOHGyWPLQ5%2byna\u002FDjT5vx6%2bWtOHVmNc5drJRb6\u002FfU4fylSux41Y6PP3OLTvKYQ262p0b2F1TclZ5qhVXlv0192HZV76G2XHzwka8e%2bvO3Tz53o%2bv7cnmJtH\u002F73Qapnxen4wMIIPgv5yvw5MJHsXZ9CuITwpGa9ggslvuQlj4DzyyORmVVBlxrrFi46DGse34e8gvnIjdvDrJzZmPLi\u002FNR6k7GKzvt%2bPlcBWwpFhFXqRULMqLEz740RvIw387XluLPv3eg64dyhIXdhSX2mSgoisfK4gRs2vIEyspTsdwRC0d2nOA41Uoba1vtsvpv91l7DNxrbUi2RaCiMgPFJYlY7oyVGpdlzUJewVw4lF6k8tbULgrdApoAFk4CyjakIiExHCnzLHg8%2bgHYM2Mk0fwFUSjfmIbFS6KRr3QeePach2BNjlAgcVIsgc6cLUWSdToSk6b7i4%2bNm4bIyDDMip2GqVPvxsbN6fjrn5fxTVcZZih7ss0iMYWKBBJG8kj%2bw%2bH3SP5VriQ4c%2bKEvEx1MNbNJ%2b1%2bziZx9OGhI6PuR3x8uJA5M%2bZB%2bS3Ccq%2bcq7b%2bKXml\u002F9kC%2b99youVwLlrbV6D9aD5a1PPiE9t7wCnrwZYcaYG9qjW%2b%2bGodWpXvkbcLpEUYx7bhzbKFDhzKFjJOnipBQ9PTKFyZILbdry8Tu1fNGJLevCcLHZ35aFOYncd97can3aHwdzVnSsyXX6%2bXlfk7VW7OEQox96maNf6u3ZnSesTcs88hOV7YlC4vl3aPmhV6OIccghwow2Pjg1APRfY1hyB7cfSPl0TnoBm%2b%2bbuO4\u002FAjgH84qVvinsUyPwceY2lnL9JOXfvLOjaOS3%2buxNJ%2bJE5fmq%2b28RroTx\u002FWqs9h\u002FPoYbz\u002FgBQR\u002FVkKJHh5G\u002FVafmpA%2bxs%2bsMZf%2bDE4kwVgT1Wv0D77kW1pgIjEGhWLxTmL\u002Fb\u002FydSii8274A86%2bwSYBJgEmASYBJwOSUfwEnG3PTGe7tRQAAAABJRU5ErkJggg==' \u002F%3e%3c\u002Fsvg%3e"}}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.5a286e2f.js" defer></script><script src="/assets/js/page--src--templates--post-vue.f3f1159d.js" defer></script>
  </body>
</html>