---
title: '[Java] JVM이란.'
slug: 00-java-Jvm
date: 2020-12-29
published: true
tags: ['Java', 'Jvm', 'Backend']
series: false,
cover_image: ./images/JavaLogo.jpg
canonical_url: false
description: 'JVM 대해 정리합니다.'
---

# JVM(Java Vitual Machine)

최근 백기선님의 자바 스터디를 알게되어서, 한번 자바에 대한 개념을 스터디를 통해서 잡고 가면 좋을 듯해서 글에 대해서 정리해보겠습니다.

<br/>

## Java의 특징.

기본적으로 자바 프로그램은 JVM위에서 동작합니다. 이러한 JVM위에 동작하기 위해서는 자바 바이트 코드가 필요합니다. 이러한 자바 바이트코드는 개발자에 의해서 작성된 자바 소스코드(`*.java`)가 자바 컴파일러(`javac`)로 인해 변환된 코드(`*.class`)를 의미합니다.

### Java 프로그램의 특징

- JVM은 Bytecode를 구동하고 있는 OS에 맞춰 Binary code로 해석됩니다. 그렇기 때문에 **OS에 독립적**입니다.
- Bytecode는 클래스 단위(`*.class`)로 생성되기 때문에 프로그램의 수정이 일어나도 전체 소스코드를 컴파일할 필요는 없습니다.
- JVM은 OS로부터 메모리를 할당받아 스스로 관리합니다. 대표적으로 Garbage Collection이 있습니다.

<br/>

## JVM이란?

![JVM](https://user-images.githubusercontent.com/42582516/103287755-ac02a800-4a26-11eb-9ed9-a44972821597.png)

JVM이란 Java Virtual Machine의 약자입니다. 이를 번역하면 자바 가상머신입니다. (프로그램을 실행하기 위해 물리적 머신과 유사한 머신을 소프트에어로 구현하였습니다.)

JVM의 역할은 자바 Application을 클래스 로더를 통해 읽어서 자바 Application을 클래서 로더를 통해 읽어서 자바 API와 함께 실행하는 것입니다. 그리고 JVM은 **Java와 OS사이에서 중개자 역할을 수행**하며 Java가 OS에 구애받지 않고 **재사용 가능**하게 해줍니다.

### JVM의 기능

- JAVA가 OS에 상관없이 동작할 수 있도록 중계자 역할을 합니다.
- GC(Garabage Collection)등의 기능을 제공합니다.

### JVM의 용도

- 자바 프로그램이 어느 기기, 또는 어느 운영체제 상에서도 실행될 수 있게 합니다.
- 프로그램 메모리를 관리하고 최적화합니다.

<br/>

## JVM의 구성과 구동과정.

기존의 자바는 C++ 처럼 빠르지 못하다는 비평을 받았으나, 다양한 알고리즘과 접근방식이 제안되어 개선되고 있습니다.

![JVM의 구동](https://user-images.githubusercontent.com/42582516/103288668-c0e03b00-4a28-11eb-8e0f-554cda0e3bc5.png)

JVM의 구동은 다음과 같이 진행됩니다. 이를 하나씩 설명해보면 다음과 같습니다.

### Class Loader(클래스 로더)

- **JVM내로 클래스(.class파일)을 로드하고 링크를 통해 배치하는 작업을 수행하는 모듈**입니다.
- Runtime 시 동적으로 클래스를 로드합니다.
- jar 파일 내에 저장된 클래스를 JVM 위에 탑재하고 사용하지 않는 클래스들은 메모리에서 삭제합니다.

### Execution Engine(실행 엔진)

- 클래스 로더에서 **분석된 클래스 파일의 데이터를 저장하고 실행 도중에 필요한 데이터를 저장하고 실행 도중에 필요한 데이터를 저장**합니다.
- 메모리를 효율적으로 관리하기 위해 크게 5개의 영역(스태틱, 힙, PC 레지스터, 네이티브 메서드 스택)으로 구분하며, 간단히 메모리 영역이라 부릅니다.

### Interpreter (인터프리터)

- 자바 바이트 코드를 명령어 단위로 읽어서 실행합니다.
- 한줄씩 실행하기 때문에 느립니다. (현재는 성능이 개선되어서 빨라졌습니다, 컴파일러는 코드를 기계어로 한번에 바꿉니다.)

### Garbage Collector

- 비지 컬렉션이란 프로세스를 통해 메모리를 관리하며, 이 **가비지 컬렉션은 자바 프로그램에서 사용되지 않는 메모리를 지속적으로 찾아내서 제거**합니다.
- 과거의 가비지 컬렉션에 비해 알고리즘과 접근방식의 변경, 최적화 등으로 인해 개선되었습니다.

<br/>

## 컴파일러와 인터프리터

자바에 대해서 좀 더 잘 알기 위해서는 인터프리터에 대해 개념을 아는 것이 중요합니다.

컴파일러, 인터프리터 둘 다 사람이 보는 고레벨 언어로 작성된 프로그래밍 언어(C++, Java 등등)를 기계어로 변환하는 것은 같으나 그 과정에 있어서 차이가 존재합니다. 컴파일러는 전체소스코드를 보고 명령어를 수집하고 재구성하는 반면 인터프리터는 소스코드의 각 행을 연속적으로 분석하며 실행하는 구조를 가지고 있습니다.

### 인터프리터의 특성

인터프리터의 특성을 좀 더 자세하게 정리하면 다음과 같습니다.

- 고레벨 언어를 중간 코드로 변환하고 이를 각 행마다 실행합니다.
- 일반적으로 컴파일러가 각 행마다 실행하는 특성을 가진 인터프리터보다는 실행시간이 빠릅니다다.
- 컴파일러는 전체 소스코드를 변환 한 뒤 에러를 보고하지만 인터프리터는 각 행마다 실행하는 도중 에러가 보고되면 이후의 코드는 확인하지 않습니다.
- 인터프리터 언어로는 다음과 같이 있습니다. `ex) 파이썬`
  - 컴파일 언어 `ex) c c++`

### 자바의 컴파일러와 인터프리터

자바는 특별하게 컴파일과 인터프리터를 병행합니다.

- **자바 컴파일러**는 .java 파일을 javac(java compiler)가 바이트코드로 쓰여진 .class 파일로 변환한다. 바이트코드는 JVM을 위한 언어입니다.
- **자바 인터프리터**는 자바 컴파일러에 의해 변환된 클래스파일내의 바이트코드를 특정 환경의 기계에서 실행될 수 있도록 변환합니다.

#### 왜자바는 컴파일과 인터프리트를 병행하는가?

- 컴파일러의 경우 프로그램이 작성된 기계상에서 실행할 때 매우 효율적입니다.
- 하지만 인터프리터의 경우는 플랫폼에 종속 되지 않습니다.
- 자바 바이트코드는 컴퓨터와 프로그램 사이에 별도의 버퍼 역할을 수행합니다.(보안적 장점 + 성능적 장점)

<br/>

## 마무리.

오늘은 자바의 기초, 그 처음 단계인 JVM에 대해서 정리했습니다. 잘못된 부분 있으면 알려주시면 감사합니다.

---

**출처**

- https://asfirstalways.tistory.com/158
- https://minwan1.github.io/2018/06/06/2018-06-06-Java,JVM/
- https://sesok808.tistory.com/32
- https://preamtree.tistory.com/2
- http://www.itworld.co.kr/news/110837
