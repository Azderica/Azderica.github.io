<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>[Java] Effective Java, Exceptions - Azderica</title><meta name="gridsome:hash" content="441d039ecb7f9b8f8ede21c119627ec9bc8d91ab"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="부족하지만 꿈많은 웹 개발자의 발전 기록입니다."><meta data-vue-tag="ssr" name="description" content="Effective Java 책 중, ch10. 예외에 대해 정리합니다."><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.d0be325ebfe2762f973f3e0685345394.png"><link rel="preload" href="/assets/css/0.styles.7a8bb02e.css" as="style"><link rel="preload" href="/assets/js/app.c9b26b28.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--post-vue.09be428f.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules--gridsome--app--pages--404-vue.b6200640.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.9b72a2b6.js"><link rel="prefetch" href="/assets/js/page--src--templates--tag-vue.362f0490.js"><link rel="stylesheet" href="/assets/css/0.styles.7a8bb02e.css"><script data-vue-tag="ssr" type="text/javascript" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
    <link rel="icon" type="image/png" href="favicon.png" />
    <link rel="shortcut icon" type="image/png" href="favicon.png" />
    <meta
      name="google-site-verification"
      content="MqpGCz7XVg4s3AWfrGHCt6AlXPacpV9iGvSFVD0ATHw"
    />
  </head>
  <body >
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      ;(function() {
        window.__onThemeChange = function() {}
        function setTheme(newTheme) {
          window.__theme = newTheme
          preferredTheme = newTheme
          document.body.setAttribute('data-theme', newTheme)
          window.__onThemeChange(newTheme)
        }

        var preferredTheme
        try {
          preferredTheme = localStorage.getItem('theme')
        } catch (err) {}

        window.__setPreferredTheme = function(newTheme) {
          setTheme(newTheme)
          try {
            localStorage.setItem('theme', newTheme)
          } catch (err) {}
        }

        var darkQuery = window.matchMedia('(prefers-color-scheme: dark)')
        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? 'dark' : 'light')
        })

        setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'))
      })()
    </script>

    <div id="app" data-server-rendered="true"><header class="header"><div class="header__left"><a href="/" class="logo active"><span class="logo__text">
    ← Azderica
  </span></a></div><div class="header__right"><button role="button" aria-label="Toggle dark/light" class="toggle-theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></button></div></header><main class="main"><div class="post-title"><h1 class="post-title__text">
      [Java] Effective Java, Exceptions
    </h1><div class="post-meta">
   Posted 24. May 2021.
   <strong>17 min read.</strong></div></div><div class="post content-box"><div class="post__header"><img alt="Cover image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 800 1073' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-a77cbd8273266b44cedd9d66cbf64af5'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-a77cbd8273266b44cedd9d66cbf64af5)' width='800' height='1073' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABWAEADASIAAhEBAxEB/8QAHAAAAgIDAQEAAAAAAAAAAAAAAAYFBwIDBAEI/8QAORAAAgEDAwEFBQYDCQAAAAAAAQIDAAQRBRIhMQYHEyJRFBUyQWEjJHGxstEWkaEXJTM2VWRyc4H/xAAYAQADAQEAAAAAAAAAAAAAAAAAAgMFBP/EACkRAAIBAgUCBQUAAAAAAAAAAAABAgMRBCExUXESMiIzQcHwEyNhkaH/2gAMAwEAAhEDEQA/APqmiitc88VvEZbiRIoxjLOwUD5dTQBsorh98aZ/qFn1x/jr%2b9Y%2b/NK4/vOx56feE/egCQoqO9%2b6T8tUseRkfeE/eq41LvM1RtQvRoem2V7YQzNFHOZH8%2b3gngYxkcUk6kYK8itKjOq7QRbFFQHYbW5%2b0PZ2HULqBIJXeRSiEkeViuRn8Kn6ZO6uick4tphSh3toknd7rCy/AUTJ9POvNN9Knept/gHVzJ8AjBb8AwJolowjqj5507UMxWUXsOkypIrEs8DOVwxHmcNhTjHxYOa6VtPbHhim03TYoTIviyWy7W25GQDuPyzXZrd3BHFbRzB/Z799qRZBzxkBtoAJ56mvJrYRRKVntVQchfakTBBx0z1zxWfm/FH5/TUSULwna/z8MjH0/wC8WzWmnaYfDkM584yUVhtXcTyemQAQcHpUl2diCaWYrkW6usnwFmTB3dFxXt1FC91pFq17ayMkgVIlCkwbmTdnHTnb19DU2XWCa5ijlJ8W7cK0bLjG7qfUfL%2bdLWfgV9ymCX3Xbb3RbfdsmzsdYKPRv1Gmel3u/GOydiPofzNMVaFPsXBlVvMlywpS72AG7udfB6ezNTbSp3q4/s813PQWzGmloItSglt7GSC1kkS6sZIljkYuyt4uNqg9fKuQB681svFSCWRoLSRpl8xdwjqp%2bLjgjr04rMXDi61GVJjEILJvERMMoxgDkg%2bvy5qM0A6q92LIXapFuVZocY3yeH5WLHkYUAVxKTtn6HdlezRvsj4mrWcjxxp48qbsKFG0t9Plx06GpTsI80fZyEuzxbJX3EMoUedsZzkn/wArDwL2K6tpJfBVY54WwFA3faDGPUZGaz7Ib20OF4Io7j7V/OeCAGPHXIqNaScMtztwkLVXfb3L47v/APKdh/xP6jTDS73fHPZKwx0w36jTFWjT7FwY9bzJcsKVe9Q7e7zXT/tmpqpb7xsfwZqW4ArtXIPpvFNLQSOqKc11Uv7OVNOuoIHWzVXL8dckgj5kjHBpF0%2b99glnW/nto5ZjBOvhEtsj8LBI6g44JyeCab5HR97NcxsGJ3FgVJGOnJz86i5lsdkQjlgDcjmIjpwPwH51wxslY05Qcnexq0u6gvYbF5NSBlM8SJG458IMOg6AYG71zxUr2VaD3ZLiNfBM0gQMN2fMeRk4B%2bpNRFnb2/vS2LyQGYsAEiUtk54PHGfyqS0AXcWkKsEkcbB3Vy5CkLnpk/kKnXs45HRgouNV3fp7ovXu2Oexun/g/wCo0zUp91kgk7D6cQeR4gP0Ic5FNlaFPsXBj1vMlywqF7Y6euqdnrqykMgSUoD4YBbhgeM/hU1mimeZNZFPv2IWUCR7vVt6nhfDTgH64ofu6tQSTqupgAHLeCgz/Srgrx0WRCjqGUjBBGQan9GOxdYmotJP9lMwd3thBLG663qKmNsj7OPrnrUGlnDos15Y3e8yQyuhIYYdeMMQR8xzV8%2b7bHJPsVtkjB%2byXn%2blaLjQtJuZmmuNMsZZX%2bJ3gVieMckipVMP1xssi1DGOnPqld5W1IDunwOxsGMY8ebp/wBjU4VosbK2sIBBZW8VvCCW2RKFXJOScCt9dEV0xSOScuqTlucVxZyS3IlEygD4cx5ZPXac4/mDXbRRTChRRRQAUUUUAFFFFAH/2Q==' /%3e%3c/svg%3e" width="800" data-src="/assets/static/EffectiveJava.633a126.62da2dbeb71f67a6b063e53d90d77388.jpeg" data-srcset="/assets/static/EffectiveJava.a67b0b2.62da2dbeb71f67a6b063e53d90d77388.jpeg 480w, /assets/static/EffectiveJava.633a126.62da2dbeb71f67a6b063e53d90d77388.jpeg 800w" data-sizes="(max-width: 800px) 100vw, 800px" class="g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/EffectiveJava.633a126.62da2dbeb71f67a6b063e53d90d77388.jpeg" class="g-image g-image--loaded" width="800" alt="Cover image"></noscript></div><div class="post__content"><h1 id="exceptions"><a href="#exceptions" aria-hidden="true"><span class="icon icon-link"></span></a>Exceptions</h1>
<h2 id="item-69-예외는-진짜-예외-상황에서만-사용합니다"><a href="#item-69-%EC%98%88%EC%99%B8%EB%8A%94-%EC%A7%84%EC%A7%9C-%EC%98%88%EC%99%B8-%EC%83%81%ED%99%A9%EC%97%90%EC%84%9C%EB%A7%8C-%EC%82%AC%EC%9A%A9%ED%95%A9%EB%8B%88%EB%8B%A4" aria-hidden="true"><span class="icon icon-link"></span></a>Item 69. 예외는 진짜 예외 상황에서만 사용합니다.</h2>
<p>예외는 꼭 필요한 경우에만 사용해야합니다.아래는 잘못 사용한 케이스입니다.</p>
<pre class="language-java"><code class="language-java"><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    range<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">climb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span></code></pre>
<p>예외를 사용할 때는 몇가지 준수사항이 있습니다.</p>
<ul>
<li>예외는 예외적인 상황을위해 설계되었기 때문에, JVM 구현자가 명시적으로 빠르게 할 필요가 없습니다.</li>
<li><code class="language-text">try-catch</code> 블록 내에 코드를 배치하면 JVM 구현이 수행할 수 있는 특정 최적화가 금지됩니다.</li>
<li>배열을 반복하는 표준 관용구가 반드시 중복 검사를 발생시키는 것이 아닙니다.</li>
</ul>
<p>따라서, 예외는 반드시 예외 상황에서만 사용해야하며 일반적인 제어 흐름에서는 절대로 사용하면 안됩니다. 이를 위해 상태 검사 메서드 등을 제공하거나, Optional, 또는 특정 값을 반환하면 안됩니다.</p>
<p>이는 API 설계에도 적용되는 규칙입니다. 잘 설계된 API는 클라이언트가 일반 제어 흐름에 예외를 사용하도록 강요하면 안됩니다.</p>
<p>아래와 같은 코드는 매우 잘못된 코드입니다.</p>
<pre class="language-java"><code class="language-java"><span class="token comment">// 컬렉션 반복에 이런 코드는 최악입니다.</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token class-name">Iterator</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Foo</span><span class="token punctuation">></span></span> i <span class="token operator">=</span> collection<span class="token punctuation">.</span>iterator <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Foo</span> foo <span class="token operator">=</span> i<span class="token punctuation">.</span>next <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NoSuchElementException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span></code></pre>
<p>위와 같은 코드는 매우 잘못된 코드입니다. 따라서, 예외는 예외적인 조건을 위해 설계되었습니다. 일반적으로 사용하는 제어문에 사용하면 안되며, 다른 사람들이 그렇게 하도록 강요하는 API를 작성하면 안됩니다.</p>
<br/>
<h2 id="item-70-복구-가능한-조건에는-체크된-예외를-사용하고-프로그래밍-오류에는-런타임-예외를-사용합니다"><a href="#item-70-%EB%B3%B5%EA%B5%AC-%EA%B0%80%EB%8A%A5%ED%95%9C-%EC%A1%B0%EA%B1%B4%EC%97%90%EB%8A%94-%EC%B2%B4%ED%81%AC%EB%90%9C-%EC%98%88%EC%99%B8%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B3%A0-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EC%98%A4%EB%A5%98%EC%97%90%EB%8A%94-%EB%9F%B0%ED%83%80%EC%9E%84-%EC%98%88%EC%99%B8%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%A9%EB%8B%88%EB%8B%A4" aria-hidden="true"><span class="icon icon-link"></span></a>Item 70. 복구 가능한 조건에는 체크된 예외를 사용하고, 프로그래밍 오류에는 런타임 예외를 사용합니다.</h2>
<p>자바는 <code class="language-text">checked exception</code>, <code class="language-text">runtime exception</code>, <code class="language-text">errors</code>의 3가지 종류의 throwable을 제공합니다. 각 종류의 throwable을 사용하는 것이 적절한 시기에 대해 프로그래머 간에 약간의 혼동이 있습니다.</p>
<p>검사 예외(<code class="language-text">checked exception</code>)와 비검사 예외(<code class="language-text">unchecked exception</code>)를 구분하는 기본 규칙은 간단합니다.</p>
<p>호출하는 쪽에서 복수할 수 있다고 생각된다면 <code class="language-text">checked exception</code>를 사용합니다. <code class="language-text">checked exception</code>를 던지면, <code class="language-text">try-catch</code>로 처리하거나 <code class="language-text">throw</code>를 이용해서 더 바깥쪽으로 전파하도록 강제합니다</p>
<p><code class="language-text">unchecked exception</code>은 <code class="language-text">runtime exception</code>와 <code class="language-text">errors</code>가 있습니다. 이 이러한 경우는 프로그램에서 잡을 필요가 없거나 잡아도 득보다 실이 많은 경우입니다. 또한 <code class="language-text">throwable</code>의 경우 직접 구현이 가능한데, <code class="language-text">Exception</code>, <code class="language-text">RuntimeException</code>, <code class="language-text">Error</code> 클래스를 상속하지 않는 구현은 좋지 않습니다.</p>
<blockquote>
<p><a href="https://madplay.github.io/post/java-checked-unchecked-exceptions" target="_blank" rel="nofollow noopener noreferrer">Exception에 대한 글</a></p>
</blockquote>
<p>즉, 복구 가능한 조건에 대해서는 <code class="language-text">checked exception</code>를 써야하고, 프로그래밍 오류에 대해서는 <code class="language-text">runtime exception</code>를 던져야합니다. 확실하지 않는 경우에서는 <code class="language-text">unchecked exceptions</code>를 throw 합니다. <code class="language-text">checked exception</code>이나 <code class="language-text">runtime exception</code>가 아닌 경우, <code class="language-text">throwable</code>을 정의하면 안됩니다.</p>
<br/>
<h2 id="item-71-checked-exceptions의-불필요한-사용을-피합니다"><a href="#item-71-checked-exceptions%EC%9D%98-%EB%B6%88%ED%95%84%EC%9A%94%ED%95%9C-%EC%82%AC%EC%9A%A9%EC%9D%84-%ED%94%BC%ED%95%A9%EB%8B%88%EB%8B%A4" aria-hidden="true"><span class="icon icon-link"></span></a>Item 71. <code class="language-text">checked exceptions</code>의 불필요한 사용을 피합니다.</h2>
<p>많은 Java 프로그래머는 <code class="language-text">checked exceptions</code>를 싫어하지만, 제대로 사용하게 되면 API와 프로그램을 향상시킬 수 있습니다. 하지만 이를 과하게 사용하거나 잘못 사용하면 불편한 API가 될 수 있습니다.</p>
<p>메서드가 <code class="language-text">checked exceptions</code>를 던질 수 있는 경우에는, 이를 호출하는 곳에서 예외를 확인하고 <code class="language-text">throw</code>해야합니다. 다만, <code class="language-text">stream</code>에서는 사용할 수 없습니다.</p>
<p>일반적으로 <code class="language-text">checked exceptions</code>와 <code class="language-text">unchecked exceptions</code> 중 어떤 것을 선택해야할 지 고민되는 경우가 있는데, 이에 대해 조치를 할 수 있는 부분이라면 <code class="language-text">checked exceptions</code>를 사용하고 그렇지 않으면 대부분은 <code class="language-text">unchecked exceptions</code>를 사용하는 것이 중요합니다.</p>
<h3 id="checked-exceptions를-피하는-방법"><a href="#checked-exceptions%EB%A5%BC-%ED%94%BC%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95" aria-hidden="true"><span class="icon icon-link"></span></a>checked exceptions를 피하는 방법</h3>
<p>대표적인 예시로, 예외 대신 빈 Optional을 사용하는 방법이 있습니다. (다만, 부가 정보를 담을 수 없습니다.)</p>
<pre class="language-java"><code class="language-java"><span class="token comment">// 변경 전</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
  obj<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">TheCheckedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 예외 핸들링</span>
<span class="token punctuation">}</span></code></pre>
<pre class="language-java"><code class="language-java"><span class="token comment">// 변경 후</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">actionPermitted</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  obj<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// 예외 조건 처리</span>
<span class="token punctuation">}</span></code></pre>
<p>다만 위 코드의 경우 예외에 대해 유연하게 처리할 수는 있지만, 객체 상태가 변할 수 있기 때문에 thread safe하지는 않습니다.</p>
<br/>
<h2 id="item-72-표준-예외를-사용합니다"><a href="#item-72-%ED%91%9C%EC%A4%80-%EC%98%88%EC%99%B8%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%A9%EB%8B%88%EB%8B%A4" aria-hidden="true"><span class="icon icon-link"></span></a>Item 72. 표준 예외를 사용합니다.</h2>
<p>자바 라이브러리에서는 대부분의 API의 예외 발생 요구 사항을 대부분 처리하는데 도움이 되는 예외를 제공합니다. 따라서 예외도 재사용하는 것이 좋습니다. 예외 클래스의 수가 적을수록 메모리의 사용량이 줄며, 클래스 적재 시간도 적게 걸리며 사용자 입장에서도 읽기 쉽고 익숙합니다.</p>
<p>하지만, <code class="language-text">Exception</code>, <code class="language-text">RuntimeException</code>, <code class="language-text">Throwable</code>를 재사용하거나 <code class="language-text">Error</code>를 직접적으로 사용하는 경우는 매우 좋지 않습니다.</p>
<p>주로 사용하는 예외목록은 다음과 같습니다.</p>
<ul>
<li>
<p><code class="language-text">IllegalArgumentException</code></p>
<ul>
<li>허용하지 않는 값이 인수로 건네진 경우</li>
<li>null의 경우는 <code class="language-text">NullPointerException</code>이 처리</li>
</ul>
</li>
<li>
<p><code class="language-text">IllegalStateException</code></p>
<ul>
<li>객체가 메서드를 수행하기에 적절하지 않은 상태인 경우</li>
</ul>
</li>
<li>
<p><code class="language-text">NullPointerException</code></p>
<ul>
<li>null을 허용하지 않는 메서드에 null을 건낸 경우</li>
</ul>
</li>
<li>
<p><code class="language-text">IndexOutOfBoundsException</code></p>
<ul>
<li>인덱스가 범위를 넘은 경우</li>
</ul>
</li>
<li>
<p><code class="language-text">ConcurrentModificationException</code></p>
<ul>
<li>허용하지 않는 동시 수정이 발생된 경우</li>
</ul>
</li>
<li>
<p><code class="language-text">UnsupportedOperationException</code></p>
<ul>
<li>호출된 메서드를 지원하지 않는 경우</li>
</ul>
</li>
</ul>
<p>이 외에도 더 필요한 경우에는 표준 예외를 확장하는 것이 좋습니다. 하지만, 예외는 직렬화할 수 있으며 이 경우네는 다만 부담이 크므로 사용하지 않는 것이 좋습니다.</p>
<br/>
<h2 id="item-73-추상화에-수준에-맞는-예외를-던집니다"><a href="#item-73-%EC%B6%94%EC%83%81%ED%99%94%EC%97%90-%EC%88%98%EC%A4%80%EC%97%90-%EB%A7%9E%EB%8A%94-%EC%98%88%EC%99%B8%EB%A5%BC-%EB%8D%98%EC%A7%91%EB%8B%88%EB%8B%A4" aria-hidden="true"><span class="icon icon-link"></span></a>Item 73. 추상화에 수준에 맞는 예외를 던집니다.</h2>
<p>어떤 예외가 발생했을 때, 다른 예외가 발생하면 당황스럽습니다. 이런 경우는 메서드가 저수준 예외를 처리하지 않고, 상위로 전파했을 때 종종 발생합니다. 이를 피할려면 <code class="language-text">exception translation</code> 기법을 사용하면 됩니다. 상위 계층에서 저수준의 예외를 잡아서 추상화 수준에 맞는 예외로 던지는 것입니다.</p>
<pre class="language-java"><code class="language-java"><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token comment">// 저수준 추상화를 이용한다.</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">LowerLevelException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 추상화 수준에 맞게 번역한다.</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">HigherLevelException</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>다만, 무턱대고 예외를 전파하는 것보다는 <code class="language-text">exception translation</code>가 더 좋지만, 이를 남용하는 것은 좋지않습니다. 가능하다면, 저수준 메서드가 반드시 성공해야합니다. 따라서 저수준에서 오류가 발생하지 않도록 상위에서 매개변수 값을 미리 검사하는 것도 방법입니다. 이를 통해서 사용자에게는 문제를 전파하지 않으면서도 개발자가 로그 분석이 가능합니다.</p>
<br/>
<h2 id="item-74-각-메소드가-던진-모든-예외를-문서화합니다"><a href="#item-74-%EA%B0%81-%EB%A9%94%EC%86%8C%EB%93%9C%EA%B0%80-%EB%8D%98%EC%A7%84-%EB%AA%A8%EB%93%A0-%EC%98%88%EC%99%B8%EB%A5%BC-%EB%AC%B8%EC%84%9C%ED%99%94%ED%95%A9%EB%8B%88%EB%8B%A4" aria-hidden="true"><span class="icon icon-link"></span></a>Item 74. 각 메소드가 던진 모든 예외를 문서화합니다.</h2>
<p>메서드가 던지는 예외는 그 메서드를 올바르게 사용하게 하는 중요한 정보입니다. 따라서 문서화하는데 충분한 시간을 써야합니다.</p>
<p>개발자가 볼 수 있는 오류인 오류(Error)와 예외(Exception)에 대해 구분이 필요합니다. 오류의 경우는 시스템 적으로 정상적이지 않는 상황을 의미하며, 이는 low level에서 발생하기 때문에 개발자가 미리 처리하기 어렵습니다.</p>
<p>반면에 예외(Exception)의 경우는 개발자가 구현한 로직의 코드에서 발생합니다. 그렇기 때문에 이를 예방하고 대응할 수 있습니다. 따라서 이를 구분하고 이에따른 처리방법을 정리해놓는 것이 중요합니다.</p>
<h3 id="문서화를-하는-방법"><a href="#%EB%AC%B8%EC%84%9C%ED%99%94%EB%A5%BC-%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95" aria-hidden="true"><span class="icon icon-link"></span></a>문서화를 하는 방법</h3>
<p><code class="language-text">checked exception</code>의 경우는 항상 따로 하나씩 선언하고, 각 예외가 발생하는 상황을 <code class="language-text">@throws</code> 태그를 통해서 정확하게 문서화해야합니다. 또한 확인되지 않은 예외에 대해서는 키워드를 사용하지 않는 것이 중요합니다.</p>
<pre class="language-java"><code class="language-java"><span class="token comment">/*
 * ...
 *
 * @param fileName
 * @throws IOException
 */</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span><span class="token punctuation">(</span><span class="token class-name">Buffered</span> br <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// exception handling</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>다만, <code class="language-text">checked exception</code>의 경우에 공통적인 상위 클래스로 하나를 선언하는 것은 좋지 않습니다. 즉, <code class="language-text">Exception</code>이라고 던지게 되면, 코드를 사용하는 입장에서 대처해야하는 예외에 대한 힌트를 제공하지 않는 것과 동일합니다. 다만, <code class="language-text">main</code> 메서드에서는 괜찮습니다.</p>
<p><code class="language-text">unchecked exception</code>의 경우도 문서화를 진행하면 좋습니다. 일반적으로 프로그래밍 오류를 뜻하는데 발생할 수 있는 오류를 명시하면 자엽스럽게 해당 오류가 발생하지 않도록 개발할 수 있습니다.</p>
<pre class="language-java"><code class="language-java"><span class="token doc-comment comment">/**
 * ...
 * <span class="token keyword">@param</span> <span class="token parameter">divisor</span>
 * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">ArithmeticException</span></span>
 *     Exception may occur when divisor is zero
 */</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token keyword">int</span> divisor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// 피제수(dividend)</span>
    <span class="token keyword">int</span> dividend <span class="token operator">=</span> <span class="token number">2_147_483_647</span><span class="token punctuation">;</span>

    <span class="token comment">// 몫(quotient)</span>
    <span class="token keyword">int</span> quotient <span class="token operator">=</span> dividend <span class="token operator">/</span> divisor<span class="token punctuation">;</span>
    <span class="token keyword">return</span> quotient<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ArithmeticException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// divisor(제수)가 0인 경우</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>그러나 <code class="language-text">unchecked exceptions</code>는 메서드의 <code class="language-text">throw</code> 선언에는 넣지 않는 것이 좋습니다. 즉 아래처럼 하는 것이 좋습니다. (시각적으로 구분할 수 있습니다.)</p>
<pre class="language-java"><code class="language-java"><span class="token doc-comment comment">/**
 * ...
 * <span class="token keyword">@param</span> <span class="token parameter">divisor</span>
 * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">ArithmeticException</span></span>
 *     Exception may occur when divisor is zero
 */</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token keyword">int</span> divisor<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ArithmeticException</span> <span class="token punctuation">{</span>
  <span class="token comment">// throws 선언에는 제외하는 것을 권장한다.</span>
<span class="token punctuation">}</span></code></pre>
<p>특정 클래스에 대부분의 메서드가 같은 이유로 모두 동일한 예외를 던지면 이를 클래스에 추가될 수도 있습니다.</p>
<pre class="language-java"><code class="language-java"><span class="token doc-comment comment">/**
 * ...
 * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">NullPointerException</span></span>
 *     All methods throw an exception if the argument is null.
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestClass</span> <span class="token punctuation">{</span>
  <span class="token doc-comment comment">/**
   * <span class="token keyword">@param</span> <span class="token parameter">paramObj</span>
   */</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">someMethod1</span><span class="token punctuation">(</span><span class="token class-name">Object</span> paramObj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>paramObj <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>

  <span class="token doc-comment comment">/**
   * <span class="token keyword">@param</span> <span class="token parameter">paramObj</span>
   */</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">someMethod2</span><span class="token punctuation">(</span><span class="token class-name">Object</span> paramObj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>paramObj <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p><a href="https://madplay.github.io/post/document-all-exceptions-thrown-by-each-method" target="_blank" rel="nofollow noopener noreferrer">추가 출처</a></p>
<br/>
<h2 id="item-75-예외-세부-메시지에-실패-관련-정보를-담습니다"><a href="#item-75-%EC%98%88%EC%99%B8-%EC%84%B8%EB%B6%80-%EB%A9%94%EC%8B%9C%EC%A7%80%EC%97%90-%EC%8B%A4%ED%8C%A8-%EA%B4%80%EB%A0%A8-%EC%A0%95%EB%B3%B4%EB%A5%BC-%EB%8B%B4%EC%8A%B5%EB%8B%88%EB%8B%A4" aria-hidden="true"><span class="icon icon-link"></span></a>Item 75. 예외 세부 메시지에 실패 관련 정보를 담습니다.</h2>
<p>예외를 잡지 못하여 프로그램이 실패하면 시스템에서 자동으로 스택 추적(stack trace) 정보를 출력해줍니다. 이때 출력되는 문자열은 <code class="language-text">Throwable</code> 클래스의 <code class="language-text">toString</code> 메서드에서 반환하는 클래스 이름과 상세 메세지입니다.</p>
<pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> message <span class="token operator">=</span> <span class="token function">getLocalizedMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>message <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">(</span>s <span class="token operator">+</span> <span class="token string">": "</span> <span class="token operator">+</span> message<span class="token punctuation">)</span> <span class="token operator">:</span> s<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>실패 순간을 적절하게 포착할려면 <strong>발생한 예외에 관련된 모든 매개변수와 필드의 값을 실패 메세지에 담아야합니다.</strong> 예를 들어 IndexOutOfBoundsException 이라면 범위의 최솟값, 최댓값 그리고 범위를 벗어난 인덱스의 값을 담아야합니다.</p>
<p>하지만 주의할 점도 있습니다. 관련된 데이터를 모두 담아야하지만 <strong>실패 원인을 분석할 때 도움이 되는 정보만을 담아야합니다.</strong> 또한 보안과 관련된 정보는 포함하면 안됩니다. 상세 메세지에 비밀번호나 암호화 키 같은 정보는 필요없습니다.</p>
<p>아래 코드는 그 예시를 보여주는 코드입니다.</p>
<pre class="language-java"><code class="language-java"><span class="token doc-comment comment">/**
 * Constructs an IndexOutOfBoundsException.
 *
 * <span class="token keyword">@param</span> <span class="token parameter">lowerBound</span> the lowest legal index value
 * <span class="token keyword">@param</span> <span class="token parameter">upperBound</span> the highest legal index value plus one
 * <span class="token keyword">@param</span> <span class="token parameter">index</span>      the actual index value
 */</span>
<span class="token keyword">public</span> <span class="token class-name">IndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token keyword">int</span> lowerBound<span class="token punctuation">,</span> <span class="token keyword">int</span> upperBound<span class="token punctuation">,</span> <span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Generate a detail message that captures the failure</span>
  <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>
    <span class="token string">"Lower bound: %d, Upper bound: %d, Index: %d"</span><span class="token punctuation">,</span>
    lowerBound<span class="token punctuation">,</span> upperBound<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Save failure information for programmatic access</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>lowerBound <span class="token operator">=</span> lowerBound<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>upperBound <span class="token operator">=</span> upperBound<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>index <span class="token operator">=</span> index<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<br/>
<h2 id="item-76-가능한-한-failure-atomicity으로-만듭니다"><a href="#item-76-%EA%B0%80%EB%8A%A5%ED%95%9C-%ED%95%9C-failure-atomicity%EC%9C%BC%EB%A1%9C-%EB%A7%8C%EB%93%AD%EB%8B%88%EB%8B%A4" aria-hidden="true"><span class="icon icon-link"></span></a>Item 76. 가능한 한 <code class="language-text">failure atomicity</code>으로 만듭니다.</h2>
<p><code class="language-text">failure atomicity</code>란, <strong>호출한 메서드가 실패해도 호출 전 상태를 유지하는 것을 의미</strong>합니다. 또한 이를 지키는 것이 중요합니다.</p>
<h3 id="failure-atomicity"><a href="#failure-atomicity" aria-hidden="true"><span class="icon icon-link"></span></a><code class="language-text">failure atomicity</code></h3>
<p>호출된 메서드가 실패하더라도, 해당 객체는 메서드 호출 전 상태를 유지하려는 특성을 의미합니다.</p>
<h3 id="메서드를-failure-atomicity로-만드는-방법"><a href="#%EB%A9%94%EC%84%9C%EB%93%9C%EB%A5%BC-failure-atomicity%EB%A1%9C-%EB%A7%8C%EB%93%9C%EB%8A%94-%EB%B0%A9%EB%B2%95" aria-hidden="true"><span class="icon icon-link"></span></a>메서드를 <code class="language-text">failure atomicity</code>로 만드는 방법</h3>
<h4 id="불변-객체로-설계합니다"><a href="#%EB%B6%88%EB%B3%80-%EA%B0%9D%EC%B2%B4%EB%A1%9C-%EC%84%A4%EA%B3%84%ED%95%A9%EB%8B%88%EB%8B%A4" aria-hidden="true"><span class="icon icon-link"></span></a>불변 객체로 설계합니다.</h4>
<ul>
<li>불변 객체는 생성 시점에 고정되어 절대 변하지 않기 때문에 기존 객체가 불안정한 상태가 될 일은 없습니다.</li>
</ul>
<h4 id="로직을-수행하기-전에-매개변수의-유효성을-검사합니다"><a href="#%EB%A1%9C%EC%A7%81%EC%9D%84-%EC%88%98%ED%96%89%ED%95%98%EA%B8%B0-%EC%A0%84%EC%97%90-%EB%A7%A4%EA%B0%9C%EB%B3%80%EC%88%98%EC%9D%98-%EC%9C%A0%ED%9A%A8%EC%84%B1%EC%9D%84-%EA%B2%80%EC%82%AC%ED%95%A9%EB%8B%88%EB%8B%A4" aria-hidden="true"><span class="icon icon-link"></span></a>로직을 수행하기 전에 매개변수의 유효성을 검사합니다.</h4>
<ul>
<li>객체의 내부 상태를 변경하기 전에 잠재적 예외 가능성의 대부분을 걸러냅니다.</li>
</ul>
<pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">EmptyStackException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Object</span> result <span class="token operator">=</span> elements<span class="token punctuation">[</span><span class="token operator">--</span>size<span class="token punctuation">]</span><span class="token punctuation">;</span>
  elements<span class="token punctuation">[</span>size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 다 쓴 참조 해제</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<h4 id="실패한-가능성이-있는-모든-코드를-객체의-상태를-바꾸는-코드-앞에-배치합니다"><a href="#%EC%8B%A4%ED%8C%A8%ED%95%9C-%EA%B0%80%EB%8A%A5%EC%84%B1%EC%9D%B4-%EC%9E%88%EB%8A%94-%EB%AA%A8%EB%93%A0-%EC%BD%94%EB%93%9C%EB%A5%BC-%EA%B0%9D%EC%B2%B4%EC%9D%98-%EC%83%81%ED%83%9C%EB%A5%BC-%EB%B0%94%EA%BE%B8%EB%8A%94-%EC%BD%94%EB%93%9C-%EC%95%9E%EC%97%90-%EB%B0%B0%EC%B9%98%ED%95%A9%EB%8B%88%EB%8B%A4" aria-hidden="true"><span class="icon icon-link"></span></a>실패한 가능성이 있는 모든 코드를, 객체의 상태를 바꾸는 코드 앞에 배치합니다.</h4>
<ul>
<li>로직을 수행하기 전에 인수의 유효성을 검사하기 어려울 때 사용할 수 있습니다.</li>
<li>예를 들어, <code class="language-text">TreeMap</code>의 경우 잘못된 타입의 원소를 추가하는 경우, <code class="language-text">ClassCastException</code> 에러가 발생합니다.</li>
</ul>
<h4 id="객체의-임시-복사본에서-작업을-수행한-후에-성공적으로-완료되면-원래-객체와-교체합니다"><a href="#%EA%B0%9D%EC%B2%B4%EC%9D%98-%EC%9E%84%EC%8B%9C-%EB%B3%B5%EC%82%AC%EB%B3%B8%EC%97%90%EC%84%9C-%EC%9E%91%EC%97%85%EC%9D%84-%EC%88%98%ED%96%89%ED%95%9C-%ED%9B%84%EC%97%90-%EC%84%B1%EA%B3%B5%EC%A0%81%EC%9C%BC%EB%A1%9C-%EC%99%84%EB%A3%8C%EB%90%98%EB%A9%B4-%EC%9B%90%EB%9E%98-%EA%B0%9D%EC%B2%B4%EC%99%80-%EA%B5%90%EC%B2%B4%ED%95%A9%EB%8B%88%EB%8B%A4" aria-hidden="true"><span class="icon icon-link"></span></a>객체의 임시 복사본에서 작업을 수행한 후에 성공적으로 완료되면 원래 객체와 교체합니다.</h4>
<ul>
<li>데이터를 임시 자료 구조에 저장해 작업하는 것이 더 빠를 때 적용하기 좋은 방법입니다.</li>
<li><code class="language-text">List</code> 클래스의 <code class="language-text">compare</code> aptjemrk rmfjgtmqslek.</li>
</ul>
<pre class="language-java"><code class="language-java"><span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">E</span><span class="token punctuation">></span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token punctuation">)</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">ListIterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> i <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">listIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> e <span class="token operator">:</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    i<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    i<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h4 id="작업-도중에-발생하는-실패를-가로채는-복구-코드를-작성해서-작업-전-상태로-되돌립니다"><a href="#%EC%9E%91%EC%97%85-%EB%8F%84%EC%A4%91%EC%97%90-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%8B%A4%ED%8C%A8%EB%A5%BC-%EA%B0%80%EB%A1%9C%EC%B1%84%EB%8A%94-%EB%B3%B5%EA%B5%AC-%EC%BD%94%EB%93%9C%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%B4%EC%84%9C-%EC%9E%91%EC%97%85-%EC%A0%84-%EC%83%81%ED%83%9C%EB%A1%9C-%EB%90%98%EB%8F%8C%EB%A6%BD%EB%8B%88%EB%8B%A4" aria-hidden="true"><span class="icon icon-link"></span></a>작업 도중에 발생하는 실패를 가로채는 복구 코드를 작성해서 작업 전 상태로 되돌립니다.</h4>
<p>주로 디스크 기반의 내구성(durability)를 보장해야하는 자료구조에 쓰이는데 자주 사용되는 방법은 아닙니다.</p>
<h3 id="failure-atomicity을-항상-지킬-수-있나요"><a href="#failure-atomicity%EC%9D%84-%ED%95%AD%EC%83%81-%EC%A7%80%ED%82%AC-%EC%88%98-%EC%9E%88%EB%82%98%EC%9A%94" aria-hidden="true"><span class="icon icon-link"></span></a><code class="language-text">failure atomicity</code>을 항상 지킬 수 있나요...</h3>
<p>예를 들어 <code class="language-text">ConcurrentModificationException</code>을 잡아내도 그 객체를 여전히 사용할 수 있는 상태라고 가정하면 안됩니다. 이런 경우의 오류는 복구할 수 없기 때문에 이를 보존할려고 시도할 필요가 없습니다. 따라서 권장되는 부분이지만, 항상 <code class="language-text">failure atomicity</code>를 지킬 수 없습니다.</p>
<p><code class="language-text">failure atomicity</code>으로 만들 수 있도록, 항상 그래야하는 것도 아닙니다. 이를 달성하기 위한 비용이 크거나 복잡도가 아주 큰 연산이 있을 수 있기 때문입니다. 이 규칙을 지키지 못하면 실패시의 객체 상태를 API 설명에 명시해야합니다.</p>
<p>따라서 Error는 복구할 수 없으므로 <code class="language-text">AssertionError</code>에 대해서는 실패 원자적으로는 만들려는 시도가 필요가 없습니다.</p>
<br/>
<h2 id="item-77-예외를-무시하면-안됩니다"><a href="#item-77-%EC%98%88%EC%99%B8%EB%A5%BC-%EB%AC%B4%EC%8B%9C%ED%95%98%EB%A9%B4-%EC%95%88%EB%90%A9%EB%8B%88%EB%8B%A4" aria-hidden="true"><span class="icon icon-link"></span></a>Item 77. 예외를 무시하면 안됩니다.</h2>
<p>예외가 선언된 API는 그 메서드를 사용할 때 적절한 조치를 해야합니다. 따라서 catch 블랙을 비워두면 이는 존재할 이유가 없습니다.</p>
<pre class="language-java"><code class="language-java"><span class="token comment">// 의미 없는 코드</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SomeException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre>
<p>물론 예외를 무시해야하는 경우가 있습니다. 예를 들어 <code class="language-text">FileInputStream</code>을 닫을 때 그렇습니다. 파일의 상태를 변경하지 않으니 복구할 것이 없고 스트림을 닫는 경우는 필요한 내용을 모두 다 읽어야한다는 뜻입니다.</p>
<p>그래도 예외를 무시하기로 했다면 <code class="language-text">catch</code>블록 안에서 그렇게 결정한 이유를 주석으로 남기고 예외의 이름도 변경해야합니다.</p>
</div><div class="post__footer"><div class="post-tags"><a href="/tag/Java/" class="post-tags__link"><span>#</span> Java
		</a><a href="/tag/Stater/" class="post-tags__link"><span>#</span> Stater
		</a><a href="/tag/Effective%20Java/" class="post-tags__link"><span>#</span> Effective Java
		</a><a href="/tag/Exceptions/" class="post-tags__link"><span>#</span> Exceptions
		</a></div></div></div><ins data-ad-client="ca-pub-1759762070891290" data-ad-slot="2189844016" data-ad-format="auto" class="adsbygoogle mb-5" style="display:block;"></ins><div class="post-comments" style="display:none;"></div><div class="post-comments"></div><div class="author post-author"><img alt="Author image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 180 180' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-bfb91fc8d3516221a47de6ec13d7cf4f'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='5'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-bfb91fc8d3516221a47de6ec13d7cf4f)' width='180' height='180' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABAAEADASIAAhEBAxEB/8QAHAAAAQUBAQEAAAAAAAAAAAAABgEDBAcIBQIA/8QAMBAAAQMDAgQFAwQDAQAAAAAAAQIDBAAFERIhBhMxUQciQWFxFJGhFiMygRVCsdH/xAAYAQADAQEAAAAAAAAAAAAAAAABAgMABP/EACARAAICAgICAwAAAAAAAAAAAAECABEDEiExBCITQUL/2gAMAwEAAhEDEQA/ALKr4mmyo5pdVPJXFNIakR4ynUlaspbAznHX4qp/EzxOTw9LctVnQ07cEpBW%2b4QW2sjYY9VfOMe9LuLqNowFyzx0pDWTX%2bM%2bIZMovOcQT9ZUFYbdKQD8DbHxWg/Cy7XriC0xZl%2bTEYiyBy4i06ua%2bpOcqV/qAcHHqaBcDuMqMxoQtNeTUiayGVJKM6TsQeqVDqKjUVYMLEzKVNGeiupMCOZTnZtP8jTcSGp/C3Mpa/JqJfLythf0VrbQp0DzFX8UDuankyfle4%2bLFfs/AnL4x42t9puRgPsZitMuPPSCSSjSkkBCR1Vt%2bM1Stv8ADfibjGQ5f5S4Mf6xfNCJWvUpJ6FSUjbbHrmrNn8PNTo036xXOkymy2VgYCQrY4HxtRBw5DegyHhHhpiAq0lZeLnNGNlHI2PpjeoHbH33Oz0zGh0JRvF/hfxBbYvPiRbc4003%2b43BdcKlnfK9Lm5PsD0HSjjwB46uHEN/uFivKkGN9Ml2KylGAyWyElI7DGDjvRRf1SHJMlEh66ocLepK2NJYwTgJ0k5J37dM71WEaR%2bkfEW0Xvkqw4tUeWllJ8yVDBUB3Gx/qtvtw0Pw6cpNFXZCkMuDqcZz8Vy0kFIPcV3w7HutuS7GcS4hadSVJ6GhoL5bqmVbLRtg0%2bA0SJDyFNAx%2b/XUsIDMfd1Ww/8Aa4DCNIJJJKjlSj1Ue9DDvHvDqOfImXNlK9ZSkDKjgdgM1HV4l8MJjB4zHic45YYUV/bpj%2b6piUKLPcjmcsaHUN0Hzox1yK6z85wJy0yXloQf2kKAVn060B/rOxC1xLg7cEMsSgS0Fg6zg4PlGTsaM7KLbxxZ2btZ5KCtOWXkLRgpUOpwfQ7GtlTeiJTxMioSH6ntcpSLQtU1gIcGdshRx6Zx61XCoKLnci88hTSUkltWN09Onuf%2bVYlybs/DlsU2FtyX86iEKyhJ7k%2bp9qDVXBMyQ64CnmZBWkHdORtkfGKgMPNMZ0t5OtsghxwI%2bhhKoKAEtgakJAwB3p/iqERiUyPOnc49aGLDK5FxYWFY82D8GrGdQmRG3wQRRcatxJo26%2b0wVpK0kDb4pWm3HGwlIyoq0bd6QOBCCTXbtLIMaK6oDSnU8fk9KuBc4pDlQzGmuac%2bVsKH23/Io/8ADriViySXY90b5lskJAdSUatB9FY6/b27UKzG%2bdIQsbamSPuRXp0aClY9Nj8U2sIYjmWNfeIOHks86LeA7g4RFRGWgJHck7mq2uV0luXQ3GO%2b8zLkrAy2op0J7bewFNTUnWgBX8t6bbwJaUkbcsn8ikCAG5R8zMoX6EIovGd8YkM65ijo3xoTggeh23PvWrrFLTMtzLqCClxtK0/BGaxo6%2bhSlKO2lRT8d60t4MXX/IcFW4knWyDHUD1Gk4H4xSZR0Y%2bA8kT/2Q==' /%3e%3c/svg%3e" width="180" data-src="/assets/static/author.e6b6009.98a7113f4952b5eaa532b5d16696f13d.jpg" data-srcset="/assets/static/author.e6b6009.98a7113f4952b5eaa532b5d16696f13d.jpg 180w" data-sizes="(max-width: 180px) 100vw, 180px" class="author__image g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/author.e6b6009.98a7113f4952b5eaa532b5d16696f13d.jpg" class="author__image g-image g-image--loaded" width="180" alt="Author image"></noscript><!----><p class="author__intro">To be a Pro in Web developer</p><p class="author__links"><a href="//linkedin.com/in/myeonghun-park-7693a1184/">📘 Linkedin</a><a href="//azderica.github.io/til/docs/intro">📚 TIL</a><a href="//github.com/Azderica">💻 GitHub</a><a href="//azderica.github.io/Portfolio">✨ Portfolio</a></p></div></main><footer class="footer"><span class="footer__copyright">Copyright © 2021.
    </span><span class="footer__links">Powered by <a href="//gridsome.org"> Gridsome </a></span></footer></div> <script src="/assets/js/app.c9b26b28.js" defer></script><script src="/assets/js/page--src--templates--post-vue.09be428f.js" defer></script>
  </body>
</html>
