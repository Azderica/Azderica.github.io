<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">

<head>
  <title>[SpringBoot] SpringBoot 활용하기 - 1 - Azderica</title><meta name="gridsome:hash" content="a494b8b1778660c606708ae3dd5d59774a4a3863"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="부족하지만 꿈많은 웹 개발자의 발전 기록입니다."><meta data-vue-tag="ssr" name="description" content=" &#x27;SpringBoot 활용하기&#x27;의 첫번째 게시글입니다. "><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.d0be325ebfe2762f973f3e0685345394.png"><link rel="preload" href="/assets/css/0.styles.359a0b77.css" as="style"><link rel="preload" href="/assets/js/app.e68d9618.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--post-vue.e5244b0f.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules--gridsome--app--pages--404-vue.cf9c1447.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.5770a427.js"><link rel="prefetch" href="/assets/js/page--src--templates--tag-vue.5957f7f4.js"><link rel="stylesheet" href="/assets/css/0.styles.359a0b77.css"><script data-vue-tag="ssr" type="text/javascript" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  <script data-ad-client="ca-pub-1759762070891290" async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FCHHPLPKYW"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-FCHHPLPKYW');
  </script>
  <link rel="icon" type="image/png" href="favicon.png" />
  <link rel="shortcut icon" type="image/png" href="favicon.png" />
  <meta name="google-site-verification" content="MqpGCz7XVg4s3AWfrGHCt6AlXPacpV9iGvSFVD0ATHw" />
</head>

<body >
  <script>
    // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
    ; (function () {
      window.__onThemeChange = function () { }
      function setTheme(newTheme) {
        window.__theme = newTheme
        preferredTheme = newTheme
        document.body.setAttribute('data-theme', newTheme)
        window.__onThemeChange(newTheme)
      }

      var preferredTheme
      try {
        preferredTheme = localStorage.getItem('theme')
      } catch (err) { }

      window.__setPreferredTheme = function (newTheme) {
        setTheme(newTheme)
        try {
          localStorage.setItem('theme', newTheme)
        } catch (err) { }
      }

      var darkQuery = window.matchMedia('(prefers-color-scheme: dark)')
      darkQuery.addListener(function (e) {
        window.__setPreferredTheme(e.matches ? 'dark' : 'light')
      })

      setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'))
    })()
  </script>

  <div id="app" data-server-rendered="true"><header class="header"><div class="header__left"><a href="/" class="logo active"><span class="logo__text">
    ← Azderica
  </span></a></div><div class="header__right"><button role="button" aria-label="Toggle dark/light" class="toggle-theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></button></div></header><main class="main"><div class="post-title"><h1 class="post-title__text">
      [SpringBoot] SpringBoot 활용하기 - 1
    </h1><div class="post-meta">
   Posted 3. August 2020.
   <strong>8 min read.</strong></div></div><div class="post content-box"><div class="post__header"><img alt="Cover image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 820 442' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-29f2605aef896f90944d207b9d4e9d4c'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-29f2605aef896f90944d207b9d4e9d4c)' width='820' height='442' xlink:href='data:image/png%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAiAEADASIAAhEBAxEB/8QAGwABAAMBAAMAAAAAAAAAAAAAAAQFBgMCBwj/xAAqEAABAwQBAgUEAwAAAAAAAAABAgMEAAURIRIGMRNBUWGBFBUiMgdxof/EABgBAQADAQAAAAAAAAAAAAAAAAACAwQB/8QAIxEAAgICAgIBBQAAAAAAAAAAAAECEQMhEjEEQVEiYZGx4f/aAAwDAQACEQMRAD8A%2bnaUpQCs51b1SxYEobS348xwckt5wEj1Ua0dYx2BBX/IEt%2b9lrwRGQ7HD5AQcYB76OPT3rN5U5xglj026v4Ksrkl9Psr7H17OnXFqO5bUPpcVjEbPJPvvR/yvYDKy42FKTxVsFOc4I0RUWNLiuZFrZQhgDLkkN8G0pHocDkf60PWu8RYdbU6j9HFqWj3STo/Pf5rnjKcVU58hiUlpys7UpStRaKgXi5t2xplS21uuPuBpptBAKlEZ7kgDt51PqtvsF6fFS019ItPLK2pTXNCx8HII9RUMnLi%2bPZGV1oiOdRcJLMUWueZjrRdSxxSDpWDk5wB557VW3i%2b225Qm4cmBOedfWtox2xxdQ4jB4nfuDntquMKx3W3XmMIbyCW4jmVuNqUz%2bTmfCG8gAdt51VjbunXo90jXCRKQ7IDjzr5CMBSlpCQE%2bgAFYrz5Fxa%2bzuutfn2UXkkqKCNHs0e4JaMS7T5AeW0mO66Fp5oSFdsgY3561WjR1RHcaaSxDluTXHVsiGEgOJUj9snOABkbrxidPusX77gZCCj6h57gEnOFpSAPjFV1ytUy1z/ALjBDj0lUp50eGyXEhtYT%2bK0gg%2bXcVGMcuFNxVK/hda3%2bziU4LSNDaLu3c3pbSWH2HYqkpcS8ACCRnGjVlWd6Rjzg9c51yQpDkt1JSlaOBwlOM8cnA9Ad6rRVtwSlKCcu/7ovxtuNsUpSrSYpSlAKUpQClKUB//Z' /%3e%3c/svg%3e" width="820" data-src="/assets/static/SpringLogo.214a68b.be0c3d9590430504675b948223711f21.png" data-srcset="/assets/static/SpringLogo.a67b0b2.be0c3d9590430504675b948223711f21.png 480w, /assets/static/SpringLogo.214a68b.be0c3d9590430504675b948223711f21.png 820w" data-sizes="(max-width: 820px) 100vw, 820px" class="g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/SpringLogo.214a68b.be0c3d9590430504675b948223711f21.png" class="g-image g-image--loaded" width="820" alt="Cover image"></noscript></div><div class="post__content"><h1 id="springboot-활용하기"><a href="#springboot-%ED%99%9C%EC%9A%A9%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="icon icon-link"></span></a>SpringBoot 활용하기</h1>
<table>
<thead>
<tr>
<th>스프링 부트 핵심 기능</th>
<th>각종 기술 연동</th>
</tr>
</thead>
<tbody>
<tr>
<td>SpringApplication</td>
<td>스프링 웹 MVC</td>
</tr>
<tr>
<td>외부설정</td>
<td>스프링 웹 MVC</td>
</tr>
<tr>
<td>프로파일</td>
<td>스프링 데이터</td>
</tr>
<tr>
<td>로깅</td>
<td>스프링 시큐리티</td>
</tr>
<tr>
<td>테스트</td>
<td>REST API 클라이언트</td>
</tr>
<tr>
<td>Spring-Dev-Tools</td>
<td>다루지 않은 내용들</td>
</tr>
</tbody>
</table>
<br/>
<h2 id="springapplication"><a href="#springapplication" aria-hidden="true"><span class="icon icon-link"></span></a>SpringApplication</h2>
<p><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-spring-application.html#boot-features-spring-application" target="_blank" rel="nofollow noopener noreferrer">https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-spring-application.html#boot-features-spring-application</a></p>
<p>Tip) 자동 설정이 되지않을때나 궁금할때는 디버그를 보면 확인할 수 있다.</p>
<ul>
<li>
<p>기본 로그 레벨 INFO</p>
<ul>
<li>뒤에로깅수업때자세히살펴볼예정</li>
</ul>
</li>
<li>FailureAnalyzer</li>
<li>
<p>배너</p>
<ul>
<li>banner.txt | gif | jpg | png</li>
<li>classpath 또는 spring.banner.location</li>
<li>\${spring-boot.version} 등의 변수를 사용할 수 있음.</li>
<li>Banner 클래스 구현하고 SpringApplication.setBanner()로 설정 가능.</li>
</ul>
<pre class="language-java"><code class="language-java"><span class="token class-name">SpringApplication</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">(</span><span class="token class-name">SpringinitApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">setBanner</span><span class="token punctuation">(</span><span class="token punctuation">(</span>environment<span class="token punctuation">,</span> sourceClass<span class="token punctuation">,</span> out<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">{</span>
  out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"==========="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Spring Boot"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"==========="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
<li>
<p>배너끄는방법</p>
<ul>
<li>SpringApplicationBuilder로 빌더 패턴 사용 가능</li>
</ul>
<pre class="language-java"><code class="language-java"><span class="token keyword">new</span> <span class="token class-name">SprintApplicationBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">sources</span><span class="token punctuation">(</span><span class="token class-name">SpringinitApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
</ul>
<p><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-spring-applicatio" target="_blank" rel="nofollow noopener noreferrer">https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-spring-applicatio</a> n.html#boot-features-application-events-and-listeners</p>
<ul>
<li>
<p>ApplicationEvent 등록</p>
<ul>
<li>
<p>ApplicationContext를 만들기 전에 사용하는 리스너는 @Bean으로 등록할 수 없다.</p>
<ul>
<li>SpringApplication.addListners()</li>
</ul>
<pre class="language-java"><code class="language-java"><span class="token comment">// SampleListner</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SampleListner</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ApplicationStartedEvent</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onApplicationEvent</span><span class="token punctuation">(</span><span class="token class-name">ApplicationStartedEvent</span> applicationStartedEvent<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"======================="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Application is starting"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"======================="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Application</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Application</span> <span class="token punctuation">{</span>

<span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>다음과 같이 작성시. Spring 이 빌드될 때 찍히는 거 볼 수 있다.</p>
</li>
</ul>
</li>
<li>
<p>WebApplicationType 설정</p>
<p>WebApplicationType은 Servlet, Reactive, None 등이 있는데 이걸로 돌아간다.</p>
<p>둘 다 없으면 None으로 돌려야하고, 두개다 있으면 Servlet으로 돌아간다. Reactive로 하고 싶으면 따로 작성해야한다.</p>
</li>
<li>
<p>애플리케이션 아규먼트 사용하기</p>
<ul>
<li>ApplicationArguments를 빈으로 등록해 주니까 가져다 쓰면 됨.</li>
</ul>
<p>argument에 생성자가 하나면 Bean을 생성할 때 자동으로 해준다.</p>
</li>
<li>
<p>애플리케이션 실행한 뒤 뭔가 실행하고 싶을 때</p>
<ul>
<li>ApplicationRunner (추천) 또는 CommandLineRunner</li>
<li>
<p>순서 지정 가능 @Order</p>
<p>숫자가 높을수록 우선순위가 높은 것.</p>
</li>
</ul>
</li>
</ul>
<br/>
<h2 id="외부-설정"><a href="#%EC%99%B8%EB%B6%80-%EC%84%A4%EC%A0%95" aria-hidden="true"><span class="icon icon-link"></span></a>외부 설정</h2>
<p><a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-external-config" target="_blank" rel="nofollow noopener noreferrer">https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-external-config</a></p>
<h3 id="사용할-수-있는-외부-설정"><a href="#%EC%82%AC%EC%9A%A9%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8A%94-%EC%99%B8%EB%B6%80-%EC%84%A4%EC%A0%95" aria-hidden="true"><span class="icon icon-link"></span></a>사용할 수 있는 외부 설정</h3>
<ul>
<li>properties</li>
<li>YAML</li>
<li>환경변수</li>
<li>커맨드 라인 아규먼트</li>
</ul>
<h3 id="프로퍼티-우선-순위"><a href="#%ED%94%84%EB%A1%9C%ED%8D%BC%ED%8B%B0-%EC%9A%B0%EC%84%A0-%EC%88%9C%EC%9C%84" aria-hidden="true"><span class="icon icon-link"></span></a>프로퍼티 우선 순위</h3>
<p>위에 있을수록 높음.</p>
<ol>
<li>유저 홈 디렉토리에 있는 spring-boot-dev-tools.properties</li>
<li>테스트에 있는 @TestPropertySource</li>
<li>@SpringBootTest 애노테이션의 properties 애트리뷰트</li>
<li>커맨드 라인 아규먼트</li>
<li>SPRING_APPLICATION_JSON (환경 변수 또는 시스템 프로티) 에 들어있는 프로퍼티</li>
<li>ServletConfig 파라미터</li>
<li>ServletContext 파라미터</li>
<li>java:comp/env JNDI 애트리뷰트</li>
<li>System.getProperties() 자바 시스템 프로퍼티</li>
<li>OS 환경 변수</li>
<li>RandomValuePropertySource</li>
<li>JAR 밖에 있는 특정 프로파일용 application properties</li>
<li>JAR 안에 있는 특정 프로파일용 application properties</li>
<li>JAR 밖에 있는 application properties</li>
<li>JAR 안에 있는 application properties</li>
<li>@PropertySource</li>
<li>기본 프로퍼티 (SpringApplication.setDefaultProperties)</li>
</ol>
<p>application.properties 우선 순위 (높은게 낮은걸 덮어 씁니다.)</p>
<blockquote>
<p>위에 있는게 이김.</p>
</blockquote>
<ol>
<li>file:./config/</li>
<li>file:./</li>
<li>classpath:/config/</li>
<li>classpath:/</li>
</ol>
<p>랜덤값 설정하기</p>
<ul>
<li>\${random.*}</li>
</ul>
<p>플레이스 홀더</p>
<blockquote>
<p>인풋텍스트나 아레아 등에서 안내 문구를 삽입해 주는 기능 + 클릭하면 사라지는 아주 좋은 기능</p>
</blockquote>
<ul>
<li>name = keesun</li>
<li>fullName = \${name} baik</li>
</ul>
<h3 id="타입-세이프-프로퍼티"><a href="#%ED%83%80%EC%9E%85-%EC%84%B8%EC%9D%B4%ED%94%84-%ED%94%84%EB%A1%9C%ED%8D%BC%ED%8B%B0" aria-hidden="true"><span class="icon icon-link"></span></a>타입-세이프 프로퍼티</h3>
<p>타입-세이프 프로퍼티 <code class="language-text">@ConfigurationProperties</code></p>
<ul>
<li>여러 프로퍼티를 묶어서 읽어올 수 있음</li>
<li>
<p>빈으로등록해서다른빈에주입할수있음</p>
<ul>
<li>@EnableConfigurationProperties</li>
<li>@Component</li>
<li>@Bean</li>
</ul>
</li>
<li>
<p>융통성 있는 바인딩</p>
<ul>
<li>context-path (케밥)</li>
<li>context_path (언드스코어)</li>
<li>contextPath (캐멀)</li>
<li>CONTEXTPATH</li>
</ul>
</li>
<li>
<p>프로퍼티 타입 컨버전</p>
<ul>
<li>@DurationUnit</li>
</ul>
</li>
<li>
<p>프로퍼티 값 검증</p>
<ul>
<li>@Validated</li>
<li>JSR-303 (@NotNull, ...)</li>
</ul>
</li>
<li>메타정보생성</li>
<li>
<p>@Value</p>
<ul>
<li>SpEL 을 사용할 수 있지만...</li>
<li>위에 있는 기능들은 전부 사용 못합니다.</li>
</ul>
</li>
</ul>
<h3 id="프로파일"><a href="#%ED%94%84%EB%A1%9C%ED%8C%8C%EC%9D%BC" aria-hidden="true"><span class="icon icon-link"></span></a>프로파일</h3>
<ul>
<li>
<p>@Profile 애노테이션은 어디에?</p>
<ul>
<li>@Configuration</li>
<li>@Component</li>
</ul>
</li>
<li>
<p>어떤 프로파일을 활성화 할 것인가?</p>
<ul>
<li>spring.profiles.active</li>
</ul>
</li>
<li>
<p>어떤 프로파일을 추가할 것인가?</p>
<ul>
<li>spring.profiles.include</li>
</ul>
</li>
<li>
<p>프로파일용 프로퍼티</p>
<ul>
<li>application-{profile}.properties</li>
</ul>
</li>
</ul>
<br/>
<h2 id="로깅"><a href="#%EB%A1%9C%EA%B9%85" aria-hidden="true"><span class="icon icon-link"></span></a>로깅</h2>
<p>로깅 퍼사드 VS 로거</p>
<blockquote>
<p>로깅 퍼사드의 장점은 로거를 자신들이 원하는 거를 사용할 수 있는 점</p>
</blockquote>
<ul>
<li><strong>Commons Logging</strong>, SLF4j</li>
<li>JUL, Log4J2, <strong>Logback</strong> (최종적으로는 Logback으로 왔다.)</li>
</ul>
<p>스프링 5에 로거 관련 변경 사항</p>
<ul>
<li><a href="https://docs.spring.io/spring/docs/5.0.0.RC3/spring-framework-reference/overview.html#overview-logging" target="_blank" rel="nofollow noopener noreferrer">https://docs.spring.io/spring/docs/5.0.0.RC3/spring-framework-reference/overview.html#overview-logging</a></li>
<li>
<p>Spring-JCL</p>
<ul>
<li>Commons Logging -> SLF4j or Log4j2</li>
<li>pom.xml에 exclusion 안해도 됨.</li>
</ul>
</li>
</ul>
<p>스프링 부트 로깅</p>
<ul>
<li>기본 포맷</li>
<li>--debug (일부 핵심 라이브러리만 디버깅 모드로)</li>
<li>--trace (전부 다 디버깅 모드로)</li>
<li>컬러 출력: spring.output.ansi.enabled</li>
<li>파일 출력: logging.file 또는 logging.path</li>
<li>로그 레벨 조정: logging.level.패지키 = 로그 레벨</li>
</ul>
<h3 id="커스터마이징"><a href="#%EC%BB%A4%EC%8A%A4%ED%84%B0%EB%A7%88%EC%9D%B4%EC%A7%95" aria-hidden="true"><span class="icon icon-link"></span></a>커스터마이징</h3>
<p><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/howto-logging.html" target="_blank" rel="nofollow noopener noreferrer">https://docs.spring.io/spring-boot/docs/current/reference/html/howto-logging.html</a> : 커스텀 로그 설정 파일 사용하기</p>
<p>Logback: logback-spring.xml - 기본적으로는 이거 사용을 추천</p>
<p>Log4J2: log4j2-spring.xml</p>
<p>JUL (비추): logging.properties</p>
<p>Logback extension</p>
<ul>
<li>프로파일 <springProfile name=”프로파일”></li>
<li>Environment 프로퍼티 <springProperty></li>
</ul>
<p>로거를 Log4j2로 변경하기</p>
<p><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/howto-logging.html#howto-configure-log4j-for-logging" target="_blank" rel="nofollow noopener noreferrer">https://docs.spring.io/spring-boot/docs/current/reference/html/howto-logging.html#howto-configure-log4j-for-logging</a></p>
<br/>
<h2 id="테스트"><a href="#%ED%85%8C%EC%8A%A4%ED%8A%B8" aria-hidden="true"><span class="icon icon-link"></span></a>테스트</h2>
<p><a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-testing" target="_blank" rel="nofollow noopener noreferrer">https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-testing</a></p>
<p>시작은 일단 spring-boot-starter-test를 추가하는 것 부터</p>
<ul>
<li>test 스콥으로 추가.</li>
</ul>
<p>@SpringBootTest</p>
<ul>
<li>@RunWith(SpringRunner.class)랑 같이 써야 함.</li>
<li>빈 설정 파일은 설정을 안해주나? 알아서 찾습니다. (@SpringBootApplication)</li>
<li>
<p>webEnvironment</p>
<ul>
<li>MOCK: mock servlet environment. 내장 톰캣 구동 안 함.</li>
<li>RANDON_PORT, DEFINED_PORT: 내장 톰캣 사용 함.</li>
<li>NONE: 서블릿 환경 제공 안 함.</li>
</ul>
</li>
</ul>
<pre class="language-java"><code class="language-java"><span class="token comment">// TEST Code</span>
<span class="token keyword">package</span> <span class="token namespace">myepark<span class="token punctuation">.</span>ebaykorea<span class="token punctuation">.</span>springtestdemo</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runner<span class="token punctuation">.</span></span><span class="token class-name">RunWith</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">AutoConfigureMockMvc</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SpringBootTest</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span></span><span class="token class-name">SpringRunner</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">MockMvc</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">MockMvcRequestBuilders</span><span class="token punctuation">.</span>get<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>result<span class="token punctuation">.</span></span><span class="token class-name">MockMvcResultHandlers</span><span class="token punctuation">.</span>print<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>result<span class="token punctuation">.</span></span><span class="token class-name">MockMvcResultMatchers</span><span class="token punctuation">.</span>content<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>result<span class="token punctuation">.</span></span><span class="token class-name">MockMvcResultMatchers</span><span class="token punctuation">.</span>status<span class="token punctuation">;</span>

<span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootTest</span><span class="token punctuation">(</span>webEnvironment <span class="token operator">=</span> <span class="token class-name">SpringBootTest<span class="token punctuation">.</span>WebEnvironment</span><span class="token punctuation">.</span>MOCK<span class="token punctuation">)</span>
<span class="token annotation punctuation">@AutoConfigureMockMvc</span>
<span class="token keyword">class</span> <span class="token class-name">SpringtestdemoApplicationTests</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">MockMvc</span> mockMvc<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        mockMvc<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">"hello myepark"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">andDo</span><span class="token punctuation">(</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre>
<p>@MockBean</p>
<ul>
<li>ApplicationContext에 들어있는 빈을 Mock으로 만든 객체로 교체 함.</li>
<li>모든 @Test 마다 자동으로 리셋.</li>
</ul>
<p>슬라이스 테스트</p>
<ul>
<li>레이어 별로 잘라서 테스트하고 싶을 때 (빈을 다 체크하고 싶지 않을때)</li>
<li>@JsonTest</li>
<li>@WebMvcTest</li>
<li>@WebFluxTest</li>
<li>@DataJpaTest</li>
<li>...</li>
</ul>
<p>스프링 테스트</p>
<ul>
<li>
<p><strong>OutputCapture</strong></p>
<ul>
<li>Log에 찍히는 모든 output를 캡쳐한다.</li>
<li>ex) <code class="language-text">assertThat(outputCapture.toString()).contains(&quot;holoman&quot;).contains(&quot;skip&quot;);</code></li>
</ul>
</li>
<li>TestPropertyValues</li>
<li>TestRestTemplate</li>
<li>ConfigFileApplicationContextInitializer</li>
</ul>
<h3 id="spring-boot-devtools"><a href="#spring-boot-devtools" aria-hidden="true"><span class="icon icon-link"></span></a>Spring Boot Devtools</h3>
<ul>
<li>캐시 설정을 개발 환경에 맞게 변경.</li>
<li>
<p>클래스패스에 있는 파일이 변경 될 때마다 자동으로 재시작.</p>
<ul>
<li>
<p>직접 껐다 켜는거 (cold starts)보다 빠른다. 왜?</p>
<ul>
<li>class 로더를 2개를 사용해서...</li>
</ul>
</li>
<li>릴로딩 보다는 느리다. (JRebel 같은건 아님)</li>
<li>리스타트 하고 싶지 않은 리소스는? spring.devtools.restart.exclude</li>
<li>리스타트 기능 끄려면? spring.devtools.restart.enabled = false</li>
</ul>
</li>
<li>
<p>라이브 릴로드? 리스타트 했을 때 브라우저 자동 리프레시 하는 기능</p>
<ul>
<li>브라우저 플러그인 설치해야 함.</li>
<li>라이브 릴로드 서버 끄려면? spring.devtools.liveload.enabled = false</li>
</ul>
</li>
<li>
<p>글로벌 설정</p>
<ul>
<li>
<p>~/.spring-boot-devtools.properties</p>
<ul>
<li>1순위 외부 설정, 우선순위가 가장 높음</li>
</ul>
</li>
</ul>
</li>
<li>
<p>리모트 애플리케이션</p>
<ul>
<li>원격에서 할 수 있는데. 추천은 안함(복잡함, 보안적 측면 문제)</li>
</ul>
</li>
</ul>
</div><div class="post__footer"><div class="post-tags"><a href="/tag/Spring/" class="post-tags__link"><span>#</span> Spring
		</a><a href="/tag/SpringBoot/" class="post-tags__link"><span>#</span> SpringBoot
		</a><a href="/tag/Backend/" class="post-tags__link"><span>#</span> Backend
		</a><a href="/tag/SpringStarter/" class="post-tags__link"><span>#</span> SpringStarter
		</a></div></div></div><div class="post-comments" style="display:none;"></div><div class="post-comments"></div><div class="author post-author"><img alt="Author image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 180 180' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-bfb91fc8d3516221a47de6ec13d7cf4f'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='5'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-bfb91fc8d3516221a47de6ec13d7cf4f)' width='180' height='180' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABAAEADASIAAhEBAxEB/8QAHAAAAQUBAQEAAAAAAAAAAAAABgEDBAcIBQIA/8QAMBAAAQMDAgQFAwQDAQAAAAAAAQIDBAAFERIhBhMxUQciQWFxFJGhFiMygRVCsdH/xAAYAQADAQEAAAAAAAAAAAAAAAABAgMABP/EACARAAICAgICAwAAAAAAAAAAAAECABEDEiExBCITQUL/2gAMAwEAAhEDEQA/ALKr4mmyo5pdVPJXFNIakR4ynUlaspbAznHX4qp/EzxOTw9LctVnQ07cEpBW%2b4QW2sjYY9VfOMe9LuLqNowFyzx0pDWTX%2bM%2bIZMovOcQT9ZUFYbdKQD8DbHxWg/Cy7XriC0xZl%2bTEYiyBy4i06ua%2bpOcqV/qAcHHqaBcDuMqMxoQtNeTUiayGVJKM6TsQeqVDqKjUVYMLEzKVNGeiupMCOZTnZtP8jTcSGp/C3Mpa/JqJfLythf0VrbQp0DzFX8UDuankyfle4%2bLFfs/AnL4x42t9puRgPsZitMuPPSCSSjSkkBCR1Vt%2bM1Stv8ADfibjGQ5f5S4Mf6xfNCJWvUpJ6FSUjbbHrmrNn8PNTo036xXOkymy2VgYCQrY4HxtRBw5DegyHhHhpiAq0lZeLnNGNlHI2PpjeoHbH33Oz0zGh0JRvF/hfxBbYvPiRbc4003%2b43BdcKlnfK9Lm5PsD0HSjjwB46uHEN/uFivKkGN9Ml2KylGAyWyElI7DGDjvRRf1SHJMlEh66ocLepK2NJYwTgJ0k5J37dM71WEaR%2bkfEW0Xvkqw4tUeWllJ8yVDBUB3Gx/qtvtw0Pw6cpNFXZCkMuDqcZz8Vy0kFIPcV3w7HutuS7GcS4hadSVJ6GhoL5bqmVbLRtg0%2bA0SJDyFNAx%2b/XUsIDMfd1Ww/8Aa4DCNIJJJKjlSj1Ue9DDvHvDqOfImXNlK9ZSkDKjgdgM1HV4l8MJjB4zHic45YYUV/bpj%2b6piUKLPcjmcsaHUN0Hzox1yK6z85wJy0yXloQf2kKAVn060B/rOxC1xLg7cEMsSgS0Fg6zg4PlGTsaM7KLbxxZ2btZ5KCtOWXkLRgpUOpwfQ7GtlTeiJTxMioSH6ntcpSLQtU1gIcGdshRx6Zx61XCoKLnci88hTSUkltWN09Onuf%2bVYlybs/DlsU2FtyX86iEKyhJ7k%2bp9qDVXBMyQ64CnmZBWkHdORtkfGKgMPNMZ0t5OtsghxwI%2bhhKoKAEtgakJAwB3p/iqERiUyPOnc49aGLDK5FxYWFY82D8GrGdQmRG3wQRRcatxJo26%2b0wVpK0kDb4pWm3HGwlIyoq0bd6QOBCCTXbtLIMaK6oDSnU8fk9KuBc4pDlQzGmuac%2bVsKH23/Io/8ADriViySXY90b5lskJAdSUatB9FY6/b27UKzG%2bdIQsbamSPuRXp0aClY9Nj8U2sIYjmWNfeIOHks86LeA7g4RFRGWgJHck7mq2uV0luXQ3GO%2b8zLkrAy2op0J7bewFNTUnWgBX8t6bbwJaUkbcsn8ikCAG5R8zMoX6EIovGd8YkM65ijo3xoTggeh23PvWrrFLTMtzLqCClxtK0/BGaxo6%2bhSlKO2lRT8d60t4MXX/IcFW4knWyDHUD1Gk4H4xSZR0Y%2bA8kT/2Q==' /%3e%3c/svg%3e" width="180" data-src="/assets/static/author.e6b6009.98a7113f4952b5eaa532b5d16696f13d.jpg" data-srcset="/assets/static/author.e6b6009.98a7113f4952b5eaa532b5d16696f13d.jpg 180w" data-sizes="(max-width: 180px) 100vw, 180px" class="author__image g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/author.e6b6009.98a7113f4952b5eaa532b5d16696f13d.jpg" class="author__image g-image g-image--loaded" width="180" alt="Author image"></noscript><!----><p class="author__intro">To be a Pro in Web developer</p><p class="author__links"><a href="//linkedin.com/in/myeonghun-park-7693a1184/">📘 Linkedin</a><a href="//azderica.github.io/til/docs/intro">📚 TIL</a><a href="//github.com/Azderica">💻 GitHub</a><a href="//azderica.github.io/Portfolio/" target="_blank">✨ Portfolio</a></p></div></main><footer class="footer"><span class="footer__copyright">Copyright © 2024.
    </span><span class="footer__links">Powered by <a href="//gridsome.org"> Gridsome </a></span></footer></div> <script src="/assets/js/app.e68d9618.js" defer></script><script src="/assets/js/page--src--templates--post-vue.e5244b0f.js" defer></script>
</body>

</html>