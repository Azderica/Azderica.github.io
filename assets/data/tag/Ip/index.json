{"hash":"413fde1b7460f5c0a9c6e7c070d0a68a0cbdb4b7","data":{"tag":{"title":"Ip","belongsTo":{"edges":[{"node":{"title":"[Network] NAT 개념잡기?","path":"/00-network-nat/","date":"26. January 2021","timeToRead":4,"description":"NAT의 개념을 잡습니다.","content":"<h1 id=\"nat\"><a href=\"#nat\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>NAT</h1>\n<h2 id=\"nat의-개념\"><a href=\"#nat%EC%9D%98-%EA%B0%9C%EB%85%90\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>NAT의 개념</h2>\n<p>NAT는 Network Address Translate의 약자로서, 네트워크 주소를 변환하는 역할을 합니다. 좀 더 자세하게 이야기 하자면 IP패킷의 TCP/UDP 포트 숫자 및 목적지의 IP 주로를 재기록 하면서 라우터를 통해서 네트워크 트래픽을 주고 받는 기술입니다.</p>\n<p>일반적으올 border router의 기능을 수행하는 데, 이는 <strong>내부 망에서는 사설 IP 주소를 사용하여 통신을 하고 외부와의 통신에는 NAT를 거쳐 공인 IP 주소로 자동 변환하는 역할</strong>을 수행합니다.</p>\n<br/>\n<h2 id=\"nat-사용-이유\"><a href=\"#nat-%EC%82%AC%EC%9A%A9-%EC%9D%B4%EC%9C%A0\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>NAT 사용 이유</h2>\n<p>NAT를 이용하는 이유는 사설 네트워크에 속한 여러 개의 호스트가 하나의 공인 IP 주소를 통해서 사용하여 인터넷에 접속하기 위함입니다.</p>\n<p>NAT는 IPv4의 주소 부족 문제를 해결하기 위해서 고려했으며, 사설 네트워크 주소를 사용하는 망(private)에서 외부의 공인망(public)과의 통신을 위해서 네트워크 주소를 변환하는 것입니다.</p>\n<br/>\n<h2 id=\"nat-동작-원리\"><a href=\"#nat-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>NAT 동작 원리</h2>\n<p>NAT는 1:1의 주소 매핑을 수행하기 때문에 NAT 라우터로 들어온 inside -> outside 패킷만이 주소 전환의 대상이 됩니다. IP의 헤더부분을 체크하여, NAT 테이블에 의해 해당 주소로 바꾼다음 checksum을 다시 계산하여 IP의 헤더를 바꾸는 방법으로 동작합니다.</p>\n<p>Application Layer까지 NAT 주소 전환이 반영이 되어야하므로, NAT는 IP 주소의 참조내용을 담고 있는 Application data 부분을 새로운 주소로 변환하여 수행합니다.</p>\n<br/>\n<h2 id=\"nat의-변환-방식\"><a href=\"#nat%EC%9D%98-%EB%B3%80%ED%99%98-%EB%B0%A9%EC%8B%9D\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>NAT의 변환 방식</h2>\n<h3 id=\"full-cone-natone-to-one-nat\"><a href=\"#full-cone-natone-to-one-nat\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Full-cone NAT(one-to-one NAT)</h3>\n<p><img src=\"https://user-images.githubusercontent.com/42582516/105776816-9b553b80-5fac-11eb-9bca-3a04d0cacd06.png\" alt=\"Full-cone NAT(one-to-one NAT)\"></p>\n<h3 id=\"address-restricted-cone-nat\"><a href=\"#address-restricted-cone-nat\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>(Address)-restricted-cone NAT</h3>\n<p><img src=\"https://user-images.githubusercontent.com/42582516/105776803-95f7f100-5fac-11eb-8223-59f548991746.png\" alt=\"(Address)-restricted-cone NAT\"></p>\n<h3 id=\"port-restricted-cone-nat\"><a href=\"#port-restricted-cone-nat\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Port-restricted cone NAT</h3>\n<p><img src=\"https://user-images.githubusercontent.com/42582516/105776834-a0b28600-5fac-11eb-822a-6a628272c2e1.png\" alt=\"Port-restricted cone NAT\"></p>\n<h3 id=\"symmetric-nat\"><a href=\"#symmetric-nat\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Symmetric NAT</h3>\n<p><img src=\"https://user-images.githubusercontent.com/42582516/105776840-a5773a00-5fac-11eb-81d5-26e2d2c58443.png\" alt=\"Symmetric NAT\"></p>\n<br/>\n<h2 id=\"nat의-장단점\"><a href=\"#nat%EC%9D%98-%EC%9E%A5%EB%8B%A8%EC%A0%90\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>NAT의 장단점</h2>\n<h3 id=\"nat의-장점\"><a href=\"#nat%EC%9D%98-%EC%9E%A5%EC%A0%90\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>NAT의 장점</h3>\n<ul>\n<li>\n<p>인터넷의 공인 IP주소를 절약할 수 있습니다.</p>\n<ul>\n<li>공인 IP를 다수가 함께 사용할 수 있으므로 이를 절약할 수 있습니다.</li>\n</ul>\n</li>\n<li>\n<p>공공망고 연결되는 사용자들의 고유한 사설망을 침입자들로 부터 보호할 수 있습니다.</p>\n<ul>\n<li>공개된 인터넷과 사설망 사이에 방화벽을 설치하여 외부공격으로부터 사용자의 통신망을 보호할 수 있습니다.</li>\n<li>NAT 설정 시, 라우터는 자신에게 할당된 공인 IP주소만 외부로 알려지고 내부에서는 사설 IP를 사용하기 때문에 외부침입자는 사설 IP를 몰라 공격이 힘들어집니다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"nat의-단점\"><a href=\"#nat%EC%9D%98-%EB%8B%A8%EC%A0%90\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>NAT의 단점</h3>\n<ul>\n<li>Ent-to-End간의 추적(IP Trace)가 어려워집니다. 여러 개의 NAT 라우터에 의해 multiple NAT 가 적용되면 추적이 더 어려워집니다. (보안측에서는 장점입니다)</li>\n<li>NAT 라우터를 거치는 모든 패킷을 scan해야해서 switching path delay 가 길어집니다.</li>\n</ul>\n<br/>\n<h2 id=\"마무리\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>마무리.</h2>\n<p>간단하게 NAT에 대해서 정리했습니다.</p>\n<hr>\n<p><strong>출처</strong></p>\n<ul>\n<li><a href=\"https://ko.wikipedia.org/wiki/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC_%EC%A3%BC%EC%86%8C_%EB%B3%80%ED%99%98\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://ko.wikipedia.org/wiki/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC_%EC%A3%BC%EC%86%8C_%EB%B3%80%ED%99%98</a></li>\n<li><a href=\"https://m.blog.naver.com/PostView.nhn?blogId=ssdyka&#x26;logNo=221376674886&#x26;proxyReferer=https:%2F%2Fwww.google.com%2F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://m.blog.naver.com/PostView.nhn?blogId=ssdyka&#x26;logNo=221376674886&#x26;proxyReferer=https:%2F%2Fwww.google.com%2F</a></li>\n<li><a href=\"https://jwprogramming.tistory.com/30\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://jwprogramming.tistory.com/30</a></li>\n</ul>\n"}}]}}},"context":{}}