{"hash":"ae819642c9f6ee0978dccc3fd45c022929c76add","data":{"tag":{"title":"Other","belongsTo":{"edges":[{"node":{"title":"[Server] 로그 분석 방법","path":"/00-analysis-log/","date":"4. April 2021","timeToRead":5,"description":"리눅스 서버와 윈도우 서버 로그 분석 방법에 대해 정리합니다.","content":"<h1 id=\"서버-로그-분석\"><a href=\"#%EC%84%9C%EB%B2%84-%EB%A1%9C%EA%B7%B8-%EB%B6%84%EC%84%9D\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>서버 로그 분석</h1>\n<p>서비스 개발을 하다보면, 장애나 이슈가 발생할 수도 있고 또한 허용되지 않은 사용자가 접근할 수도 있습니다. 이때 보통 서버의 로그를 분석하는 경우가 있는데 이에 대해 정리합니다.</p>\n<p>해당 게시글에서는 리눅스 서버와 윈도우 서버에 대해 정리합니다.</p>\n<br/>\n<h2 id=\"linux-서버\"><a href=\"#linux-%EC%84%9C%EB%B2%84\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Linux 서버</h2>\n<p>일반적으로 Linux / Unix 기반의 대부분 서버의 로그 파일은 \"/var/log\"에 저장됩니다. 대부분이 text 방식으로 저장되며 <code class=\"language-text\">*.log</code>의 형식을 지니고 있습니다.</p>\n<p>일반적으로 <code class=\"language-text\">cat</code>, <code class=\"language-text\">less</code> 명령어를 사용해서 확인하고, <code class=\"language-text\">*.gz</code> 파일의 경우는 <code class=\"language-text\">zcat</code>을 통해서 압축을 풀지않고 확인할 수 있습니다. 텍스트 형식이 아닌 log 파일 들은 특정 명령어를 사용해서 확인해야합니다.</p>\n<h3 id=\"linux-log-file\"><a href=\"#linux-log-file\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Linux Log File</h3>\n<p>핵심 로그파일은 다음과 같습니다.</p>\n<table>\n<thead>\n<tr>\n<th>로그이름</th>\n<th>로그 파일명</th>\n<th>설명</th>\n<th>관련 데몬</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>커널 log</strong></td>\n<td><code class=\"language-text\">/dev/console</code></td>\n<td>콘솔에 뿌려지는 로그</td>\n<td>kernel</td>\n</tr>\n<tr>\n<td><strong>시스템 log</strong></td>\n<td><code class=\"language-text\">/var/log/messages</code></td>\n<td>리눅스 커널로그 및 주 로그</td>\n<td>sysload</td>\n</tr>\n<tr>\n<td>보안 log</td>\n<td><code class=\"language-text\">/var/log/secure</code></td>\n<td>보안 인증 관련 로그</td>\n<td>xinetd</td>\n</tr>\n<tr>\n<td>메일 log</td>\n<td><code class=\"language-text\">/var/log/maillog</code></td>\n<td>메일 로그</td>\n<td>sendmail popper</td>\n</tr>\n<tr>\n<td>크론 log</td>\n<td><code class=\"language-text\">/var/log/cron</code></td>\n<td>crond에 의한 로그</td>\n<td>crond</td>\n</tr>\n<tr>\n<td>부팅 log</td>\n<td><code class=\"language-text\">/var/log/boot.log</code></td>\n<td>시스템 부팅시의 로그</td>\n<td>kernel</td>\n</tr>\n<tr>\n<td>커널 부트 메시지 log</td>\n<td><code class=\"language-text\">/var/dmesg</code></td>\n<td>부팅될 당시의 각종 메시지들 저장</td>\n<td>kernel</td>\n</tr>\n<tr>\n<td>커널 log</td>\n<td><code class=\"language-text\">/var/log/wtmp</code></td>\n<td>시스템 전체 로그인 기록 저장</td>\n<td>kernel</td>\n</tr>\n<tr>\n<td>커널 log</td>\n<td><code class=\"language-text\">/var/log/utmp</code></td>\n<td>현재 로그인 사용자에 대한 기록, 사용자 ip를 저장</td>\n<td>kernel</td>\n</tr>\n<tr>\n<td>FTP log</td>\n<td><code class=\"language-text\">/var/log/xferlog</code></td>\n<td>ftp 로그</td>\n<td>ftp</td>\n</tr>\n<tr>\n<td><strong>웹 log</strong></td>\n<td><code class=\"language-text\">/var/log/httpd/access_log</code></td>\n<td>아파치(웹서버) 로그 저장</td>\n<td>httpd</td>\n</tr>\n<tr>\n<td>웹 log</td>\n<td><code class=\"language-text\">/var/log/httpd/error_log</code></td>\n<td>아파치(웹서버) 에러 저장</td>\n<td>httpd</td>\n</tr>\n<tr>\n<td>네임서버 log</td>\n<td><code class=\"language-text\">/var/log/named.log</code></td>\n<td>네임서버( 로그</td>\n<td>name</td>\n</tr>\n</tbody>\n</table>\n<p>이 중 핵심적인 로그를 더 자세하게 보면 다음과 같습니다.</p>\n<h3 id=\"콘솔-로그-devconsole\"><a href=\"#%EC%BD%98%EC%86%94-%EB%A1%9C%EA%B7%B8-devconsole\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>콘솔 로그 (/dev/console)</h3>\n<ul>\n<li>커널에 관련된 내용을 시스템 콘솔에 뿌려주는 로그입니다.</li>\n<li>messages 내용과 일치하는 것은 아니지만 <strong>시스템에 관련된 중요한 내용</strong>(시스템 풀, 다운 등)에 대한 로그를 확인할 수 있습니다.</li>\n<li>/dev/console을 통해서 콘솔로 로그를 뿌려줍니다.</li>\n</ul>\n<h3 id=\"시스템-로그-varlogmessages\"><a href=\"#%EC%8B%9C%EC%8A%A4%ED%85%9C-%EB%A1%9C%EA%B7%B8-varlogmessages\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>시스템 로그 (/var/log/messages)</h3>\n<ul>\n<li>접속 시 인증에 대한 것, 메일에 관한 내용, 시스템에 관한 변경사항 등인 시스템에 대한 전반적인 로그를 기록합니다.</li>\n<li>시스템 관리자가 가장 신경써야하는 로그 파일이며, 보안사고 발생 시 가장 먼저 분석하는 파일입니다.</li>\n<li>su(root 권한)에 대한 실패 로그와, 데몬 비활성 로그, 부팅 실패 로그와 같이 다양한 로그들이 필요합니다.</li>\n<li><code class=\"language-text\">dmesg</code>를 사용하면 명령어를 확인할 수 있습니다.</li>\n</ul>\n<h3 id=\"보안-로그-varlogsecure\"><a href=\"#%EB%B3%B4%EC%95%88-%EB%A1%9C%EA%B7%B8-varlogsecure\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>보안 로그 (/var/log/secure)</h3>\n<ul>\n<li>모든 접속과 관련하여 언제 어디서 어떤 서비스를 사용했는지 기록합니다.</li>\n<li>login, tcp_wrappers, xinetd 관련 로그들이 남습니다.</li>\n</ul>\n<br/>\n<h2 id=\"window-서버\"><a href=\"#window-%EC%84%9C%EB%B2%84\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Window 서버</h2>\n<p>일반적으로 윈도우 서버는 IIS 서버로 돌아가고, 많은 회사들이 리눅스 서버를 사용하지만 가끔 사용하는 서버가 있어서 이에 대해서 정리합니다. (그 예외에 속하는 회사이지만...)</p>\n<p>IIS 서버에 접속하는 방법은 다음과 같습니다.</p>\n<ul>\n<li><code class=\"language-text\">제어판</code> => <code class=\"language-text\">관리도구</code> => <code class=\"language-text\">이벤트뷰어</code></li>\n</ul>\n<p>해당 이벤트 로그에 접속하여서, <strong>Windows 로그</strong> 중 중요한 것은 다음과 같습니다.</p>\n<h3 id=\"응용프로그램-로그\"><a href=\"#%EC%9D%91%EC%9A%A9%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8-%EB%A1%9C%EA%B7%B8\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>응용프로그램 로그</h3>\n<ul>\n<li>응용프로그램 구동 중 특이사항이 발생될 때 저장되는 로그입니다.</li>\n</ul>\n<h3 id=\"보안-로그\"><a href=\"#%EB%B3%B4%EC%95%88-%EB%A1%9C%EA%B7%B8\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>보안 로그</h3>\n<ul>\n<li>윈도우 보안과 관련된 정보들이 저장되는 로그입니다.</li>\n<li>사용자가 지정한 특정 작업을 수행할 때, 항목이 기록됩니다.</li>\n<li>성공한 작업과 실패한 작업을 모두 감사합니다.</li>\n<li>다른 로그와 다르게 보안 로그는 감사정책이 설정되어야만 기록이 됩니다.</li>\n</ul>\n<h3 id=\"시스템-로그\"><a href=\"#%EC%8B%9C%EC%8A%A4%ED%85%9C-%EB%A1%9C%EA%B7%B8\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>시스템 로그</h3>\n<ul>\n<li>윈도우 시스템을 구동하거나 운영하면서 발생된 충돌이나 에러 등이 저장되는 로그입니다.</li>\n</ul>\n<br/>\n<h2 id=\"마무리\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>마무리</h2>\n<p>간단하게 로그 파일을 정리했습니다. 좀 더 자세하게 보기위해서는 아래의 출처를 참고하면 좋을 듯합니다.</p>\n<hr>\n<p><strong>출처</strong></p>\n<ul>\n<li><a href=\"https://blog.naver.com/PostView.nhn?blogId=kdi0373&#x26;logNo=220522832069\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">리눅스 로그파일 종류 및 분석</a></li>\n<li><a href=\"https://blog.naver.com/kdi0373/220524577856\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">윈도우 로그파일 종류 및 분석</a></li>\n</ul>\n"}}]}}},"context":{}}