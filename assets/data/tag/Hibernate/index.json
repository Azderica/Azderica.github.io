{"hash":"a494b8b1778660c606708ae3dd5d59774a4a3863","data":{"tag":{"title":"Hibernate","belongsTo":{"edges":[{"node":{"title":"[DB] ORM에 대해 정리하기","path":"/00-db-orm/","date":"3. April 2021","timeToRead":5,"description":"ORM에 대해 정리합니다. ","content":"<h1 id=\"orm에-대해\"><a href=\"#orm%EC%97%90-%EB%8C%80%ED%95%B4\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ORM에 대해</h1>\n<p>지난 게시글에서는 jpa에 대해서 정리하면서 ORM에 대한 개념을 언급했는데 오늘은 ORM에 대한 상세 내용을 정리합니다.</p>\n<ul>\n<li><a href=\"https://azderica.github.io/00-java-jpa/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">JPA 정리글</a></li>\n</ul>\n<br/>\n<h2 id=\"영속성persistence\"><a href=\"#%EC%98%81%EC%86%8D%EC%84%B1persistence\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>영속성(Persistence)</h2>\n<p>먼저 ORM에 들어가기전에 영속성에 대한 개념을 정리합니다.</p>\n<p>영속성은 다음을 의미합니다.</p>\n<ul>\n<li>데이터를 생성한 프로그램이 종료되더라도 사라지지 않는 데이터 특성</li>\n<li>영속성이 없는 데이터는 단지 메모리에서만 존재하므로, 프로그램 종료 시 모두 잃어버립니다.</li>\n<li>\n<p><strong>Object Persistence(영구적인 객체)</strong></p>\n<ul>\n<li>메모리 상의 데이터를 File이나 DB를 활용해서 영속성을 부여합니다.</li>\n</ul>\n</li>\n</ul>\n<p>자바에서 데이터를 저장하는 방법은 다음과 같습니다.</p>\n<ul>\n<li>JDBC</li>\n<li>Spring JDBC</li>\n<li><strong>Persistence Framework</strong>(Hibernate, Mybatis...)</li>\n</ul>\n<blockquote>\n<p>Persistence Framework</p>\n</blockquote>\n<p>Persistence Layer</p>\n<ul>\n<li>데이터베이스에서 데이터를 읽어(Read) 객체화하거나, 데이터 베이스에 데이터를 저장(Create), 수정(Update), 삭제(Delete)하는 역할</li>\n</ul>\n<p><strong>Persistence Framework</strong></p>\n<ul>\n<li>JDBC 프로그래밍의 복잡함이나 번거로움 없이 간단한 작업만으로 데이터베이스와연동되는 시스템을 빠르게 개발할 수 있습니다.</li>\n<li>\n<p>일반적으로 SQL Mapper와 ORM으로 나눠집니다.</p>\n<ul>\n<li>\n<p><code class=\"language-text\">SQL Mapper</code></p>\n<ul>\n<li>SQL &#x3C;-> SQL Mapper &#x3C;-> Object 필드</li>\n<li>SQL 문장으로 직접 데이터베이스 데이터를 다룬다.</li>\n<li>SQL을 직접 작성합니다.</li>\n<li><strong>Mybatis, JdbcTemplates(Spring)</strong></li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">ORM</code></p>\n<ul>\n<li>Database data &#x3C;-> ORM &#x3C;-> Object 필드</li>\n<li>객체를 통해서 간접적으로 데이터베이스 데이터를 다룹니다.</li>\n<li>객체와 관계형 데이터베이스의 데이터를 자동으로 맵핑시켜줍니다.</li>\n<li><strong>JPA, Hibernate</strong> 등이 있습니다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<br/>\n<h2 id=\"orm의-정의\"><a href=\"#orm%EC%9D%98-%EC%A0%95%EC%9D%98\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ORM의 정의</h2>\n<p>ORM(Object-relational mapping)은 <strong>객체(클래스)와 관계(RDB, Relational Database)와의 설정</strong>을 의미합니다.</p>\n<p>객체 지향 프로그래밍은 클래스를 사용하고 관계형 데이터 베이스는 테이블을 사용합니다. 여기서 객체 모델과 관계형 모델간에 불일치가 발생하게 되는데, ORM은 이러한 <strong>불일치를 객체간의 관계를 바탕으로 SQL을 자동으로 생성하여 불일치를 해결</strong>합니다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/42582516/111995242-0ca00d80-8b5c-11eb-9662-7f60f1dfc0c7.png\" alt=\"ORM\"></p>\n<p>해당 그림처럼, Object와 DB 데이터 사이에서 매핑을 합니다.</p>\n<br/>\n<h2 id=\"orm의-장단점\"><a href=\"#orm%EC%9D%98-%EC%9E%A5%EB%8B%A8%EC%A0%90\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ORM의 장단점</h2>\n<h3 id=\"orm-장점\"><a href=\"#orm-%EC%9E%A5%EC%A0%90\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ORM 장점</h3>\n<ul>\n<li>\n<p>객체 지향적 코드를 사용함으로서 직관적이보 비지니스 로직에 집중할 수 있도록 도와줍니다.</p>\n<ul>\n<li>CRUD를 위한 SQL문을 작성할 필요는 없습니다. (쿼리 작성은 필요)</li>\n<li>각 객체(Model) 별로 코드를 작성하므로 가독성이 높아집니다.</li>\n</ul>\n</li>\n<li>\n<p>재사용 및 유지 보수의 편리성이 증가합니다.</p>\n<ul>\n<li>ORM은 독립적으로 작성이 되어 있고 해당 객체들은 재사용이 가능합니다.</li>\n</ul>\n</li>\n<li>\n<p>DBMS에 대한 종속성이 줄어듭니다.</p>\n<ul>\n<li>대부분의 ORM은 DB에 비종속적입니다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"orm-단점\"><a href=\"#orm-%EB%8B%A8%EC%A0%90\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ORM 단점</h3>\n<ul>\n<li>\n<p>완벽한 ORM만으로는 구현하기가 어렵습니다.</p>\n<ul>\n<li>사용하기는 편하지만 설계는 신중해야합니다.</li>\n<li>프로젝트의 복잡성이 높아질 경우, 난이도가 높아집니다.</li>\n<li>잘못 구현하는 경우 속도 저하 및 심한 경우, 일관성이 무너질 수도 있습니다.</li>\n</ul>\n</li>\n<li>프로시저가 많은 시스템에서는 ORM의 객체 지향적인 장점을 활용하기가 어렵습니다.</li>\n</ul>\n<br/>\n<h2 id=\"orm의-종류\"><a href=\"#orm%EC%9D%98-%EC%A2%85%EB%A5%98\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ORM의 종류</h2>\n<p>앞서 이야기한 것외에도 다양한 ORM이 존재합니다.</p>\n<ul>\n<li>Flask : SQLAlchemy</li>\n<li>Django : 내장 ORM</li>\n<li><strong>Node.js : Sequalize</strong></li>\n<li><strong>Java : Hybernate, JPA</strong></li>\n<li>GraphQL : Prisma</li>\n</ul>\n<p>해당 ORM에 대해서는 직접 사용해보면서 차이를 느껴보고 개념을 이해하는 것을 추천합니다. (개인적으로 사용해본 것은 Sequalize와 Hybernate, JPA이지만, 실무에서는 따로 환경이 안나와서 써보지 못했습니다...)</p>\n<br/>\n<h2 id=\"마무리\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>마무리.</h2>\n<p>핵심적인 내용은 정리르 했으나, 개인적으로 알고 싶은 내용인 queryDsl과 Jooq에 대해서는 따로 정리를 하지 못했습니다. 해당 글은 좀 더 개념을 잡아 정리하겠습니다.</p>\n<hr>\n<p><strong>출처</strong></p>\n<ul>\n<li><a href=\"https://velog.io/@alskt0419/ORM%EC%97%90-%EB%8C%80%ED%95%B4%EC%84%9C...-iek4f0o3fg\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ORM이란?</a></li>\n<li><a href=\"https://changrea.io/jpa/orm/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ORM</a></li>\n<li><a href=\"https://velog.io/@alskt0419/ORM%EC%97%90-%EB%8C%80%ED%95%B4%EC%84%9C...-iek4f0o3fg\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ORM에 대해서</a></li>\n<li><a href=\"https://gmlwjd9405.github.io/2019/02/01/orm.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">DB, ORM이란</a></li>\n</ul>\n"}},{"node":{"title":"[Java] JPA에 대해 정리하기","path":"/00-java-jpa/","date":"22. March 2021","timeToRead":5,"description":"JPA에 대해 정리합니다. ","content":"<h1 id=\"jpa\"><a href=\"#jpa\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>JPA</h1>\n<p>오늘은 앞으로 공부할 QueryDsl, Jooq 등의 개념을 공부하기 위해서 앞서 가장 기본적인 내용을 정리합니다.</p>\n<h2 id=\"jpa-개념\"><a href=\"#jpa-%EA%B0%9C%EB%85%90\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>JPA 개념</h2>\n<p>JPA는 <strong>Java Persistence API</strong> 의 약자로서, RDBMS와 OOP 객체 사이의 불일치에서 오는 패러다임을 해결하기 위해서 만들어졌습니다. 이러한 JPA는 ORM(Object-Relational Mapping) 기술입니다.</p>\n<h3 id=\"orm\"><a href=\"#orm\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ORM?</h3>\n<p>ORM이란 Object Relational Mapping, 객체-관계 매핑의 줄임말입니다.</p>\n<p>좀 더 풀어 설명하자면 OOP의 객체 구현 클래스와 RDBMS에서 사용하는 테이블을 자동으로 매핑하는 것을 의미합니다. 이 때, 클래스와 테이블은 서로 기존부터 호환 가능성을 두고 만들어진 것이 아니므로 불일치가 발생하는데 이를 ORM을 통해서 객체 간의 관계를 바탕으로 SQL문을 자동으로 생성하여 불일치를 해결합니다. 이 방법을 통해서 SQL문을 짤 필요없이 객체를 통해 간접적으로 데이터베이스를 조작할 수 있습니다.</p>\n<p>이를 이미지로 나타내면 다음과 같습니다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/42582516/111995242-0ca00d80-8b5c-11eb-9662-7f60f1dfc0c7.png\" alt=\"image\"></p>\n<p>좀 더 자세한 ORM은 아래 글을 참조해주세요.</p>\n<ul>\n<li><a href=\"https://azderica.github.io/00-db-orm/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ORM</a></li>\n</ul>\n<h3 id=\"그래서-jpa를-좀-더-설명하자면\"><a href=\"#%EA%B7%B8%EB%9E%98%EC%84%9C-jpa%EB%A5%BC-%EC%A2%80-%EB%8D%94-%EC%84%A4%EB%AA%85%ED%95%98%EC%9E%90%EB%A9%B4\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>그래서 JPA를 좀 더 설명하자면.</h3>\n<p>앞서 이야기 나온 ORM 기술을 구현하기 위해 나온 프레임워크가 Hibernate이고, 그 외에도 다른 프레임워크(CoCobase, TopLink) 등이 등장했습니다. 이러한 ORM 구현 프레임워크에 대한 <strong>표준화</strong>가 필요하게 되었는데 이가 바로 JPA입니다.</p>\n<p>JPA는 어플리케이션과 DBMS 사이의 인터페이스 역할을 해주기 때문에. 개발자는 JPA 인터페이스에 맞춰우 구현되어 있는 기능을 사용하면 됩니다.</p>\n<p>이를 잘 표현한 이미지는 다음과 같습니다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/42582516/111996259-2b52d400-8b5d-11eb-8fdb-1f6a91096d4c.png\" alt=\"image\"></p>\n<p>다음과 같이, 개발자는 SQL를 직접 사용할 필요없이 사용할 수 있습니다.</p>\n<br/>\n<h2 id=\"jpa-동작-과정\"><a href=\"#jpa-%EB%8F%99%EC%9E%91-%EA%B3%BC%EC%A0%95\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>JPA 동작 과정</h2>\n<p>JPA는 다음과 같이 동작합니다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/42582516/112302631-a394d300-8cde-11eb-8c1e-3693ae32a978.png\" alt=\"image\"></p>\n<p>JPA는 애플리케이션과 JDBC 사이에서 동작합니다.</p>\n<ul>\n<li>개발자가 JPA 사용시, JPA 내부에서 JDBC API를 사용하여 SQL을 호출하고 DB와 통신합니다.</li>\n</ul>\n<br/>\n<h2 id=\"jpa를-사용해야하는-이유\"><a href=\"#jpa%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%95%BC%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>JPA를 사용해야하는 이유?</h2>\n<h3 id=\"1-sql-중심-개발---객체-중심-개발\"><a href=\"#1-sql-%EC%A4%91%EC%8B%AC-%EA%B0%9C%EB%B0%9C---%EA%B0%9D%EC%B2%B4-%EC%A4%91%EC%8B%AC-%EA%B0%9C%EB%B0%9C\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>1. SQL 중심 개발 -> 객체 중심 개발</h3>\n<p>SQL 중심의 개발 문제를 해결합니다.</p>\n<p>SQL 중심의 개발 문제는 다음과 같습니다.</p>\n<ul>\n<li>지루한 코드가 반복됩니다.</li>\n<li>객체 지향과 RDB 간의 패러다임이 불일치됩니다.</li>\n<li>객체 지향은 상속 관계를 지원합니다.</li>\n<li>모델링 과정에서의 문제를 해결합니다.</li>\n<li>\n<p>객체 그래프 탐색에서의 문제를 해결합니다.</p>\n<ul>\n<li>SQL 중심 개발은 객체 그래프를 탐색할 수 없습니다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"2-생산성\"><a href=\"#2-%EC%83%9D%EC%82%B0%EC%84%B1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>2. 생산성</h3>\n<ul>\n<li>JPA을 사용함으로서 <code class=\"language-text\">java.collection</code>처럼 편하게 사용가능합니다.</li>\n<li>\n<p>간단한 CRUD를 제공합니다.</p>\n<ul>\n<li><code class=\"language-text\">jpa.persist</code>, <code class=\"language-text\">find</code>, <code class=\"language-text\">set~</code>, <code class=\"language-text\">jpa.remove</code></li>\n</ul>\n</li>\n<li>수정이 간단합니다.</li>\n</ul>\n<h3 id=\"3-유지보수\"><a href=\"#3-%EC%9C%A0%EC%A7%80%EB%B3%B4%EC%88%98\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>3. 유지보수</h3>\n<ul>\n<li>기존처럼 모든 SQL을 수정할 필요가 없습니다.</li>\n<li>JPA에서는 필드만 추가하고, SQL은 JPA가 처리합니다.</li>\n</ul>\n<h3 id=\"4-패러다임-불일치의-해결\"><a href=\"#4-%ED%8C%A8%EB%9F%AC%EB%8B%A4%EC%9E%84-%EB%B6%88%EC%9D%BC%EC%B9%98%EC%9D%98-%ED%95%B4%EA%B2%B0\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>4. 패러다임 불일치의 해결</h3>\n<ul>\n<li>상속, 연관관계, 객체 그래프 탐색, 비교와 같은 패러다임의 불일치 문제를 해결해줍니다.</li>\n</ul>\n<h3 id=\"5-성능적-이슈\"><a href=\"#5-%EC%84%B1%EB%8A%A5%EC%A0%81-%EC%9D%B4%EC%8A%88\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>5. 성능적 이슈</h3>\n<ul>\n<li>JPA는 애플리케이션과 데이터베이스 사이에서 다양한 성능 최적화 기능을 제공합니다.</li>\n<li>Ex. 동일 데이터 find로 2번 접근하는 경우, 재사용을 통해서 사용합니다.</li>\n</ul>\n<h3 id=\"6-데이터-접근-추상화와-벤더-독립성\"><a href=\"#6-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%91%EA%B7%BC-%EC%B6%94%EC%83%81%ED%99%94%EC%99%80-%EB%B2%A4%EB%8D%94-%EB%8F%85%EB%A6%BD%EC%84%B1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>6. 데이터 접근 추상화와 벤더 독립성</h3>\n<ul>\n<li>애플리케이션은 처음 선택한 데이터베이스 기술에 종속되고 다른 데이터베이스로 변경하기 어렵습니다.</li>\n</ul>\n<br/>\n<h2 id=\"jpa-사용-방법\"><a href=\"#jpa-%EC%82%AC%EC%9A%A9-%EB%B0%A9%EB%B2%95\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>JPA 사용 방법</h2>\n<p>다음과 같은 메소드 들이 있습니다.</p>\n<ul>\n<li>\n<p><code class=\"language-text\">flush()</code></p>\n<ul>\n<li>Persistence Context의 변경 내용을 데이터베이스에 반영합니다.</li>\n<li>일반적으로는 직접 사용하지는 않고, 자바 애플리케이션에서 커밋 명령이 들어왔을 때 자동으로 실행됩니다.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">detach()</code></p>\n<ul>\n<li>특정 Entity를 준영속 상태(영속 컨텍스트의 관리를 받지않음)로 바꿉니다.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">clear()</code></p>\n<ul>\n<li>Persistence Context를 초기화합니다.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">close()</code></p>\n<ul>\n<li>Persistence Context를 종료합니다.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">merge()</code></p>\n<ul>\n<li>준영속 상태의 엔티티 특징</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">find()</code></p>\n<ul>\n<li>식별자 값을 통해 Entity를 찾습니다.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">persist()</code></p>\n<ul>\n<li>생성도니 Entity를 Persistence Context와 DB에 저장합니다.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">remove()</code></p>\n<ul>\n<li>식별자 값을 통해 Entity를 삭제합니다.</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li><a href=\"https://spring.io/projects/spring-data-jpa\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Spring Data JPA Doc</a></li>\n<li><a href=\"https://tinkerbellbass.tistory.com/24\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">JPA 기본 개념</a></li>\n<li><a href=\"https://doublesprogramming.tistory.com/257\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">JPA 기본 개념 2</a></li>\n<li><a href=\"https://blog.woniper.net/255\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">JPA란 무엇인가</a></li>\n<li><a href=\"http://okminseok.blogspot.com/2019/09/jpa.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">JPA 코드 없이 적는 기본 개념</a></li>\n<li><a href=\"https://geonlee.tistory.com/207\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ORM의 장단점</a></li>\n<li><a href=\"https://gmlwjd9405.github.io/2019/08/04/what-is-jpa.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">JPA란</a></li>\n</ul>\n"}}]}}},"context":{}}