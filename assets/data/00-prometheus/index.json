{"hash":"a48ca53256831608b767e7c070d0a68a0cbdb4b7","data":{"post":{"title":"[Prometheus] Prometheus란?","path":"/00-prometheus/","date":"16. November 2020","timeToRead":4,"tags":[{"id":"Prometheus","title":"Prometheus","path":"/tag/Prometheus/"},{"id":"Monitoring","title":"Monitoring","path":"/tag/Monitoring/"},{"id":"Infra","title":"Infra","path":"/tag/Infra/"},{"id":"Backend","title":"Backend","path":"/tag/Backend/"}],"description":" 프로메테우스에 대한 기본 내용을 정리한 글입니다. ","content":"<h1 id=\"prometheus란\"><a href=\"#prometheus%EB%9E%80\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Prometheus란.</h1>\n<p>업무를 진행하다가 모니터링 시스템에 대해서 듣기 시작했다, 그 모니터링 시스템에 대해 듣다보니 공부를 해야겠다는 생각이 들어서 글을 정리한다. 모니터링 툴로 유명한 프로메테우스, Grafana 등이 있는데 오늘은 Prometheus에 대한 글을 작성해볼려고 한다.</p>\n<br/>\n<h2 id=\"prometheus란-1\"><a href=\"#prometheus%EB%9E%80-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Prometheus란</h2>\n<p>오픈소스 시스템 모니터링 및 경고 툴킷이다. 많은 회사들이 사용하고 있으며 Kubernetes에서도 Prometheus를 사용하여 매트릭 수집 및 대시보드 구축하는 방식을 사용하고 있습니다.</p>\n<p>기능을 간략하게 보자면 다음과 같습니다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/42582516/99261592-4389ae00-2860-11eb-8d93-ce2817cdc70e.png\" alt=\"Prometheus 기능\"></p>\n<p>다음은 Promethheus의 아키텍처 구조입니다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/42582516/99261600-46849e80-2860-11eb-87ba-7d573b45dba8.png\" alt=\"Prometheus 구성\"></p>\n<p>간단하게 설명하면 다음과 같습니다</p>\n<ul>\n<li><code class=\"language-text\">Jobs/exporters</code> : 실제 매트릭을 수집하는 프로세스</li>\n<li><code class=\"language-text\">exporter`` : 매트릭을 수집하고 HTTP 통신을 통해 매트릭 데이터를 가져갈 수 있게</code>/metrics`라는 HTTP 엔드포인틀 제공</li>\n<li><code class=\"language-text\">Prometheus server</code> : 이 <code class=\"language-text\">exporter</code>의 엔드포인트로 HTTP GET 요청을 날려 내트릭 정보를 수집(Pull)한다.</li>\n<li>매트릭이란?</li>\n</ul>\n<blockquote>\n<p>매트릭이란 타임스탬프와 보통 한두가지 숫자 값을 포함하는 이벤트. </p>\n<p>로그와 달리 메트릭은 주기적으로 보냅니다. 로그는 보통 무언가가 발생했을 때, 로그 파일에 추가되며 메트릭은 종종 리소스 사용 모니터링, 데이터베이스 실행 메트릭 모니터링 등에서 사용됩니다.</p>\n</blockquote>\n<br/>\n<h2 id=\"prometheus의-특징\"><a href=\"#prometheus%EC%9D%98-%ED%8A%B9%EC%A7%95\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Prometheus의 특징</h2>\n<h3 id=\"장점\"><a href=\"#%EC%9E%A5%EC%A0%90\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>장점</h3>\n<ul>\n<li>pull 방식의 구조를 채택함으로써 모든 메트릭에 대한 데이터를 중앙 서버로 보내지않아도 됩니다.</li>\n<li>Prometheus의 특성 상, 모든 데이터를 수집하지 않고 일정 주기(default 15s)로 발생하는 메트릭을 수집하여 추이나 모니터링을 어플리케이션에 무리 없이 하기 때문에 이러한 부분에서 매력적인 솔루션입니다.</li>\n<li>Prometheus를 사용하고 있는 Vendor와 open-source들이 상당히 많다. 구조가 복잡하지 않고 간단하기 때문에 특정 솔루션에 대한 export를 하는 것이 어렵지 않습니다. 특히 Kubernetes와 Docker환경에서의 서비스의 메트릭을 수집하고 분석하는 대에 집중적으로 많이 사용됩니다.</li>\n</ul>\n<h3 id=\"단점\"><a href=\"#%EB%8B%A8%EC%A0%90\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>단점</h3>\n<ul>\n<li>Scale-out이 안됩니다.(억지로는 할 수 있으나 이는 clusting보다는 Prometheus에 Prometheus를 연결에 Hieracrchy 구조를 만들어서 사용해야 한다.)</li>\n<li>모든 메트릭을 전송하지 않기 때문에 \"추이\"를 보는데는 좋지 않아서, 모든 로그를 추적하고 문제를 발생했을 때 이를 검색하여 어떤 일이 있었는지 원인을 밝히고자 할때는 사용하기 힘든 솔루션입니다.</li>\n</ul>\n<br/>\n<h2 id=\"마무리\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>마무리</h2>\n<p>간단하게 내용에 대해서 조사했습니다. 좀 더 구현하는 방식에 대해서는 직접 Prometheus를 만들어보면서 추가하겠습니다.</p>\n<hr>\n<p><strong>출처</strong></p>\n<ul>\n<li><a href=\"https://medium.com/finda-tech/prometheus%EB%9E%80-cf52c9a8785f\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://medium.com/finda-tech/prometheus%EB%9E%80-cf52c9a8785f</a></li>\n<li><a href=\"https://gompangs.tistory.com/entry/Prometheus-%EB%A5%BC-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://gompangs.tistory.com/entry/Prometheus-%EB%A5%BC-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90</a></li>\n</ul>\n","cover_image":{"type":"image","mimeType":"image/png","src":"/assets/static/PrometheusLogo.b467d9c.e553ac19b5ff245f090d7b43ff9cc063.png","size":{"width":407,"height":124},"sizes":"(max-width: 407px) 100vw, 407px","srcset":["/assets/static/PrometheusLogo.b467d9c.e553ac19b5ff245f090d7b43ff9cc063.png 407w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 407 124' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-be8ea3cb9f8cd8ee64d7648744f862f9'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-be8ea3cb9f8cd8ee64d7648744f862f9)' width='407' height='124' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAATCAIAAACvEZzQAAAACXBIWXMAAAsSAAALEgHS3X78AAAHdElEQVRIx52W%2b1NTZxrH%2bWn/g05/2pWClkuuQEjSOh2DokAu5%2bSOIAhaFHFRS%2bViQW2tMihCrLbVVqBavBZc21FrdxynXZ3Z7ex02p12pp3pdGdLknNOrueWnISIAvu8SQghxB1Y5p3My3ve857v57m9T47brHQbZG5MnhouTE4aS322Msoq86x4JDaTZjllXsVb6SNYq/TZSimrNNvh0oC9nK1dz9a%2bujjsr7B163NceKlLK3bpJKnh1EkIvYyxKX0WUCOizOIVDtIodmklBC6mLOKVv5X4RNBaxtrU8FGvRbr8o6RZFLCWwgbWplocViVg5JCWrABSxqoCRJ8d/CBFp4AZbDLKIskuwiImTclDCOOq1ItT6hOyGJsKGMilDNkBbKqgXZVD1ZYSWDYAcJBVyejFPn0BOkKXT9bkUqbiJM9y2y%2b8vlqAoFWRIQv5wSxL90M2ADVgUzZ5DmUvpUwiAk8D0IoJrIQxSLmGDdFPhmZ%2b%2bPuTn7%2bPff%2bYvzToqVeS2vwMhnT1qwVIt/0SBqvKa16MpQwADqlXoKdWWRIANi0y6GXuzQWhzoZZyjU/Pz/rJZ48/GI%2b/vfM6w50bSV1a1MMpAn2o1f%2bD4CgTZFV/WIsIT8sB4jbHtZNSwGSDHqps6qQaqyY9VNIfdAXu3ed72mKfXN3lgkgBtrn272JNLwMDCRe7KwugsR1bsxDiaSXwiCMEpQqlgUvWSSLI7WSsL2pLJmLNiUqKQnpdjUacaEolqyIgbRIAtayBfWK5DnLAeIWlU1pXgrfu5Eweez%2bZ9zrVXwbxu3YPPPd48Ri5OEtUptHYEVkU2X49uXQ9Q/pc2%2b7aopdWwqmNuYTuIgyrCNrXkLHGotQ8ujXkYYCsiYv/tVimARxKWdV8e1mRiuKnDnMdzfSm9fGdSsZg4QxliIPmJDJ4RdiidDl%2b/XFXMr2zweQwBzq0lOPO6FVONXJ1BRxjRrIZuHskcTiLO2j6pS/a3I9HfXhu9enNGuEL2/6j7YSda/5jrSSFrn/DSPdvxdi1NOgDvbUBTptvrZq%2blgLiRWA37h32/jdOm57xZPH90Pt5ujIYHTsdKivhQMAqzJ8bC%2bAwST0ZzNnLYcNrF0V7LTzR3fRduWSCpsFwCKB2PC1Vc1Fhfm5OWTs948xeglb/xqjE0Uvn4nnwbO5mZivDXdrcv0ddcJXt6id1cJfJ%2bkT%2b6b/%2bYg93UMPHBBuj/AXj3Mj/ex7PcKdT8O3R8KTF4TPR5mT%2b8LjjsiVc9P3PwudaH/y47dcb3Pk0nD01kjkxnkwkDA6GLl2PnrnanjoUHRyLICXRibHQmf6Yn%2b7R/c2k/YyCFqoGcmBg62XA%2bCF3p0bZnkapE7fuMDvxRlMxhhLGFzOH7BHLztgfS4SYvfoWK0odHDbzL/%2bEb00HOrezrfh03evBdQvRCcu%2brtrnYo/hCfOh644gr0N9Ds7mYF2/34s/JfRyIOJ4CE76zjob9eFJj52b3iBHx0IdJj9rVsit0aFr24Gju4KvL078G47N37uP%2boX%2bclRTxvOXjzFnD/hNitcNaLFigdZh8kzcwCGS1sU%2b/kHEPr0378IZw9HPh6IfNQPv4Kj9%2bmvP8H6zG8/wbaArijc1xK7c5WuWANhFjpgn4Z5dSHb/wZ/8wJzuoMfH2bf76MH9jGD%2b9jhzmBfEzd2kh93sI7O4NEdngZV9PG9QJc9ND5MH27mexqFiQv82En67BFfVyPVUiM8/MLf1yJ8cxcAvB11kUdfeloxZ%2bU6VCqeC2ASuzHZVEUePXQIxToTDB9vF051CWd6I4PdoXdan8VLE/tBH1GdC%2bFIN2lCb9Yna3Ojhu/YCrFL6cTe7mZ6uI%2b0lfh2bfLu1IBLfa9XeJvW%2b3Zv9mwtQ1TH90B%2bB9/aRh/b5d9Txe2o5LdvYtqNkCEQdcH%2b/aAPRNOnujx7TWSDhh56C/51Vhe7dNJ0DxCmpQBuffImdlcXxh7cjuerP3zyIP9mPd%2b/P6E%2b%2bvXnFF6QrIYgAhMnK6ClHMIMEpHCSn7fmDe1YY1LKyKxQgovhN/4pAglsbGYqPoTATUKqrYun9Lm00Y5a1HA61CaSBM8XQPWcRvEU5vWQT0EkzuriqY0uVOVa9OvS3ThYGLobhYAwPaGtGfQSpgV01c/mJuOzHz3SBjqiX37YC4WDV07BwrQ/mRRl4DNoLRxiSum9hWYUJjcaZCBc9FRBtAkybwKbKh1hbsJ2kymVo347aj80zYlmXhqk8UvJZnLIHfBURAzWHySrh4XL9zEtQggXT1qJQxyuAgZbTHXXBl2HOKvOBhHp3f7q2C81E2U0REkGJIA6d2hXgJ93vLu0mOWMNbytJtYTVsVGT0cgUkyrJ6mPq2MuvXZmjlQs3U9bSqhqnOJLX8kq3KhQP2PhjTV1WQCpBgsi%2brBdTRSn947ZAFAUQ0M2rSjtAvqUwBuU1nWdhoOpW3lYKdkX/C8RjrDD3Z1FoClfliwvWolAHE/iDNtnw7gwrMBGGTQciD1q%2bzsQQQkcRYAKAxxBk/S9uqVA8T9IM5UvwDwX/9wZwxuhWIIAAAAAElFTkSuQmCC' /%3e%3c/svg%3e"}}},"context":{}}