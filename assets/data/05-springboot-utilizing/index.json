{"hash":"c7c6273426a1f1c25b484e341518249aeec696cd","data":{"post":{"title":"[SpringBoot] SpringBoot 운영하기","path":"/05-springboot-utilizing/","date":"5. September 2020","timeToRead":2,"tags":[{"id":"Spring","title":"Spring","path":"/tag/Spring/"},{"id":"SpringBoot","title":"SpringBoot","path":"/tag/SpringBoot/"},{"id":"Backend","title":"Backend","path":"/tag/Backend/"},{"id":"SpringStarter","title":"SpringStarter","path":"/tag/SpringStarter/"}],"description":" 'SpringBoot 활용하기'의 다섯번째 게시글입니다. ","content":"<h1 id=\"springboot-운영하기\"><a href=\"#springboot-%EC%9A%B4%EC%98%81%ED%95%98%EA%B8%B0\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>SpringBoot 운영하기</h1>\n<p>스프링 부트는 애플리케이션 운영 환경에서 유용한 기능을 제공한다. 스프링 부트가 제공하는 엔드포인트와 메트릭스 그리고 그 데이터를 활용하는 모니터링 기능에 대해 알아보기.</p>\n<br/>\n<h2 id=\"spring-actuator\"><a href=\"#spring-actuator\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Spring Actuator</h2>\n<h3 id=\"스프링부트-actuator-소개\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8-actuator-%EC%86%8C%EA%B0%9C\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>스프링부트 Actuator 소개</h3>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#production-ready-endpoints\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#production-ready-endpoints</a></p>\n<ul>\n<li>의존성 추가</li>\n<li>spring-boot-starter-actuator</li>\n</ul>\n<h4 id=\"애플리케이션의-각종-정보를-확인할-수-있는-endpoints\"><a href=\"#%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98%EC%9D%98-%EA%B0%81%EC%A2%85-%EC%A0%95%EB%B3%B4%EB%A5%BC-%ED%99%95%EC%9D%B8%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8A%94-endpoints\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>애플리케이션의 각종 정보를 확인할 수 있는 Endpoints</h4>\n<ul>\n<li>다양한 Endpoints 제공.</li>\n<li>JMX 또는 HTTP를 통해 접근 가능 함.</li>\n<li>shutdown을 제외한 모든 Endpoint는 기본적으로 활성화 상태.</li>\n<li>\n<p>활성화 옵션 조정</p>\n<ul>\n<li>management.endpoints.enabled-by-default=false</li>\n<li>management.endpoint.info.enabled=true</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"jmx와-http\"><a href=\"#jmx%EC%99%80-http\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>JMX와 HTTP</h3>\n<h4 id=\"jconsole-사용하기\"><a href=\"#jconsole-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>JConsole 사용하기</h4>\n<ul>\n<li>프로젝트 돌린 이후에, console 창에 <code class=\"language-text\">jconsole</code>이라고 입력하면 된다.</li>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/jmx/mbeans/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://docs.oracle.com/javase/tutorial/jmx/mbeans/</a></li>\n<li><a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/management/jconsole.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://docs.oracle.com/javase/7/docs/technotes/guides/management/jconsole.html</a></li>\n</ul>\n<h4 id=\"visualvm-사용하기\"><a href=\"#visualvm-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>VisualVM 사용하기</h4>\n<ul>\n<li><a href=\"https://visualvm.github.io/download.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://visualvm.github.io/download.html</a></li>\n</ul>\n<h4 id=\"http-사용하기\"><a href=\"#http-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>HTTP 사용하기</h4>\n<ul>\n<li>/actuator</li>\n<li>health와 info를 제외한 대부분의 Endpoint가 기본적으로 비공개 상태</li>\n<li>\n<p>공개 옵션 조정</p>\n<ul>\n<li>\n<p><code class=\"language-text\">management.endpoints.web.exposure.include=*</code></p>\n<ul>\n<li>단 이는, 위험함.</li>\n<li>spring securtiy를 적용하는 것도 한 방법.</li>\n</ul>\n</li>\n<li>management.endpoints.web.exposure.exclude=env,beans</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"스프링-부트-어드민\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B6%80%ED%8A%B8-%EC%96%B4%EB%93%9C%EB%AF%BC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>스프링 부트 어드민</h3>\n<ul>\n<li>아래는 반드시 스프링 security를 해야한다. 너무 민감한 정보들이 많다.</li>\n</ul>\n<p><a href=\"https://github.com/codecentric/spring-boot-admin\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/codecentric/spring-boot-admin</a> 스프링 부트 Actuator UI 제공 어드민 서버 설정</p>\n<pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>de.codecentric<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-admin-starter-server<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>2.2.4<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n\n@EnableAdminServer</code></pre>\n<ul>\n<li>2.0.1 에서 안되서 버전을 2.2.4로 버전업 시켰다.(client도 마찬가지로 진행하였음)</li>\n</ul>\n<p>클라이언트 설정</p>\n<pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>de.codecentric<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-admin-starter-client<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>2.2.4<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n\nspring.boot.admin.client.url=http://localhost:8080\nmanagement.endpoints.web.exposure.include=*</code></pre>\n<br/>\n<h2 id=\"스프링-마무리\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>스프링 마무리</h2>\n<h3 id=\"스프링-부트-원리\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B6%80%ED%8A%B8-%EC%9B%90%EB%A6%AC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>스프링 부트 원리</h3>\n<ul>\n<li>의존성 관리</li>\n<li>자동 설정</li>\n<li>내장 웹 서버</li>\n<li>JAR 패키징</li>\n</ul>\n<h3 id=\"스프링-부트-활용\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B6%80%ED%8A%B8-%ED%99%9C%EC%9A%A9\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>스프링 부트 활용</h3>\n<ul>\n<li>스프링 부트 핵심 기능</li>\n<li>다양한 기술 연동</li>\n</ul>\n<h3 id=\"스프링-부트-운영\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B6%80%ED%8A%B8-%EC%9A%B4%EC%98%81\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>스프링 부트 운영</h3>\n<ul>\n<li>Actuator</li>\n<li>스프링 부트 어드민</li>\n</ul>\n","cover_image":{"type":"image","mimeType":"image/png","src":"/assets/static/SpringLogo.214a68b.be0c3d9590430504675b948223711f21.png","size":{"width":820,"height":442},"sizes":"(max-width: 820px) 100vw, 820px","srcset":["/assets/static/SpringLogo.a67b0b2.be0c3d9590430504675b948223711f21.png 480w","/assets/static/SpringLogo.214a68b.be0c3d9590430504675b948223711f21.png 820w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 820 442' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-29f2605aef896f90944d207b9d4e9d4c'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-29f2605aef896f90944d207b9d4e9d4c)' width='820' height='442' xlink:href='data:image/png%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAiAEADASIAAhEBAxEB/8QAGwABAAMBAAMAAAAAAAAAAAAAAAQFBgMCBwj/xAAqEAABAwQBAgUEAwAAAAAAAAABAgMEAAURIRIGMRNBUWGBFBUiMgdxof/EABgBAQADAQAAAAAAAAAAAAAAAAACAwQB/8QAIxEAAgICAgIBBQAAAAAAAAAAAAECEQMhEjEEQVEiYZGx4f/aAAwDAQACEQMRAD8A%2bnaUpQCs51b1SxYEobS348xwckt5wEj1Ua0dYx2BBX/IEt%2b9lrwRGQ7HD5AQcYB76OPT3rN5U5xglj026v4Ksrkl9Psr7H17OnXFqO5bUPpcVjEbPJPvvR/yvYDKy42FKTxVsFOc4I0RUWNLiuZFrZQhgDLkkN8G0pHocDkf60PWu8RYdbU6j9HFqWj3STo/Pf5rnjKcVU58hiUlpys7UpStRaKgXi5t2xplS21uuPuBpptBAKlEZ7kgDt51PqtvsF6fFS019ItPLK2pTXNCx8HII9RUMnLi%2bPZGV1oiOdRcJLMUWueZjrRdSxxSDpWDk5wB557VW3i%2b225Qm4cmBOedfWtox2xxdQ4jB4nfuDntquMKx3W3XmMIbyCW4jmVuNqUz%2bTmfCG8gAdt51VjbunXo90jXCRKQ7IDjzr5CMBSlpCQE%2bgAFYrz5Fxa%2bzuutfn2UXkkqKCNHs0e4JaMS7T5AeW0mO66Fp5oSFdsgY3561WjR1RHcaaSxDluTXHVsiGEgOJUj9snOABkbrxidPusX77gZCCj6h57gEnOFpSAPjFV1ytUy1z/ALjBDj0lUp50eGyXEhtYT%2bK0gg%2bXcVGMcuFNxVK/hda3%2bziU4LSNDaLu3c3pbSWH2HYqkpcS8ACCRnGjVlWd6Rjzg9c51yQpDkt1JSlaOBwlOM8cnA9Ad6rRVtwSlKCcu/7ovxtuNsUpSrSYpSlAKUpQClKUB//Z' /%3e%3c/svg%3e"}}},"context":{}}