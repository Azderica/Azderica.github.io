{"hash":"c7c6273426a1f1c25b484e341518249aeec696cd","data":{"post":{"title":"[DB] 객체지향 쿼리, JPQL","path":"/00-jpa-jpql/","date":"15. July 2021","timeToRead":2,"tags":[{"id":"JPA","title":"JPA","path":"/tag/JPA/"},{"id":"QUERY","title":"QUERY","path":"/tag/QUERY/"},{"id":"JPQL","title":"JPQL","path":"/tag/JPQL/"},{"id":"Spring","title":"Spring","path":"/tag/Spring/"}],"description":"JPQL의 기본 개념에 대해 정리합니다.","content":"<h1 id=\"jpqljava-persistence-query-language\"><a href=\"#jpqljava-persistence-query-language\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>JPQL(Java Persistence Query Language)</h1>\n<h2 id=\"jpql란\"><a href=\"#jpql%EB%9E%80\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>JPQL란?</h2>\n<ul>\n<li>테이블이 아닌 엔티티 객체를 대상으로 검색하는 객체지향 쿼리입니다.</li>\n<li>SQL을 추상화해서 특정 데이터베이스 SQL에 의존하지 않습니다.</li>\n<li>JPA는 JPQL을 분석한 후 적절한 SQL을 만들어 데이터베이스를 조회합니다.</li>\n<li>방언(Dialect)만 변경하면 JPQL을 수정하지 않고 자연스럽게 DB를 변경합니다.</li>\n<li>엔티티 객체를 중심으로 개발합니다.</li>\n</ul>\n<br/>\n<h2 id=\"jpql-사용법\"><a href=\"#jpql-%EC%82%AC%EC%9A%A9%EB%B2%95\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>JPQL 사용법</h2>\n<p>다음과 같이 사용합니다.</p>\n<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">String</span> jpql<span class=\"token operator\">=</span> <span class=\"token string\">\"select m From Member m where m.name like '%hello%'\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> result <span class=\"token operator\">=</span> em<span class=\"token punctuation\">.</span><span class=\"token function\">createQuery</span><span class=\"token punctuation\">(</span>jpql<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getResultList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>해당 코드를 보면 다음을 알 수 있습니다.</p>\n<ul>\n<li>테이블이 아닌 객체를 대상으로 검색하는 객체지향 쿼리로 이해하면 됩니다.</li>\n<li>SQL을 추상화하해서 특정 데이터베이스 SQL에 의존하지 않습니다.</li>\n<li>JPQL을 한마디로 정의하면 객체 지향 SQL입니다.</li>\n</ul>\n<h3 id=\"예시-문법\"><a href=\"#%EC%98%88%EC%8B%9C-%EB%AC%B8%EB%B2%95\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>예시 문법</h3>\n<pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> _\n<span class=\"token keyword\">from</span> _\n<span class=\"token punctuation\">[</span><span class=\"token keyword\">where</span> _<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span>groupby _<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token keyword\">having</span> _<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span>orderby _<span class=\"token punctuation\">]</span></code></pre>\n<h3 id=\"신경쓸-요소\"><a href=\"#%EC%8B%A0%EA%B2%BD%EC%93%B8-%EC%9A%94%EC%86%8C\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>신경쓸 요소</h3>\n<ul>\n<li><code class=\"language-text\">from</code>에는 객체가 들어갑니다.</li>\n<li>엔티티와 속성은 대문자를 구분합니다.</li>\n<li>JPQL 키워드는 대소문자를 구분하지 않습니다.</li>\n<li>엔티티 이름을 사용하며 테이블 이름이 아닙니다.</li>\n<li>별칭은 필수 입니다.</li>\n</ul>\n<h3 id=\"결과-조회-api\"><a href=\"#%EA%B2%B0%EA%B3%BC-%EC%A1%B0%ED%9A%8C-api\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>결과 조회 API</h3>\n<ul>\n<li><code class=\"language-text\">query.getResultList()</code> : 결과가 하나 이상인 경우, 리스트를 반환합니다.</li>\n<li><code class=\"language-text\">query.getSingleResult()</code> : 결과가 정확히 하나, 단일 객체를 반환합니다. (하나가 아니면 예외가 발생합니다.)</li>\n</ul>\n<hr>\n<p><strong>출처</strong></p>\n<ul>\n<li><a href=\"https://data-make.tistory.com/614\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">JPA, JPQL Query 정리</a></li>\n<li><a href=\"https://ict-nroo.tistory.com/116\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">JPA, 객체지향 쿼리, JPQL</a></li>\n<li><a href=\"https://victorydntmd.tistory.com/205\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Spring JPA, JPQL</a></li>\n</ul>\n","cover_image":{"type":"image","mimeType":"image/png","src":"/assets/static/JpqlText.0c67281.424da2901e3aed0e8eab6b3b3e7a543e.png","size":{"width":828,"height":465},"sizes":"(max-width: 828px) 100vw, 828px","srcset":["/assets/static/JpqlText.a67b0b2.424da2901e3aed0e8eab6b3b3e7a543e.png 480w","/assets/static/JpqlText.0c67281.424da2901e3aed0e8eab6b3b3e7a543e.png 828w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 828 465' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-60e9167169d9b292c0ed801c8e6ceb7a'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-60e9167169d9b292c0ed801c8e6ceb7a)' width='828' height='465' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAkCAYAAAA5DDySAAAACXBIWXMAAAsSAAALEgHS3X78AAACdElEQVRo3u1XSUsrQRDO3xHUg/u%2b4XZRT3oQBRFRERUVFRUXXHBDxX1D9Kae/WWZyXT35PTZVZ3JC8%2bX00sevliHojtT1c3UN199VYn5LS34yRYTAAQAAUAAEAAEAAFAABAABAABQADIl3nNzfBbW78a%2bTP3UWyhAEDJRAl5tbXwKivh1dXBq6qCV1PDidPqVVe72IaGL%2bcKgwFNTUgMDUHNziLR349gYgLB8DAnH4yMIBgbg9/WhkRfH8cWXgk0NnKi%2buAAyY8PmLs7hPf3MGdnMEdH0JFZf1QSBcMATqS93VG/ogLJ93eEz89Qa2sIX17YHy8pQfj0BHN8DK%2b83JXHPyqFWM6T/QP9/a4umKsr6P19BkDNzSFeVAQ1P88sSL69OUZcX0OvryMYH0/rwe/35hqQWK6T569GSROVbV3z7/p6JAYGEExOwu/pcUY0J22wWqCmp%2bH39iIxOMh7Wvk%2bez66J7MscglCfhjQ0eGU3ao%2bv3xnJ%2bKlpYgXF7sOQN2A/LS3K5UAU7%2bszPlsqaT9UTyVRQrQ71sCVuxIycOHB0f53V0nfK%2bvv0TPCqA5P4e5vITe2oLe24O5vYU5OYE5PYVaXORSMRcX0IeHvNfb2xxD3YK0JHNu%2bH4MsF8/mJqC3tnhGg8spYPRUeiNDejNTaiVFaiFBajVVW6L1BJJ/NTMjDuzvMwaQd3B3NxALS0hfHxksPzu7py3yfxoAA03qWGH1T8afojKKdqzkZ8GJKI8PU%2bpPu/peXTOCiLHW4b9HxqQbdzNZhkilx6bo3sz7/jOXYDtL14uW6vLZwuUf4MCgAAgAAgAAoAAIAAIAD/ZPgHuLSK4G1pApQAAAABJRU5ErkJggg==' /%3e%3c/svg%3e"}}},"context":{}}