{"hash":"49b01721c2ed4f1361ca6db09477053f31e960ba","data":{"post":{"title":"[Springboot] Springboot 활용하기 - 4","path":"/04-springboot-utilizing/","date":"4. September 2020","timeToRead":2,"tags":[{"id":"Spring","title":"Spring","path":"/tag/Spring/"},{"id":"Springboot","title":"Springboot","path":"/tag/Springboot/"},{"id":"Backend","title":"Backend","path":"/tag/Backend/"},{"id":"SpringStarter","title":"SpringStarter","path":"/tag/SpringStarter/"}],"description":" 'Springboot 활용하기'의 네번째 게시글입니다. ","content":"<h1 id=\"springboot-활용하기4\"><a href=\"#springboot-%ED%99%9C%EC%9A%A9%ED%95%98%EA%B8%B04\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Springboot 활용하기4</h1>\n<br/>\n<h2 id=\"스프링-시큐리티\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EC%8B%9C%ED%81%90%EB%A6%AC%ED%8B%B0\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>스프링 시큐리티</h2>\n<h3 id=\"starter-security\"><a href=\"#starter-security\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Starter-Security</h3>\n<h4 id=\"스프링-시큐리티-1\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EC%8B%9C%ED%81%90%EB%A6%AC%ED%8B%B0-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>스프링 시큐리티</h4>\n<p>Tip)</p>\n<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Override</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">addViewControllers</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ViewControllerRegistry</span> registry<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 기능없이 뷰로만 보내면, 이렇게 하면된다.</span>\n    registry<span class=\"token punctuation\">.</span><span class=\"token function\">addViewController</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setViewName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<ul>\n<li>웹 시큐리티</li>\n<li>메소드 시큐리티</li>\n<li>\n<p>다양한 인증 방법 지원</p>\n<ul>\n<li>LDAP, 폼 인증, Basic 인증, OAuth, ...</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"스프링-부트-시큐리티-자동-설정\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B6%80%ED%8A%B8-%EC%8B%9C%ED%81%90%EB%A6%AC%ED%8B%B0-%EC%9E%90%EB%8F%99-%EC%84%A4%EC%A0%95\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>스프링 부트 시큐리티 자동 설정</h4>\n<ul>\n<li>SecurityAutoConfiguration</li>\n<li>UserDetailsServiceAutoConfiguration</li>\n<li>\n<p>spring-boot-starter-security</p>\n<ul>\n<li>스프링 시큐리티 5.* 의존성 추가</li>\n</ul>\n</li>\n<li>모든 요청에 인증이 필요함.</li>\n<li>\n<p>기본 사용자 생성</p>\n<ul>\n<li>Username: user</li>\n<li>Password: 애플리케이션을 실행할 때 마다 랜덤 값 생성 (콘솔에 출력 됨.)</li>\n<li>spring.security.user.name</li>\n<li>spring.security.user.password</li>\n</ul>\n</li>\n<li>\n<p>인증 관련 각종 이벤트 발생</p>\n<ul>\n<li>DefaultAuthenticationEventPublisher 빈 등록</li>\n<li>다양한 인증 에러 핸들러 등록 가능</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"스프링-부트-시큐리티-테스트\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B6%80%ED%8A%B8-%EC%8B%9C%ED%81%90%EB%A6%AC%ED%8B%B0-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>스프링 부트 시큐리티 테스트</h4>\n<ul>\n<li><a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/html/test-method.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://docs.spring.io/spring-security/site/docs/current/reference/html/test-method.html</a></li>\n</ul>\n<h3 id=\"시큐리티-설정-커스터마이징\"><a href=\"#%EC%8B%9C%ED%81%90%EB%A6%AC%ED%8B%B0-%EC%84%A4%EC%A0%95-%EC%BB%A4%EC%8A%A4%ED%84%B0%EB%A7%88%EC%9D%B4%EC%A7%95\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>시큐리티 설정 커스터마이징</h3>\n<h4 id=\"웹-시큐리티-설정\"><a href=\"#%EC%9B%B9-%EC%8B%9C%ED%81%90%EB%A6%AC%ED%8B%B0-%EC%84%A4%EC%A0%95\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>웹 시큐리티 설정</h4>\n<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">WebSecurityConfig</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">WebSecurityConfigurerAdapter</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token annotation punctuation\">@Override</span>\n   <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">configure</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpSecurity</span> http<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n       http<span class=\"token punctuation\">.</span><span class=\"token function\">authorizeRequests</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n               <span class=\"token punctuation\">.</span><span class=\"token function\">antMatchers</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"/hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">permitAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n               <span class=\"token punctuation\">.</span><span class=\"token function\">anyRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">authenticated</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n               <span class=\"token punctuation\">.</span><span class=\"token function\">and</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n           <span class=\"token punctuation\">.</span><span class=\"token function\">formLogin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n               <span class=\"token punctuation\">.</span><span class=\"token function\">and</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n           <span class=\"token punctuation\">.</span><span class=\"token function\">httpBasic</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<h4 id=\"userdetailsservie-구현\"><a href=\"#userdetailsservie-%EA%B5%AC%ED%98%84\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>UserDetailsServie 구현</h4>\n<ul>\n<li><a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#jc-authentication-userdetailsservice\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#jc-authentication-userdetailsservice</a></li>\n</ul>\n<h4 id=\"passwordencoder-설정-및-사용\"><a href=\"#passwordencoder-%EC%84%A4%EC%A0%95-%EB%B0%8F-%EC%82%AC%EC%9A%A9\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>PasswordEncoder 설정 및 사용</h4>\n<ul>\n<li><a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#core-services-password-encoding\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#core-services-password-encoding</a></li>\n</ul>\n<br/>\n<h2 id=\"스프링-rest-클라이언트\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-rest-%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>스프링 REST 클라이언트</h2>\n<h3 id=\"resttemplate와-webclient\"><a href=\"#resttemplate%EC%99%80-webclient\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>RestTemplate와 WebClient</h3>\n<h4 id=\"resttemplate\"><a href=\"#resttemplate\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>RestTemplate</h4>\n<ul>\n<li>\n<p>Blocking I/O 기반의 Synchronous API</p>\n<ul>\n<li>동기, <code class=\"language-text\">.getForObjet({url})</code> 사용</li>\n</ul>\n</li>\n<li>RestTemplateAutoConfiguration</li>\n<li>프로젝트에 spring-web 모듈이 있다면 RestTemplateBuilder를 빈으로 등록해 줍니다.</li>\n<li><a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/integration.html#rest-client-access\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://docs.spring.io/spring/docs/current/spring-framework-reference/integration.html#rest-client-access</a></li>\n</ul>\n<h4 id=\"webclient\"><a href=\"#webclient\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>WebClient</h4>\n<ul>\n<li>\n<p>Non-Blocking I/O 기반의 Asynchronous API</p>\n<ul>\n<li>비동기, <code class=\"language-text\">.subscribe(s -&gt; {});</code> 사용</li>\n</ul>\n</li>\n<li>WebClientAutoConfiguration</li>\n<li>프로젝트에 spring-webflux 모듈이 있다면 WebClient.Builder를 빈으로 등록해 줍니다.</li>\n<li><a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html#webflux-client\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html#webflux-client</a></li>\n</ul>\n<h3 id=\"커스터마이징\"><a href=\"#%EC%BB%A4%EC%8A%A4%ED%84%B0%EB%A7%88%EC%9D%B4%EC%A7%95\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>커스터마이징</h3>\n<h4 id=\"resttemplate-1\"><a href=\"#resttemplate-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>RestTemplate</h4>\n<ul>\n<li>기본으로 java.net.HttpURLConnection 사용.</li>\n<li>\n<p>커스터마이징</p>\n<ul>\n<li>로컬 커스터마이징</li>\n<li>\n<p>글로벌 커스터마이징</p>\n<ul>\n<li>RestTemplateCustomizer</li>\n<li>빈 재정의</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"webclient-1\"><a href=\"#webclient-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>WebClient</h4>\n<ul>\n<li>기본으로 Reactor Netty의 HTTP 클라이언트 사용.</li>\n<li>\n<p>커스터마이징</p>\n<ul>\n<li>로컬 커스터마이징</li>\n<li>\n<p>글로벌 커스터마이징</p>\n<ul>\n<li>WebClientCustomizer</li>\n<li>빈 재정의</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<br/>\n<h2 id=\"그-외\"><a href=\"#%EA%B7%B8-%EC%99%B8\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>그 외.</h2>\n<h3 id=\"그밖의-다양한-기술\"><a href=\"#%EA%B7%B8%EB%B0%96%EC%9D%98-%EB%8B%A4%EC%96%91%ED%95%9C-%EA%B8%B0%EC%88%A0\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>그밖의 다양한 기술</h3>\n<h4 id=\"references\"><a href=\"#references\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>References</h4>\n<p>: <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle</a></p>\n<ul>\n<li>캐시</li>\n<li>메시징</li>\n<li>Validation</li>\n<li>이메일 전송</li>\n<li>JTA</li>\n<li>스프링 인티그레이션</li>\n<li>스프링 세션</li>\n<li>JMX</li>\n<li>웹소켓</li>\n<li>코틀린</li>\n<li>...</li>\n</ul>\n","cover_image":{"type":"image","mimeType":"image/png","src":"/assets/static/SpringLogo.214a68b.be0c3d9590430504675b948223711f21.png","size":{"width":820,"height":442},"sizes":"(max-width: 820px) 100vw, 820px","srcset":["/assets/static/SpringLogo.a67b0b2.be0c3d9590430504675b948223711f21.png 480w","/assets/static/SpringLogo.214a68b.be0c3d9590430504675b948223711f21.png 820w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 820 442' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-29f2605aef896f90944d207b9d4e9d4c'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-29f2605aef896f90944d207b9d4e9d4c)' width='820' height='442' xlink:href='data:image/png%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAiAEADASIAAhEBAxEB/8QAGwABAAMBAAMAAAAAAAAAAAAAAAQFBgMCBwj/xAAqEAABAwQBAgUEAwAAAAAAAAABAgMEAAURIRIGMRNBUWGBFBUiMgdxof/EABgBAQADAQAAAAAAAAAAAAAAAAACAwQB/8QAIxEAAgICAgIBBQAAAAAAAAAAAAECEQMhEjEEQVEiYZGx4f/aAAwDAQACEQMRAD8A%2bnaUpQCs51b1SxYEobS348xwckt5wEj1Ua0dYx2BBX/IEt%2b9lrwRGQ7HD5AQcYB76OPT3rN5U5xglj026v4Ksrkl9Psr7H17OnXFqO5bUPpcVjEbPJPvvR/yvYDKy42FKTxVsFOc4I0RUWNLiuZFrZQhgDLkkN8G0pHocDkf60PWu8RYdbU6j9HFqWj3STo/Pf5rnjKcVU58hiUlpys7UpStRaKgXi5t2xplS21uuPuBpptBAKlEZ7kgDt51PqtvsF6fFS019ItPLK2pTXNCx8HII9RUMnLi%2bPZGV1oiOdRcJLMUWueZjrRdSxxSDpWDk5wB557VW3i%2b225Qm4cmBOedfWtox2xxdQ4jB4nfuDntquMKx3W3XmMIbyCW4jmVuNqUz%2bTmfCG8gAdt51VjbunXo90jXCRKQ7IDjzr5CMBSlpCQE%2bgAFYrz5Fxa%2bzuutfn2UXkkqKCNHs0e4JaMS7T5AeW0mO66Fp5oSFdsgY3561WjR1RHcaaSxDluTXHVsiGEgOJUj9snOABkbrxidPusX77gZCCj6h57gEnOFpSAPjFV1ytUy1z/ALjBDj0lUp50eGyXEhtYT%2bK0gg%2bXcVGMcuFNxVK/hda3%2bziU4LSNDaLu3c3pbSWH2HYqkpcS8ACCRnGjVlWd6Rjzg9c51yQpDkt1JSlaOBwlOM8cnA9Ad6rRVtwSlKCcu/7ovxtuNsUpSrSYpSlAKUpQClKUB//Z' /%3e%3c/svg%3e"}}},"context":{}}